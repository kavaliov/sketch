(this.webpackJsonpsketch=this.webpackJsonpsketch||[]).push([[0],[,,,,,,,function(e,t,n){e.exports={panel:"Drawing_panel__2o_TQ",brushSize:"Drawing_brushSize__aLRaj",exampleWrapper:"Drawing_exampleWrapper__3TzB5",example:"Drawing_example__2VsWC",exampleText:"Drawing_exampleText__ETlUH",brushes:"Drawing_brushes__2BT4B",brush:"Drawing_brush__2P9t4",active:"Drawing_active__2g9G-",leaves:"Drawing_leaves__hypIS",slider:"Drawing_slider__pHZbj",thumb:"Drawing_thumb__2xpH_",value:"Drawing_value__3uPDE"}},function(e,t,n){e.exports={wrapper:"Panel_wrapper__o97Tj",header:"Panel_header__1ho3T",title:"Panel_title__gMfhr",close:"Panel_close__3SCzl",opened:"Panel_opened__1xDq5"}},,,function(e,t,n){e.exports={backgroundList:"Background_backgroundList__3Q63z",background:"Background_background__2waWn",backgroundColor:"Background_backgroundColor__11qqf"}},function(e,t,n){e.exports={answers:"Sketch_answers__2XJOF",canvasWrapper:"Sketch_canvasWrapper__Mvkdt",fullscreen:"Sketch_fullscreen__3tgqX"}},,,function(e,t,n){e.exports={wrapper:"Button_wrapper__1oiSI",active:"Button_active__1Qvou",disabled:"Button_disabled__nbT6h"}},function(e,t,n){e.exports={wrapper:"ColorHistory_wrapper__2Ecmf",color:"ColorHistory_color__mlCe6"}},function(e,t,n){e.exports={select:"Figures_select__1KLhn",shapeList:"Figures_shapeList__x2KT2",shape:"Figures_shape__ub_sG"}},function(e,t,n){e.exports={wrapper:"Fraction_wrapper__drGCQ",separator:"Fraction_separator__1j604",insertButton:"Fraction_insertButton__pLNCq"}},function(e,t,n){e.exports={wrapper:"ObjectMenu_wrapper__pEbwy",withColorApply:"ObjectMenu_withColorApply__2MbWx",withoutCopy:"ObjectMenu_withoutCopy__3hOz0"}},,function(e,t,n){e.exports={wrapper:"Eyedropper_wrapper__3_CV9",colorView:"Eyedropper_colorView__2Ppen"}},function(e,t,n){e.exports={wrapper:"ColorPicker_wrapper__1LHHr",pointer:"ColorPicker_pointer__1gLq0"}},function(e,t,n){e.exports={charList:"SpecialChars_charList__jsD3R",char:"SpecialChars_char__3qn65"}},function(e,t,n){e.exports={wrapper:"Select_wrapper__1Vf5h"}},function(e,t,n){e.exports={pickerWrapper:"ColorPicker_pickerWrapper__1gQeM",picker:"ColorPicker_picker__NHuPG",pointer:"ColorPicker_pointer__2vrFs"}},,function(e,t,n){e.exports={wrapper:"RightControlPanel_wrapper__3PtuO"}},function(e,t,n){e.exports={wrapper:"LeftControlPanel_wrapper__2Xh4t"}},function(e,t,n){e.exports={wrapper:"FontText_wrapper__1LKYP"}},function(e,t,n){e.exports={answer:"Answer_answer__3lvrs"}},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(13),i=n.n(c),s=n(4),o=n(2),l=n(3),u=n(6),d=n.n(u),h=518,f=970,b="#fffff",p=8,g="circle",j="rgba(232, 248, 255, 0.1)",m="#cef0fe",v=1,w="#ff0000",O={height:h,width:f,backgroundColor:b},x=function(e,t){var n=e.replace("#",""),a=parseInt(n.substring(0,2),16),r=parseInt(n.substring(2,4),16),c=parseInt(n.substring(4,6),16);return"rgba(".concat(a,",").concat(r,",").concat(c,",").concat(t/100,")")},_=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},y=function(){var e=f/2,t=h/2;return{top:_(t-180,t+70),left:_(e-350,e+50)}},C=function(e,t,n){return"#".concat(((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1))},S=a.createContext(null),A=n(10),k=n(5),T={currentColor:w,mode:"hand",brushType:"pencil",fullscreen:!1,width:O.width,height:O.height,answers:[],usedAnswers:[]},E=T,N=Object(k.createAction)("SKETCH/SET_CURRENT_COLOR")(),D=Object(k.createAction)("SKETCH/SET_MODE")(),I=Object(k.createAction)("SKETCH/SET_BRUSH")(),B=Object(k.createAction)("SKETCH/SET_FULLSCREEN")(),F=Object(k.createAction)("SKETCH/SET_WIDTH")(),R=Object(k.createAction)("SKETCH/SET_HEIGHT")(),L=Object(k.createAction)("SKETCH/SET_ANSWERS")(),M=Object(k.createAction)("SKETCH/SET_USED_ANSWERS")(),z=Object(k.createAction)("SKETCH/ADD_USED_ANSWER")(),P=Object(k.createAction)("SKETCH/REMOVE_USED_ANSWER")(),H=Object(k.createReducer)(E).handleAction(N,(function(e,t){var n=t.payload.currentColor;return Object(o.a)(Object(o.a)({},e),{},{currentColor:n})})).handleAction(I,(function(e,t){var n=t.payload.brushType;return Object(o.a)(Object(o.a)({},e),{},{brushType:n})})).handleAction(D,(function(e,t){var n=t.payload.mode;return Object(o.a)(Object(o.a)({},e),{},{mode:n})})).handleAction(B,(function(e,t){var n=t.payload.fullscreen;return Object(o.a)(Object(o.a)({},e),{},{fullscreen:n})})).handleAction(F,(function(e,t){var n=t.payload.width;return Object(o.a)(Object(o.a)({},e),{},{width:n})})).handleAction(R,(function(e,t){var n=t.payload.height;return Object(o.a)(Object(o.a)({},e),{},{height:n})})).handleAction(L,(function(e,t){var n=t.payload.answers;return Object(o.a)(Object(o.a)({},e),{},{answers:n})})).handleAction(M,(function(e,t){var n=t.payload.usedAnswers;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:n})})).handleAction(z,(function(e,t){var n=t.payload.usedAnswer;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:[].concat(Object(A.a)(e.usedAnswers),[n])})})).handleAction(P,(function(e,t){var n=t.payload.usedAnswer;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:e.usedAnswers.filter((function(e){return e!==n}))})})),W=H,J=window,V=J.fabric,G=window,U=G.fabric,K=function(e,t,n){var a='<svg xmlns="http://www.w3.org/2000/svg" \n      width="'.concat(t,'" \n      height="').concat(n,'"\n      style="overflow: visible;">\n      <foreignObject width="100%" height="100%">\n        ').concat(e,"\n      </foreignObject>\n    </svg>"),r=window.URL||window.webkitURL||window,c=new Blob([a],{type:"image/svg+xml"});return r.createObjectURL(c)},X=function(e,t){return'<span \n                      xmlns="http://www.w3.org/1999/xhtml"\n                      style="display: inline-block; \n                             width: '.concat(e.width>0?e.width+"px":"auto",";\n                             line-height: 2; \n                             color: ").concat(e.fill||"black",";\n                             font-size: ").concat(e.fontSize?e.fontSize+"px":"initial","; \n                             font-family: ").concat(e.fontFamily||"Arial",';"\n                    > \n\n                      ').concat(t,"\n                    </span>")},q=function(e){document.getElementsByTagName("body")[0].append();var t=document.createElement("div");t.id="alisketch-svg-answer",t.innerHTML=e,document.body.appendChild(t);var n=t.getElementsByTagName("span")[0].getBoundingClientRect();return t.remove(),{width:Math.ceil(n.width),height:Math.ceil(n.height)}},Y=window.fabric,Z=function(e,t){e&&(Y.Object.prototype.cornerStyle=g,Y.Object.prototype.cornerSize=p,e.selectionColor=j,e.selectionBorderColor=m,e.selectionLineWidth=v,e.setBackgroundColor("white",e.renderAll.bind(e),{erasable:!1}),V.util.trimCanvas=function(e){for(var t=e.getContext("2d"),n=e.width,a=e.height,r=[],c=[],i=t.getImageData(0,0,n,a),s=function(e,t){return e-t},o=0;o<a;o++)for(var l=0;l<n;l++)0<i.data[4*(o*n+l)+3]&&(r.push(l),c.push(o));return r.sort(s),c.sort(s),n=r[a=r.length-1]-r[0],a=c[a]-c[0],i=t.getImageData(r[0],c[0],n,a),e.width=n,e.height=a,t.putImageData(i,0,0),{x:r[0],y:c[0]}},V.Point.prototype.normalize=function(e){null!==e&&void 0!==e||(e=1);var t=this.distanceFrom({x:0,y:0});return 0<t&&(this.x=this.x/t*e,this.y=this.y/t*e),this},V.BaseBrush.prototype.convertToImg=function(){var e=this.canvas.getZoom(),t=this.canvas.getRetinaScaling(),n=V.util.copyCanvasElement(this.canvas.upperCanvasEl),a=V.util.trimCanvas(n);(n=new V.Image(n,{left:a.x/t/e,top:a.y/t/e,scaleX:1/t/e,scaleY:1/t/e})).crossOrigin="Anonymous",this.canvas.add(n),this.canvas.clearContext(this.canvas.contextTop)},V.util.getRandom=function(e,t){return t=t||0,Math.random()*((e||1)-t)+t},V.util.clamp=function(e,t,n){return"number"!==typeof n&&(n=0),e>t?t:e<n?n:e},V.CrayonBrush=V.util.createClass(V.BaseBrush,{color:"#000",opacity:.6,width:1,_baseWidth:1,_inkAmount:10,_latestStrokeLength:0,_point:null,_sep:5,_size:0,_latest:null,_drawn:!1,initialize:function(e,t){t=t||{},this.canvas=e,this.width=t.width||e.freeDrawingBrush.width,this.color=t.color||e.freeDrawingBrush.color,this.opacity=t.opacity||e.contextTop.globalAlpha,this._point=new V.Point(0,0)},onMouseDown:function(e){this.canvas.contextTop.globalAlpha=this.opacity,this._size=this.width/2+this._baseWidth,this._drawn=!1,this.set(e)},onMouseMove:function(e){this.update(e),this.draw(this.canvas.contextTop)},onMouseUp:function(){this._drawn&&this.convertToImg(),this._latest=null,this._latestStrokeLength=0,this.canvas.contextTop.globalAlpha=1},set:function(e){this._latest?this._latest.setFromPoint(this._point):this._latest=new V.Point(e.x,e.y),V.Point.prototype.setFromPoint.call(this._point,e)},update:function(e){this.set(e),this._latestStrokeLength=this._point.subtract(this._latest).distanceFrom({x:0,y:0})},draw:function(e){var t,n=this.canvas.getZoom(),a=this._point.subtract(this._latest),r=Math.ceil(this._size/2),c=Math.floor(a.distanceFrom({x:0,y:0})/r)+1;a.normalize(r);var i=this._sep*V.util.clamp(this._inkAmount/this._latestStrokeLength*3,1,.5),s=Math.ceil(this._size*this._sep),o=this._size/2;for(e.save(),e.fillStyle=this.color,e.beginPath(),r=0;r<s;r++)for(t=0;t<c;t++){var l=this._latest.add(a.multiply(t)),u=V.util.getRandom(o),d=V.util.getRandom(2*Math.PI),h=V.util.getRandom(i,i/2),f=V.util.getRandom(i,i/2),b=l.x+u*Math.sin(d)-h/2;l=l.y+u*Math.cos(d)-f/2,e.rect(b*n,l*n,h,f)}e.fill(),e.restore(),this._drawn=!0},_render:function(){}}),U.AnswerImage=U.util.createClass(U.Image,{type:"answerImage",initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=new Image;a.src=e,this.callSuper("initialize",a,Object(o.a)(Object(o.a)(Object(o.a)({},t),{},{erasable:!1,width:0,height:0},0===t.width?{scaleX:1}:{scaleX:t.scaleX||t.width/a.width}),0===t.height?{scaleY:1}:{scaleY:t.scaleY||t.height/a.height})),this.set("answerID",t.answerID||""),n&&n(this)},toObject:function(){return Object(o.a)(Object(o.a)({},this.callSuper("toObject")),{},{answerID:this.get("answerID")})},_render:function(e){this.callSuper("_render",e),this.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!0,tr:!0,mtr:!1})}}),U.AnswerImage.fromObject=function(e,t){return new U.AnswerImage(e.src,e,t)},U.AnswerSvg=U.util.createClass(U.Image,{type:"answerSvg",initialize:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=X(n,e),c=q(r),i=c.width,s=c.height,l=new Image;l.src=n.src||K(r,i,s),l.onload=function(){n.src||t.canvas.renderAll()},this.callSuper("initialize",l,Object(o.a)(Object(o.a)({},n),{},{erasable:!1,width:i,height:s},n.src?{src:n.src}:{})),this.set("answerID",n.answerID||""),this.set("html",e),a&&a(this)},toObject:function(){return Object.assign(this.callSuper("toObject"),{fontFamily:this.get("fontFamily"),answerID:this.get("answerID"),html:this.get("html")})},_render:function(e){this.callSuper("_render",e),this.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!0,tr:!0,mtr:!1})}}),U.AnswerSvg.fromObject=function(e,t){return new U.AnswerSvg(e.html,e,t)},U.AnswerTextbox=U.util.createClass(U.Textbox,{type:"answerTextbox",initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(o.a)({editable:!1,fontSize:16,fontFamily:"Arial",fill:"black",left:e.left,top:e.top,answerID:e.answerID},t),"string"!==typeof e&&(e=e.text),e=e.replace(/<br>/g,"\n"),this.callSuper("initialize",e,t),this.setControlsVisibility({bl:!1,br:!1,mb:!1,ml:!0,mr:!0,tl:!1,tr:!1,mtr:!1}),this.lockRotation=!0,this.set("answerID",t.answerID||"")},toObject:function(){return Object.assign(this.callSuper("toObject"),{answerID:this.get("answerID")})}}),U.AnswerTextbox.fromObject=function(e,t,n){return new U.Object._fromObject("AnswerTextbox",e,t,n)},document.addEventListener("keydown",(function(n){if("Backspace"===n.key){var a=e.getActiveObject();a&&!a.isEditing&&Q(e,a,t)}})))},Q=function(e,t,n){t&&"activeSelection"===t.type?t.forEachObject((function(t){e.remove(t),t.answerID&&n(P({usedAnswer:t.answerID}))})):(e.remove(t),t.answerID&&n(P({usedAnswer:t.answerID}))),e.discardActiveObject().requestRenderAll()},$=function(e,t){var n=e.getActiveObject();n&&("activeSelection"===n.type||"group"===n.type?n.forEachObject((function(e){ee(e,t)})):ee(n,t),e.renderAll())},ee=function(e,t){"path"!==e.type&&"line"!==e.type||e.shadow||"marker"===e.brushType||e.set({stroke:t}),"path"===e.type&&"marker"===e.brushType&&e.set({stroke:x(t,20)}),("rect"===e.type||"circle"===e.type||"ellipse"===e.type||"triangle"===e.type||"text"===e.type||"i-text"===e.type||e.fromSVG)&&e.set({fill:t}),"path"===e.type&&e.shadow&&e.set({shadow:Object(o.a)(Object(o.a)({},e.shadow),{},{color:t})}),"image"===e.type&&(e.filters[0]=new Y.Image.filters.BlendColor({color:t,mode:"tint"}),e.applyFilters())},te=n.p+"static/media/close.ae19aa75.svg",ne=n(8),ae=n.n(ne),re=n(0),ce=function(e){var t=e.opened,n=e.onClose,a=e.title,r=e.children,c=e.onTransitionEnd;return Object(re.jsxs)("div",{onTransitionEnd:c,className:d()(ae.a.wrapper,Object(s.a)({},ae.a.opened,t)),children:[Object(re.jsxs)("div",{className:ae.a.header,children:[Object(re.jsx)("div",{className:ae.a.title,children:a}),Object(re.jsx)(oe,{onClick:n,className:ae.a.close,children:Object(re.jsx)("img",{src:te,alt:""})})]}),r]})},ie=n(15),se=n.n(ie),oe=function(e){var t,n=e.children,a=e.onClick,r=e.className,c=e.style,i=e.active,o=void 0!==i&&i,l=e.disabled,u=void 0!==l&&l;return Object(re.jsx)("button",{disabled:u,onClick:a,className:d()(se.a.wrapper,r,(t={},Object(s.a)(t,se.a.active,o),Object(s.a)(t,se.a.disabled,u),t)),style:c,children:n})},le=n(24),ue=n.n(le),de=function(e){var t=e.children,n=e.onChange,a=e.value,r=e.className,c=e.style;return Object(re.jsx)("select",{value:a,onChange:n,className:d()(ue.a.wrapper,r),style:c,children:t})},he=window.fabric,fe=function(e,t,n){var a=e.getContext().getImageData(Math.round((t+e.viewportTransform[4])*he.devicePixelRatio*e.getZoom()),Math.round((n+e.viewportTransform[5])*he.devicePixelRatio*e.getZoom()),1,1).data;return C(a[0],a[1],a[2])},be=n.p+"static/media/dropper.69cb0ffd.svg",pe=n(21),ge=n.n(pe),je=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useState({top:460,left:260}),h=Object(l.a)(d,2),f=h[0],b=h[1],p=r.a.useContext(S),g=p.canvas,j=p.dispatch,m=function(e){var t=fe(g,e.pointer.x,e.pointer.y);b({top:e.pointer.y-10,left:e.pointer.x+20}),u(t)},v=function(){a(!1),g.off("mouse:down",w),g.off("mouse:move",m),function(e){e.selection=!0,e.getObjects().forEach((function(e){e.set("selectable",!0),e.hoverCursor="move"}))}(g)},w=function(e){v();var t=fe(g,e.pointer.x,e.pointer.y);j(N({currentColor:t}))};return Object(re.jsxs)(re.Fragment,{children:[n&&Object(re.jsx)("div",{className:ge.a.colorView,style:Object(o.a)({backgroundColor:s},f)}),Object(re.jsx)(oe,{active:n,onClick:function(){n?v():(a(!0),function(e){e.selection=!1,e.getObjects().forEach((function(e){e.set("selectable",!1),e.hoverCursor="default"}))}(g),j(D({mode:"hand"})),g.on("mouse:down",w),g.on("mouse:move",m))},className:ge.a.wrapper,children:Object(re.jsx)("img",{src:be,alt:""})})]})},me=n(16),ve=n.n(me),we=function(){var e=r.a.useState(["",""]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S),i=c.state,s=c.dispatch,o=i.currentColor;r.a.useEffect((function(){a((function(e){return[o,e[0]]}))}),[o]);var u=function(e){s(N({currentColor:e}))};return Object(re.jsxs)("div",{className:ve.a.wrapper,children:[Object(re.jsx)("button",{className:ve.a.color,style:{backgroundColor:n[0]},onClick:function(){return u(n[0])}}),Object(re.jsx)("button",{className:ve.a.color,style:{backgroundColor:n[1]||"white"},onClick:function(){return u(n[1]||"white")}})]})},Oe=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#fff","#000"],xe=function(e,t){if(e){var n=e.getContext("2d");if(n){var a=n.getImageData(t,10,1,1).data;return C(a[0],a[1],a[2])}}return"#000"},_e=function(e,t,n){var a=t-e.getBoundingClientRect().left;return a<0?0:a>n?n:a},ye=n(22),Ce=n.n(ye),Se=function(e){var t=e.width,n=e.height,a=e.onChange,c=r.a.useState(w),i=Object(l.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),d=Object(l.a)(u,2),h=d[0],f=d[1],b=r.a.useState(0),p=Object(l.a)(b,2),g=p[0],j=p[1],m=r.a.useRef(null),v=r.a.useRef(null);r.a.useEffect((function(){!function(e,t,n){if(e){var a=e.getContext("2d");if(a){var r=a.createLinearGradient(0,0,t,0);Oe.forEach((function(e,t){t<Oe.length-1?r.addColorStop(t/(Oe.length-1),e):r.addColorStop(1,e)})),a.fillStyle=r,a.fillRect(0,0,t,n)}}}(m.current,t,n),o(xe(m.current,g))}),[n,g,t]),r.a.useEffect((function(){o(xe(m.current,g))}),[g]);return Object(re.jsxs)("div",{ref:v,onMouseMove:function(e){h&&v.current&&j(_e(v.current,e.clientX,t))},onMouseLeave:function(e){h&&(f(!1),"function"===typeof a&&a(s))},className:Ce.a.wrapper,style:{width:t,height:n},children:[Object(re.jsx)("canvas",{ref:m,onMouseDown:function(e){f(!0),v.current&&j(_e(v.current,e.clientX,t))},width:t,height:n}),Object(re.jsx)("button",{onMouseDown:function(){return f(!0)},onMouseUp:function(){f(!1),"function"===typeof a&&a(s)},className:Ce.a.pointer,style:{left:g,backgroundColor:s}})]})},Ae=n(25),ke=n.n(Ae),Te=function(){var e=r.a.useContext(S),t=e.canvas,n=e.dispatch,a=e.state.currentColor;r.a.useEffect((function(){$(t,a)}),[a,t]);return Object(re.jsxs)("div",{className:ke.a.pickerWrapper,children:[Object(re.jsx)(je,{}),Object(re.jsx)(Se,{width:430,height:24,onChange:function(e){n(N({currentColor:e}))}}),Object(re.jsx)(we,{})]})},Ee=n(26),Ne=[{type:"eraser",icon:n.p+"static/media/brush1.4bb3634c.svg"},{type:"marker",icon:n.p+"static/media/brush2.bd74d5cf.svg"},{type:"magic",icon:n.p+"static/media/brush3.38a28f48.svg"},{type:"pencil",icon:n.p+"static/media/brush4.4c238ed7.svg"},{type:"pen",icon:n.p+"static/media/brush5.b0040eae.svg"}],De={eraser:{min:1,max:90},marker:{min:20,max:90},magic:{min:10,max:60},pencil:{min:1,max:60},pen:{min:5,max:20}},Ie=n.p+"static/media/highlight.a5e0d7ce.svg",Be=window.fabric,Fe=n(7),Re=n.n(Fe),Le=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),u=i[0],h=i[1],f=r.a.useState(10),b=Object(l.a)(f,2),p=b[0],g=b[1],j=r.a.useContext(S),m=j.state,v=j.canvas,w=j.dispatch,O=m.currentColor,_=m.mode;r.a.useEffect((function(){var e=function(e){e.path.brushType=u,"eraser"===u&&v.fire("object:erased")};return v.on("path:created",e),v.isDrawingMode="drawing"===_,"drawing"!==_&&h(""),function(){v.off("path:created",e)}}),[_,v,u]),r.a.useEffect((function(){!function(e,t,n,a){"marker"!==t&&"magic"!==t&&"pencil"!==t||(e.freeDrawingBrush=new Be.PencilBrush(e)),"eraser"===t?e.freeDrawingBrush=new Be.EraserBrush(e):e.freeDrawingBrush.color=a,"pen"===t&&(e.freeDrawingBrush=new Be.CrayonBrush(e)),"marker"===t&&(e.freeDrawingBrush.color=x(a,20)),"magic"===t&&(e.freeDrawingBrush.color="#fff",e.freeDrawingBrush.shadow=new Be.Shadow({blur:30,affectStroke:!0,color:a})),e.freeDrawingBrush.width=n}(v,u,p,O),u&&p<De[u].min&&g(De[u].min),u&&p>De[u].max&&g(De[u].max)}),[u,v,p,O]);return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{active:"drawing"===_,onClick:function(){return a(!0)},children:Object(re.jsx)("img",{src:Ie,alt:""})}),Object(re.jsx)(ce,{title:"Brushes",opened:n,onClose:function(){return a(!1)},children:Object(re.jsxs)("div",{className:Re.a.panel,children:[Object(re.jsxs)("div",{className:Re.a.brushSize,children:[Object(re.jsxs)("div",{className:Re.a.exampleWrapper,children:["marker"===u&&Object(re.jsx)("span",{className:Re.a.exampleText,children:"text"}),Object(re.jsx)("div",{className:Re.a.example,style:{width:p,height:p,border:"eraser"===u?"1px solid #c3d0e4":"none",backgroundColor:"magic"!==u&&"eraser"!==u?O:"white",opacity:"marker"===u?.2:1,boxShadow:"magic"===u?"0 0 30px ".concat(O):"none"}})]}),Object(re.jsx)(Ee.a,{className:Re.a.slider,orientation:"vertical",value:p,renderThumb:function(e,t){return Object(re.jsx)("div",Object(o.a)(Object(o.a)({},e),{},{className:Re.a.thumb,children:Object(re.jsx)("div",{className:Re.a.value,children:t.valueNow})}))},invert:!0,min:u?De[u].min:1,max:u?De[u].max:60,onChange:function(e){g(e)}})]}),Object(re.jsx)("div",{className:Re.a.brushes,children:Ne.map((function(e){return Object(re.jsx)("button",{onClick:function(){return t=e.type,w(D({mode:"drawing"})),void h(t);var t},className:d()(Re.a.brush,Object(s.a)({},Re.a.active,u===e.type)),children:Object(re.jsx)("img",{src:e.icon,alt:""})},e.type)}))})]})})]})},Me=n.p+"static/media/hand.cf210679.svg",ze=function(){var e=r.a.useContext(S),t=e.state,n=e.dispatch;return Object(re.jsx)(oe,{onClick:function(){n(D({mode:"hand"}))},active:"hand"===t.mode,children:Object(re.jsx)("img",{src:Me,alt:""})})},Pe=n.p+"static/media/star.10d3d0dd.svg",He=n.p+"static/media/circle.1be35666.svg",We=n.p+"static/media/circle-outlined.55858944.svg",Je=n.p+"static/media/rectangle.06a5077b.svg",Ve=n.p+"static/media/rectangle-outlined.f492c7dd.svg",Ge=n.p+"static/media/star.9acb5ada.svg",Ue=n.p+"static/media/star-outlined.0daaff4a.svg",Ke=n.p+"static/media/triangle.fbe306e2.svg",Xe=n.p+"static/media/triangle-outlined.a25dd2aa.svg",qe=n.p+"static/media/arrow-down.66902268.svg",Ye=n.p+"static/media/arrow-up.c13fee86.svg",Ze=n.p+"static/media/arrow-left.6c52d128.svg",Qe=[{title:"circle",src:He},{title:"circleOutlined",src:We},{title:"rectangle",src:Je},{title:"rectangleOutlined",src:Ve},{title:"star",src:Ge},{title:"starOutlined",src:Ue},{title:"triangle",src:Ke},{title:"triangleOutlined",src:Xe},{title:"arrowDown",src:qe},{title:"arrowRight",src:n.p+"static/media/arrow-right.545fd979.svg"},{title:"arrowLeft",src:Ze},{title:"arrowUp",src:Ye},{title:"thunderOutlined",src:n.p+"static/media/thunder-outlined.96c0359a.svg"},{title:"thunder",src:n.p+"static/media/thunder.ddcd8d6d.svg"},{title:"cloudOutlined",src:n.p+"static/media/cloud-outlined.c144d388.svg"},{title:"cloud",src:n.p+"static/media/cloud.eda4a7bc.svg"}],$e=n.p+"static/media/apple.e096d285.svg",et=n.p+"static/media/grape.603d86e2.svg",tt=n.p+"static/media/lemon.e505d6e4.svg",nt=n.p+"static/media/peach.5acec3d9.svg",at=[{title:"lemon",src:tt},{title:"apple",src:$e},{title:"grape",src:et},{title:"strawberry",src:n.p+"static/media/strawberry.8825d787.svg"},{title:"peach",src:nt},{title:"watermelon",src:n.p+"static/media/watermelon.339708ac.svg"}],rt=window.fabric,ct=n(17),it=n.n(ct),st={shapes:Qe,fruits:at},ot=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState("shapes"),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useContext(S),h=d.canvas,f=d.dispatch,b=function(e){f(D({mode:"hand"})),function(e,t,n){var a=y();rt.loadSVGFromURL(t,(function(t,r){var c=rt.util.groupSVGElements(t,r);c.set(Object(o.a)(Object(o.a)({},a),"shapes"!==n?{fromImgShape:!0}:{})),c.scaleToWidth(90),e.add(c),e.setActiveObject(c),e.renderAll()}))}(h,e,s)};return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{onClick:function(){return a(!0)},children:Object(re.jsx)("img",{src:Pe,alt:""})}),Object(re.jsxs)(ce,{title:"Image Library",opened:n,onClose:function(){return a(!1)},children:[Object(re.jsxs)(de,{className:it.a.select,onChange:function(e){return u(e.target.value)},children:[Object(re.jsx)("option",{value:"shapes",children:"Shapes"}),Object(re.jsx)("option",{value:"fruits",children:"Fruits"})]}),Object(re.jsx)("div",{className:it.a.shapeList,children:st[s].map((function(e){return Object(re.jsx)("button",{onClick:function(){return b(e.src)},className:it.a.shape,children:Object(re.jsx)("img",{src:e.src,alt:""})},e.title)}))})]})]})},lt=n.p+"static/media/text.fc450231.svg",ut=window.fabric,dt=function(){var e=r.a.useContext(S),t=e.state,n=e.canvas,a=e.dispatch,c=t.currentColor;return Object(re.jsx)(oe,{onClick:function(){!function(e,t){var n=y(),a=new ut.IText("",Object(o.a)(Object(o.a)({},n),{},{fontSize:28,lineHeight:.95,fill:t,fontFamily:"Tahoma",cursorColor:"black",textAlign:"center"}));e.add(a),e.setActiveObject(a),a.enterEditing(),e.renderAll()}(n,c),a(D({mode:"hand"}))},children:Object(re.jsx)("img",{src:lt,alt:""})})},ht=[n.p+"static/media/bg1.981d1d53.svg",n.p+"static/media/bg2.402b432f.svg",n.p+"static/media/bg3.782e88f7.svg"],ft=["white","black","#3cb5ff","#bce8f1","#f4e796","#c1beec"],bt=n.p+"static/media/picture.b59a650c.svg",pt=n(11),gt=n.n(pt),jt=window.fabric,mt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S),i=c.canvas,s=c.state,o=s.width,u=s.height;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{onClick:function(){return a(!0)},children:Object(re.jsx)("img",{src:bt,alt:""})}),Object(re.jsxs)(ce,{title:"Background",opened:n,onClose:function(){return a(!1)},children:[Object(re.jsx)("div",{className:gt.a.backgroundList,children:ht.map((function(e){return Object(re.jsx)("button",{onClick:function(){return t=e,void jt.Image.fromURL(t,(function(e){i.setBackgroundImage(e,i.renderAll.bind(i),{scaleX:o/e.width,scaleY:u/e.height,erasable:!1})}));var t},className:gt.a.background,children:Object(re.jsx)("img",{src:e,alt:""})},e)}))}),Object(re.jsx)("div",{className:gt.a.backgroundList,children:ft.map((function(e){return Object(re.jsx)("button",{onClick:function(){return function(e){i.setBackgroundImage(new jt.Image(""),i.renderAll.bind(i)),i.setBackgroundColor(e,i.renderAll.bind(i),{erasable:!1})}(e)},className:gt.a.backgroundColor,style:{backgroundColor:e}},e)}))})]})]})},vt=n.p+"static/media/char.7bb36b6f.svg",wt=["\u2264","\u2265","\xd7","\xf7","\xb0","\u2192"],Ot=n(23),xt=n.n(Ot),_t=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;return Object(re.jsxs)(re.Fragment,{children:[n&&Object(re.jsx)("div",{className:xt.a.charList,children:wt.map((function(e){return Object(re.jsx)(oe,{onClick:function(){return function(e,t){var n=e.getActiveObject();if(n&&"i-text"===n.type&&n.isEditing){var a=n.selectionStart,r=n.selectionEnd;n.insertChars(t,null,a,r),n.selectionStart=a+1,n.selectionEnd=a+1,e.renderAll()}}(c,e)},className:xt.a.char,children:e},e)}))}),Object(re.jsx)(oe,{active:n,onClick:function(){a(!n)},children:Object(re.jsx)("img",{src:vt,alt:""})})]})},yt=window.fabric,Ct=n.p+"static/media/fraction.f6677d83.svg",St=n(18),At=n.n(St),kt=function(){var e=r.a.useState({numerator:"",denominator:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useContext(S),h=d.canvas,f=d.state,b=r.a.useRef(null),p=f.currentColor;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{children:Object(re.jsx)("img",{src:Ct,alt:"",onClick:function(){u(!0)}})}),Object(re.jsx)(ce,{title:"Insert Fraction",opened:s,onClose:function(){u(!1),a({numerator:"",denominator:""})},onTransitionEnd:function(){var e;s&&(null===(e=b.current)||void 0===e||e.focus())},children:Object(re.jsxs)("div",{className:At.a.wrapper,children:[Object(re.jsx)("input",{ref:b,value:n.numerator,style:{color:p},onChange:function(e){return a(Object(o.a)(Object(o.a)({},n),{},{numerator:e.target.value}))}}),Object(re.jsx)("div",{className:At.a.separator,style:{backgroundColor:p}}),Object(re.jsx)("input",{value:n.denominator,style:{color:p},onChange:function(e){return a(Object(o.a)(Object(o.a)({},n),{},{denominator:e.target.value}))}}),Object(re.jsx)(oe,{onClick:function(){!function(e,t,n,a){if(n&&a){var r=12*(n.length>a.length?n.length:a.length),c=y(),i='<svg viewBox="0 0 '.concat(r,' 85">\n            <line x1="0" y1="45" x2="').concat(r,'" y2="45" stroke="').concat(t,'" stroke-width="2" />\n            <text text-anchor="middle" x="').concat(r/2,'" y="38" font-size="24px" fill="').concat(t,'">').concat(n,'</text>\n            <text text-anchor="middle" x="').concat(r/2,'" y="70" font-size="24px" fill="').concat(t,'">').concat(a,"</text>\n        </svg>");yt.loadSVGFromString(i,(function(t,n){var a=yt.util.groupSVGElements(t,n);a.set(Object(o.a)({},c)),e.add(a),e.setActiveObject(a),e.renderAll()}))}}(h,p,n.numerator,n.denominator)},className:At.a.insertButton,children:"Insert"})]})})]})},Tt=n(27),Et=n.n(Tt),Nt=function(){return Object(re.jsxs)("div",{className:Et.a.wrapper,children:[Object(re.jsx)(ze,{}),Object(re.jsx)(Le,{}),Object(re.jsx)(dt,{}),Object(re.jsx)(_t,{}),Object(re.jsx)(kt,{}),Object(re.jsx)(mt,{}),Object(re.jsx)(ot,{})]})},Dt=function(e,t,n,a){var r={},c=(null===t||void 0===t?void 0:t.objects)||[],i=n.objects;i.length>c.length&&(r.actionType="added",r.object=i.filter((function(e){return!c.find((function(t){return JSON.stringify(t)===JSON.stringify(e)}))}))[0]),i.length<c.length&&(r.actionType="removed",r.object=c.filter((function(e){return!i.find((function(t){return JSON.stringify(e)===JSON.stringify(t)}))}))[0]),i.length===c.length&&(r.actionType="modified",i.forEach((function(e,t){JSON.stringify(e)!==JSON.stringify(c[t])&&(r.object=e)}))),0===i.length&&(r.actionType="removed",r.object=c[0]),e.fire("history:".concat(a),r)},It=n.p+"static/media/undo.c0720610.svg",Bt=n.p+"static/media/redo.cfafd4e4.svg",Ft=function(){var e=r.a.useRef(!0),t=r.a.useContext(S).canvas,n=r.a.useState([t.toJSON()]),a=Object(l.a)(n,2),c=a[0],i=a[1],s=r.a.useState(0),o=Object(l.a)(s,2),u=o[0],d=o[1];r.a.useEffect((function(){t.on("mouse:down",(function(){e.current=!1})),t.on("mouse:up",(function(){e.current=!0}))}),[t]),r.a.useEffect((function(){var n=function(){e.current&&(!function(e,t,n,a,r){n<t.length-1?(a([].concat(Object(A.a)(t.slice(0,n+1)),[e.toJSON()])),r(n+1)):JSON.stringify(e.toJSON())!==JSON.stringify(t[t.length-1])&&(a([].concat(Object(A.a)(t),[e.toJSON()])),r(n+1))}(t,c,u,i,d),t.fire("state:changed",t.toJSON()))};return t.on("after:render",n),function(){t.off("after:render",n)}}),[t,c,d,u]);return r.a.useEffect((function(){console.log(c)}),[c]),Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{disabled:0===u,onClick:function(){e.current=!1,t.loadFromJSON(c[u-1],(function(){d(u-1),t.renderAll(),Dt(t,c[u],c[u-1],"undo"),e.current=!0}))},children:Object(re.jsx)("img",{src:It,alt:""})}),Object(re.jsx)(oe,{disabled:u===c.length-1,onClick:function(){e.current=!1,t.loadFromJSON(c[u+1],(function(){d(u+1),t.renderAll(),Dt(t,c[u],c[u+1],"redo"),e.current=!0}))},children:Object(re.jsx)("img",{src:Bt,alt:""})})]})},Rt=n.p+"static/media/fullscreen.24771eb9.svg",Lt=n.p+"static/media/minimize.43572175.svg",Mt=function(){var e=r.a.useContext(S),t=e.canvas,n=e.state,a=e.dispatch,c=n.fullscreen,i=n.width,s=n.height;return Object(re.jsx)(oe,{active:c,onClick:function(){t.setDimensions(Object(o.a)({},c?{width:i,height:s}:{width:window.innerWidth,height:window.innerHeight}));var e=window.innerWidth/i;t.setZoom(c?1:e),a(B({fullscreen:!c}))},children:Object(re.jsx)("img",{src:c?Lt:Rt,alt:""})})},zt=n(28),Pt=n.n(zt),Ht=function(){return Object(re.jsxs)("div",{className:Pt.a.wrapper,children:[Object(re.jsx)(Mt,{}),Object(re.jsx)(Ft,{})]})},Wt=function(e,t){var n=e.getCenterPoint(),a=t.getZoom(),r=t.getHeight(),c=(15+n.y+e.height*e.scaleY/2)*a;return c+30>r&&(c=(n.y-95-e.height*e.scaleY/2)*a),{top:c,left:n.x*a}},Jt=function(){var e=r.a.useContext(S),t=e.canvas,n=e.state.currentColor;return Object(re.jsx)(oe,{onClick:function(){$(t,n)},style:{backgroundColor:n}})},Vt=n.p+"static/media/delete.c022e131.svg",Gt=function(){var e=r.a.useContext(S),t=e.canvas,n=e.dispatch;return Object(re.jsx)(oe,{onClick:function(){var e=t.getActiveObject();Q(t,e,n)},children:Object(re.jsx)("img",{src:Vt,alt:""})})},Ut=n.p+"static/media/copy.15beb7fb.svg",Kt=function(){var e=r.a.useContext(S).canvas;return Object(re.jsx)(oe,{onClick:function(){var t=e.getActiveObject();t.clone((function(n){e.discardActiveObject(),n.set(Object(o.a)(Object(o.a)(Object(o.a)({top:n.top+8,left:n.left+8},t.fromSVG?{fromSVG:!0}:{}),t.fromImgShape?{fromImgShape:!0}:{}),t.brushType?{brushType:t.brushType}:{})),"activeSelection"===n.type?(n.canvas=e,n.forEachObject((function(n,a){var r=t.getObjects()[a];r.fromSVG&&n.set({fromSVG:!0}),r.brushType&&n.set({brushType:r.brushType}),r.fromImgShape&&n.set({fromImgShape:!0}),e.add(n)}))):e.add(n),e.setActiveObject(n),e.requestRenderAll()}))},children:Object(re.jsx)("img",{src:Ut,alt:""})})},Xt=n.p+"static/media/bold.a0908168.svg",qt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;r.a.useEffect((function(){"bold"===c.getActiveObject().fontWeight&&a(!0)}),[c]);return Object(re.jsx)(oe,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({fontWeight:"normal"}),a(!1)):(e.set({fontWeight:"bold"}),a(!0)),c.renderAll()},children:Object(re.jsx)("img",{src:Xt,alt:""})})},Yt=n.p+"static/media/italic.cf5cd34d.svg",Zt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;r.a.useEffect((function(){"italic"===c.getActiveObject().fontStyle&&a(!0)}),[c]);return Object(re.jsx)(oe,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({fontStyle:"normal"}),a(!1)):(e.set({fontStyle:"italic"}),a(!0)),c.renderAll()},children:Object(re.jsx)("img",{src:Yt,alt:""})})},Qt=n.p+"static/media/underline.c56bb0d2.svg",$t=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;r.a.useEffect((function(){c.getActiveObject().underline&&a(!0)}),[c]);return Object(re.jsx)(oe,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({underline:!1}),a(!1)):(e.set({underline:!0}),a(!0)),c.renderAll()},children:Object(re.jsx)("img",{src:Qt,alt:""})})},en=n.p+"static/media/align-left.277ba860.svg",tn=n.p+"static/media/align-center.32449acd.svg",nn=n.p+"static/media/align-right.f9735e6a.svg",an=function(){var e=r.a.useState("center"),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;r.a.useEffect((function(){a(c.getActiveObject().textAlign)}),[c]);var i=function(e){a(e),c.getActiveObject().set({textAlign:e}),c.renderAll()};return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(oe,{active:"left"===n,onClick:function(){return i("left")},children:Object(re.jsx)("img",{src:en,alt:""})}),Object(re.jsx)(oe,{active:"center"===n,onClick:function(){return i("center")},children:Object(re.jsx)("img",{src:tn,alt:""})}),Object(re.jsx)(oe,{active:"right"===n,onClick:function(){return i("right")},children:Object(re.jsx)("img",{src:nn,alt:""})})]})},rn=["Arial","Comic Sans MS","Courier New","Georgia","Tahoma","Times New Roman","Verdana"],cn=n(29),sn=n.n(cn),on=function(){var e=r.a.useState(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(S).canvas;r.a.useEffect((function(){a(c.getActiveObject().fontFamily)}),[c]);return Object(re.jsx)(de,{onChange:function(e){a(e.target.value),c.getActiveObject().set({fontFamily:e.target.value}),c.renderAll()},value:n,className:sn.a.wrapper,children:rn.map((function(e){return Object(re.jsx)("option",{value:e,children:e},e)}))})},ln=n(19),un=n.n(ln),dn=function(){var e,t=r.a.useState(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!1),u=Object(l.a)(i,2),h=u[0],f=u[1],b=r.a.useState(""),p=Object(l.a)(b,2),g=p[0],j=p[1],m=r.a.useState({top:0,left:0}),v=Object(l.a)(m,2),w=v[0],O=v[1],x=r.a.useContext(S),_=x.canvas,y=x.state.fullscreen,C=!h&&"answerTextbox"!==g&&"answerImage"!==g&&"answerSvg"!==g,A="answerTextbox"!==g&&"answerImage"!==g&&"answerSvg"!==g;return r.a.useEffect((function(){_.getActiveObject()&&O(Wt(_.getActiveObject(),_))}),[y,_]),r.a.useEffect((function(){var e=function(e){O(Wt(e.transform.target,_))},t=function(t){var n=t.target;n&&(j(n.type),c(!0),O(Wt(n,_)),n.on("moving",e),n.on("scaling",e),n.fromImgShape&&f(!0),"i-text"===n.type&&n.on("changed",(function(){O(Wt(n,_))})))};_.on("selection:created",t),_.on("selection:updated",t),_.on("selection:cleared",(function(t){c(!1),f(!1),t.deselected&&(t.deselected[0].off("moving",e),t.deselected[0].off("scaling",e),"i-text"===t.deselected[0].type&&(_.defaultCursor="default",t.deselected[0].off("changed"),function(e,t){""===t.text&&(e.remove(t),e.renderAll())}(_,t.deselected[0])))}))}),[_]),Object(re.jsx)(re.Fragment,{children:a&&Object(re.jsxs)("div",{style:Object(o.a)({},w),className:d()(un.a.wrapper,(e={},Object(s.a)(e,un.a.withColorApply,C),Object(s.a)(e,un.a.withoutCopy,!A),e)),children:[C&&Object(re.jsx)(Jt,{}),Object(re.jsx)(Gt,{}),A&&Object(re.jsx)(Kt,{}),"i-text"===g&&Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(qt,{}),Object(re.jsx)(Zt,{}),Object(re.jsx)($t,{}),Object(re.jsx)(an,{}),Object(re.jsx)(on,{})]})]})})},hn=n(30),fn=n.n(hn),bn=function(e){var t=e.answer,n={};t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px")),"textbox"===t.type&&(t.options.fontSize&&(n.fontSize="".concat(t.options.fontSize,"px")),t.options.fontFamily&&(n.fontFamily=t.options.fontFamily),t.options.fill&&(n.color=t.options.fill));return Object(re.jsx)("div",{draggable:!0,style:n,onDragStart:function(e){var n=e.target.getBoundingClientRect();e.dataTransfer.setData("data",JSON.stringify(Object(o.a)(Object(o.a)({},t),{offsetLeft:e.clientX-n.left,offsetTop:e.clientY-n.top})))},className:fn.a.answer,children:"image"===t.type?Object(re.jsx)("img",{src:t.value,width:t.width,height:t.height,alt:""}):Object(re.jsx)("span",{dangerouslySetInnerHTML:{__html:t.value||""}})})},pn=window.fabric,gn=function(e){var t=e.target,n=r.a.useContext(S),a=n.state,c=n.canvas,s=n.dispatch,l=a.answers,u=a.usedAnswers;return r.a.useEffect((function(){var e=function(e){e.e.preventDefault();var t=JSON.parse(e.e.dataTransfer.getData("data"));!function(e,t,n){var a=Object(o.a)(Object(o.a)({},t.options),{},{answerID:t.id,left:n.e.offsetX-t.offsetLeft,top:n.e.offsetY-t.offsetTop}),r=t.type;if("textbox"===r&&/<[a-z][\s\S]*>/i.test(t.value)&&(r="svg"),"textbox"===r){var c=new pn.AnswerTextbox(t.value,a);e.add(c)}if("image"===r){var i=new pn.AnswerImage(t.value,Object(o.a)({},a));e.add(i)}if("svg"===r){var s=new pn.AnswerSvg(t.value,Object(o.a)({},a));e.add(s)}e.renderAll()}(c,t,e),s(z({usedAnswer:t.id}))},t=function(e){var t;(null===(t=e.object)||void 0===t?void 0:t.answerID)&&("added"!==e.actionType||u.includes(e.object.answerID)||s(z({usedAnswer:e.object.answerID})),"removed"===e.actionType&&s(P({usedAnswer:e.object.answerID})))};return c.on("drop",e),c.on("history:undo",t),c.on("history:redo",t),function(){c.off("drop",e),c.off("history:redo",t),c.off("history:undo",t)}}),[c,s,u]),i.a.createPortal(Object(re.jsx)(re.Fragment,{children:l.sort((function(e,t){return e.sort-t.sort})).filter((function(e){return!u.includes("".concat(e.id))})).map((function(e,t){return Object(re.jsx)(bn,{answer:e},e.id||t)}))}),t.current)},jn=n(12),mn=n.n(jn),vn=window.fabric,wn=function(e){var t=e.id,n=e.onChange,a=e.initialValue,c=e.width,i=e.height,u=e.answers,h=r.a.useReducer(W,E),f=Object(l.a)(h,2),b=f[0],p=f[1],g=r.a.useState(!1),j=Object(l.a)(g,2),m=j[0],v=j[1],w=r.a.useRef(t||function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}()),x=r.a.useRef(null),_=r.a.useRef(null),y=b.fullscreen;return r.a.useEffect((function(){if(w.current){if(x.current=new vn.Canvas(w.current,Object(o.a)(Object(o.a)(Object(o.a)({},O),c?{width:c}:{}),i?{height:i}:{})),Z(x.current,p),v(!0),a){var e=JSON.parse(a);x.current.loadFromJSON(e,(function(){x.current.renderAll()}));var t=e.objects.map((function(e){return e.answerID}));p(M({usedAnswers:t}))}c&&p(F({width:c})),i&&p(R({height:i})),u&&p(L({answers:u})),x.current.on("state:changed",(function(){"function"===typeof n&&n(x.current.toJSON())}))}}),[n,a,c,i,u,p]),Object(re.jsxs)("div",{className:mn.a.wrapper,style:{margin:"0 auto",width:c||O.width,height:i||O.height},children:[Object(re.jsxs)("div",{className:d()(mn.a.canvasWrapper,Object(s.a)({},mn.a.fullscreen,y)),children:[Object(re.jsx)("canvas",{id:w.current}),m&&Object(re.jsxs)(S.Provider,{value:{canvas:x.current,dispatch:p,state:b},children:[Object(re.jsx)(Ht,{}),Object(re.jsx)(Te,{}),Object(re.jsx)(Nt,{}),Object(re.jsx)(dn,{}),Object(re.jsx)(gn,{target:_})]})]}),Object(re.jsx)("div",{ref:_,className:mn.a.answers})]})};i.a.render(Object(re.jsx)(r.a.StrictMode,{children:Object(re.jsx)(wn,{width:800,height:550,answers:[{id:"57518",sort:1,type:"textbox",width:300,height:0,value:"<b>Answer Answer Answer Answer Answer <br /> Answer Answer Answer Answer Answer Answer <br /> Answer Answer Answer Answer Answer Answer Answer Answer <br /> Answer Answer Answer Answer Answer Answer Answer </b>",options:{fontSize:16,fontFamily:"Georgia",fill:"black"}},{id:"57519",sort:1,type:"textbox",width:0,height:0,value:"123123",options:{fontSize:16,fontFamily:"Arial",fill:"black"}},{id:"57520",sort:1,type:"image",width:70,height:70,value:"https://backend25-qa.acceleratelearning.com/system/part_type_graphic_organizer_answer/images/57520/original/pngtree-hand-drawn-little-girl-cartoon-lively-little-girl-cute-little-girl-png-image_491210.jpeg?1628895006",options:{width:70,height:70}}]})}),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.38ce07e4.chunk.js.map