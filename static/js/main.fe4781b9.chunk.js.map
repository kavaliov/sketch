{"version":3,"sources":["sketch/components/right-control-panel/components/drawing/Drawing.module.css","components/panel/Panel.module.css","sketch/components/right-control-panel/components/background/Background.module.css","sketch/Sketch.module.css","components/button/Button.module.css","sketch/components/color-picker-panel/components/color-history/ColorHistory.module.css","sketch/components/right-control-panel/components/figures/Figures.module.css","sketch/components/right-control-panel/components/fraction/Fraction.module.css","sketch/components/color-picker-panel/components/eyedropper/Eyedropper.module.css","sketch/components/color-picker-panel/components/color-picker/ColorPicker.module.css","sketch/components/right-control-panel/components/special-chars/SpecialChars.module.css","sketch/components/object-menu/ObjectMenu.module.css","components/select/Select.module.css","sketch/components/color-picker-panel/ColorPicker.module.css","sketch/components/right-control-panel/RightControlPanel.module.css","sketch/components/left-control-panel/LeftControlPanel.module.css","sketch/components/object-menu/components/font-text/FontText.module.css","sketch/components/answers/components/answer/Answer.module.css","duck/constants.ts","duck/utils.ts","duck/context.ts","duck/state.ts","duck/actions.ts","duck/reducer.ts","legacy/customBrushes.ts","legacy/aliSupport.ts","duck/operations.ts","components/panel/assets/close.svg","components/panel/Panel.tsx","components/button/Button.tsx","components/select/Select.tsx","sketch/components/color-picker-panel/components/eyedropper/duck/utils.ts","sketch/components/color-picker-panel/components/eyedropper/assets/dropper.svg","sketch/components/color-picker-panel/components/eyedropper/Eyedropper.tsx","sketch/components/color-picker-panel/components/color-history/ColorHistory.tsx","sketch/components/color-picker-panel/components/color-picker/duck/constants.ts","sketch/components/color-picker-panel/components/color-picker/duck/operations.ts","sketch/components/color-picker-panel/components/color-picker/duck/utils.ts","sketch/components/color-picker-panel/components/color-picker/ColorPicker.tsx","sketch/components/color-picker-panel/ColorPickerPanel.tsx","sketch/components/right-control-panel/components/drawing/duck/constants.ts","sketch/components/right-control-panel/components/drawing/assets/brush1.svg","sketch/components/right-control-panel/components/drawing/assets/brush2.svg","sketch/components/right-control-panel/components/drawing/assets/brush3.svg","sketch/components/right-control-panel/components/drawing/assets/brush4.svg","sketch/components/right-control-panel/components/drawing/assets/brush5.svg","sketch/components/right-control-panel/components/drawing/assets/highlight.svg","sketch/components/right-control-panel/components/drawing/duck/operations.ts","sketch/components/right-control-panel/components/drawing/Drawing.tsx","sketch/components/right-control-panel/components/hand/assets/hand.svg","sketch/components/right-control-panel/components/hand/Hand.tsx","sketch/components/right-control-panel/components/figures/assets/star.svg","sketch/components/right-control-panel/components/figures/shapes/circle.svg","sketch/components/right-control-panel/components/figures/shapes/circle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/rectangle.svg","sketch/components/right-control-panel/components/figures/shapes/rectangle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/star.svg","sketch/components/right-control-panel/components/figures/shapes/star-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/triangle.svg","sketch/components/right-control-panel/components/figures/shapes/triangle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-down.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-up.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-left.svg","sketch/components/right-control-panel/components/figures/shapes/index.ts","sketch/components/right-control-panel/components/figures/shapes/arrow-right.svg","sketch/components/right-control-panel/components/figures/shapes/thunder-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/thunder.svg","sketch/components/right-control-panel/components/figures/shapes/cloud-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/cloud.svg","sketch/components/right-control-panel/components/figures/fruits/apple.svg","sketch/components/right-control-panel/components/figures/fruits/grape.svg","sketch/components/right-control-panel/components/figures/fruits/lemon.svg","sketch/components/right-control-panel/components/figures/fruits/peach.svg","sketch/components/right-control-panel/components/figures/fruits/index.ts","sketch/components/right-control-panel/components/figures/fruits/strawberry.svg","sketch/components/right-control-panel/components/figures/fruits/watermelon.svg","sketch/components/right-control-panel/components/figures/duck/operations.ts","sketch/components/right-control-panel/components/figures/Figures.tsx","sketch/components/right-control-panel/components/text/assets/text.svg","sketch/components/right-control-panel/components/text/duck/operations.ts","sketch/components/right-control-panel/components/text/Text.tsx","sketch/components/right-control-panel/components/background/assets/index.ts","sketch/components/right-control-panel/components/background/assets/bg1.svg","sketch/components/right-control-panel/components/background/assets/bg2.svg","sketch/components/right-control-panel/components/background/assets/bg3.svg","sketch/components/right-control-panel/components/background/assets/picture.svg","sketch/components/right-control-panel/components/background/Background.tsx","sketch/components/right-control-panel/components/special-chars/assets/char.svg","sketch/components/right-control-panel/components/special-chars/duck/constants.ts","sketch/components/right-control-panel/components/special-chars/SpecialChars.tsx","sketch/components/right-control-panel/components/special-chars/duck/operations.ts","sketch/components/right-control-panel/components/fraction/duck/operations.ts","sketch/components/right-control-panel/components/fraction/assets/fraction.svg","sketch/components/right-control-panel/components/fraction/Fraction.tsx","sketch/components/right-control-panel/RightControlPanel.tsx","sketch/components/left-control-panel/components/undo-redo/duck/operations.ts","sketch/components/left-control-panel/components/undo-redo/duck/constants.ts","sketch/components/left-control-panel/components/undo-redo/assets/undo.svg","sketch/components/left-control-panel/components/undo-redo/assets/redo.svg","sketch/components/left-control-panel/components/undo-redo/UndoRedo.tsx","sketch/components/left-control-panel/components/fullscreen/assets/fullscreen.svg","sketch/components/left-control-panel/components/fullscreen/assets/minimize.svg","sketch/components/left-control-panel/components/fullscreen/Fullscreen.tsx","sketch/components/left-control-panel/LeftControlPanel.tsx","sketch/components/object-menu/duck/utils.ts","sketch/components/object-menu/components/color-apply/ColorApply.tsx","sketch/components/object-menu/components/remove-object/assets/delete.svg","sketch/components/object-menu/components/remove-object/RemoveObject.tsx","sketch/components/object-menu/components/copy/assets/copy.svg","sketch/components/object-menu/components/copy/Copy.tsx","sketch/components/object-menu/components/bold-text/assets/bold.svg","sketch/components/object-menu/components/bold-text/BoldText.tsx","sketch/components/object-menu/components/italic-text/assets/italic.svg","sketch/components/object-menu/components/italic-text/ItalicText.tsx","sketch/components/object-menu/components/underline-text/assets/underline.svg","sketch/components/object-menu/components/underline-text/UnderlineText.tsx","sketch/components/object-menu/components/align-text/assets/align-left.svg","sketch/components/object-menu/components/align-text/assets/align-center.svg","sketch/components/object-menu/components/align-text/assets/align-right.svg","sketch/components/object-menu/components/align-text/AlignText.tsx","sketch/components/object-menu/components/font-text/duck/constants.ts","sketch/components/object-menu/components/font-text/FontText.tsx","sketch/components/object-menu/ObjectMenu.tsx","sketch/components/object-menu/duck/operations.ts","sketch/components/answers/components/answer/Answer.tsx","sketch/components/answers/duck/operations.ts","sketch/components/answers/Answers.tsx","sketch/Sketch.tsx","index.tsx"],"names":["module","exports","FABRIC_SETTINGS","CANVAS_SETTINGS","height","width","backgroundColor","addOpacity","hex","opacity","tempHex","replace","r","parseInt","substring","g","b","randomInt","min","max","Math","floor","random","randomPosition","center","top","left","rgbToHex","toString","slice","AppContext","React","appState","currentColor","mode","brushType","fullscreen","answers","usedAnswers","setCurrentColor","createAction","setMode","setBrush","setFullscreen","setWidth","setHeight","setAnswers","setUsedAnswers","addUsedAnswer","removeUsedAnswer","appReducer","createReducer","initialState","handleAction","actions","state","payload","usedAnswer","filter","answer","window","fabric","getImageUrlFromSvg","html","svgData","domUrl","URL","webkitURL","svg","Blob","type","createObjectURL","setSketchSettings","canvas","dispatch","Object","prototype","cornerStyle","cornerSize","selectionColor","selectionBorderColor","selectionLineWidth","setBackgroundColor","renderAll","bind","erasable","util","trimCanvas","a","getContext","c","e","h","l","getImageData","m","p","q","k","n","data","push","sort","length","putImageData","x","y","Point","normalize","this","distanceFrom","BaseBrush","convertToImg","zoom","getZoom","getRetinaScaling","copyCanvasElement","upperCanvasEl","Image","scaleX","scaleY","crossOrigin","add","clearContext","contextTop","getRandom","clamp","CrayonBrush","createClass","color","_baseWidth","_inkAmount","_latestStrokeLength","_point","_sep","_size","_latest","_drawn","initialize","freeDrawingBrush","globalAlpha","onMouseDown","set","onMouseMove","update","draw","onMouseUp","setFromPoint","call","subtract","ceil","save","fillStyle","beginPath","multiply","PI","t","sin","cos","rect","fill","restore","_render","AnswerImage","src","options","fn","this$1","assign","editable","image","onload","setCoords","callSuper","scaleToHeight","scaleToWidth","setControlsVisibility","bl","br","mb","ml","mr","mt","tl","tr","mtr","lockUniScaling","lockRotation","answerID","toObject","get","scaledSize","fromObject","object","callback","test","AnswerSvg","fontSize","span","fontFamily","document","getElementsByTagName","append","$tempAnswer","createElement","id","innerHTML","body","appendChild","tempAnswerRect","getBoundingClientRect","remove","AnswerTextbox","Textbox","text","forceAsync","_fromObject","addEventListener","event","key","selectedObject","getActiveObject","isEditing","removeSelectedObject","forEachObject","element","discardActiveObject","requestRenderAll","changeActiveObjectColor","activeObject","changeObjectColor","shadow","stroke","fromSVG","filters","BlendColor","applyFilters","Panel","opened","onClose","title","children","onTransitionEnd","className","classNames","styles","wrapper","header","onClick","close","closeIcon","alt","Button","style","active","disabled","Select","onChange","value","getColorOfThePointOnTheCanvas","round","viewportTransform","devicePixelRatio","Eyedropper","useState","activated","setActivated","previewColor","setPreviewColor","previewPosition","setPreviewPosition","useContext","canvasMove","selectedColor","pointer","defaultCanvasState","off","canvasClick","selection","getObjects","forEach","hoverCursor","unLockAllObjects","colorView","lockAllObjects","on","icon","ColorHistory","history","setHistory","useEffect","setColorHandler","GRADIENT_COLORS","getColor","ctx","calculateOffsetPosition","clientX","offset","ColorPicker","setColor","dragging","setDragging","positionX","setPositionX","canvasRef","useRef","wrapperRef","gradient","createLinearGradient","index","addColorStop","fillRect","renderGradient","current","ref","onMouseLeave","ColorPickerPanel","pickerWrapper","TOOLS","BRUSH_SIZE","eraser","marker","magic","pencil","pen","Drawing","setOpened","brush","brushSize","setBrushSize","pathCreateHandler","path","fire","isDrawingMode","PencilBrush","EraserBrush","Shadow","blur","affectStroke","changeCanvasBrush","highlight","panel","exampleWrapper","exampleText","example","border","boxShadow","ReactSlider","slider","orientation","renderThumb","props","thumb","valueNow","invert","size","brushes","map","tool","Hand","SHAPES","circle","circleOutlined","rectangle","rectangleOutlined","star","starOutlined","triangle","triangleOutlined","arrowDown","arrowLeft","arrowUp","FRUITS","lemon","apple","grape","peach","figures","shapes","fruits","Figures","figuresType","setFiguresType","shapeClickHandler","position","loadSVGFromURL","objects","obj","groupSVGElements","fromImgShape","setActiveObject","drawImg","starIcon","select","target","shapeList","shape","Text","itext","IText","lineHeight","cursorColor","textAlign","enterEditing","appendText","BACKGROUNDS","BACKGROUND_COLORS","Background","backgroundList","background","fromURL","img","setBackgroundImage","backgroundColorHandler","CHARS","SpecialChars","charList","char","caretStart","selectionStart","caretEnd","selectionEnd","insertChars","insertChar","charIcon","Fraction","numerator","denominator","fraction","setFraction","focusInputRef","fractionIcon","focus","separator","viewBoxWidth","svgContainer","loadSVGFromString","insertFraction","insertButton","RightControlPanel","fireEvent","prevState","newState","eventType","delta","prevObjects","newObjects","actionType","JSON","stringify","initialConfig","canvasState","currentStateIndex","undoStatus","redoStatus","undoFinishedStatus","redoFinishedStatus","UndoRedo","configRef","undo","redo","setDisabled","canvasStateHandler","historyConfig","canvasAsJson","toJSON","indexToBeInserted","numberOfElementsToRetain","splice","updateCanvasState","loadFromJSON","undoIcon","disableState","redoIcon","Fullscreen","setDimensions","innerWidth","innerHeight","setZoom","minimizeIcon","fullscreenIcon","LeftControlPanel","getPosition","getCenterPoint","canvasHeight","getHeight","ColorApply","RemoveObject","Copy","clone","cloned","clonedObject","copy","BoldText","fontWeight","boldIcon","ItalicText","fontStyle","italicIcon","UnderlineText","underline","underlineIcon","AlignText","align","setAlign","alignHandler","newAlign","alignLeftIcon","alignCenterIcon","alignRightIcon","FONTS","FontText","currentFont","setCurrentFont","font","ObjectMenu","selected","setSelected","setFromImgShape","setType","setPosition","withColorApply","movingHandler","transform","selectHandler","targetObject","deselected","defaultCursor","textbox","removeEmptyTextbox","Answer","draggable","onDragStart","dragEvent","dataTransfer","setData","offsetLeft","offsetTop","clientY","dangerouslySetInnerHTML","__html","Answers","preventDefault","parse","getData","offsetX","offsetY","answerText","answerImage","renderAnswer","undoRedoHandler","includes","ReactDOM","createPortal","Sketch","initialValue","useReducer","init","setInit","canvasIdRef","result","characters","i","charAt","getId","sketchRef","answersRef","Canvas","values","margin","canvasWrapper","Provider","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fe4781b9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"Drawing_panel__2o_TQ\",\"brushSize\":\"Drawing_brushSize__aLRaj\",\"exampleWrapper\":\"Drawing_exampleWrapper__3TzB5\",\"example\":\"Drawing_example__2VsWC\",\"exampleText\":\"Drawing_exampleText__ETlUH\",\"brushes\":\"Drawing_brushes__2BT4B\",\"brush\":\"Drawing_brush__2P9t4\",\"active\":\"Drawing_active__2g9G-\",\"leaves\":\"Drawing_leaves__hypIS\",\"slider\":\"Drawing_slider__pHZbj\",\"thumb\":\"Drawing_thumb__2xpH_\",\"value\":\"Drawing_value__3uPDE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Panel_wrapper__o97Tj\",\"header\":\"Panel_header__1ho3T\",\"title\":\"Panel_title__gMfhr\",\"close\":\"Panel_close__3SCzl\",\"opened\":\"Panel_opened__1xDq5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backgroundList\":\"Background_backgroundList__3Q63z\",\"background\":\"Background_background__2waWn\",\"backgroundColor\":\"Background_backgroundColor__11qqf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"answers\":\"Sketch_answers__2XJOF\",\"canvasWrapper\":\"Sketch_canvasWrapper__Mvkdt\",\"fullscreen\":\"Sketch_fullscreen__3tgqX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__1oiSI\",\"active\":\"Button_active__1Qvou\",\"disabled\":\"Button_disabled__nbT6h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ColorHistory_wrapper__2Ecmf\",\"color\":\"ColorHistory_color__mlCe6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"Figures_select__1KLhn\",\"shapeList\":\"Figures_shapeList__x2KT2\",\"shape\":\"Figures_shape__ub_sG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Fraction_wrapper__drGCQ\",\"separator\":\"Fraction_separator__1j604\",\"insertButton\":\"Fraction_insertButton__pLNCq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Eyedropper_wrapper__3_CV9\",\"colorView\":\"Eyedropper_colorView__2Ppen\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ColorPicker_wrapper__1LHHr\",\"pointer\":\"ColorPicker_pointer__1gLq0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charList\":\"SpecialChars_charList__jsD3R\",\"char\":\"SpecialChars_char__3qn65\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ObjectMenu_wrapper__pEbwy\",\"withColorApply\":\"ObjectMenu_withColorApply__2MbWx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Select_wrapper__1Vf5h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pickerWrapper\":\"ColorPicker_pickerWrapper__1gQeM\",\"picker\":\"ColorPicker_picker__NHuPG\",\"pointer\":\"ColorPicker_pointer__2vrFs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"RightControlPanel_wrapper__3PtuO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LeftControlPanel_wrapper__2Xh4t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FontText_wrapper__1LKYP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"answer\":\"Answer_answer__3lvrs\"};","import { AnswerType } from \"./types\";\n\nexport const FABRIC_SETTINGS = {\n  CANVAS_HEIGHT: 518,\n  CANVAS_WIDTH: 970,\n  CANVAS_BACKGROUND: \"#fffff\",\n  CORNER_SIZE: 8,\n  CORNER_STYLE: \"circle\",\n  SELECTION_COLOR: \"rgba(232, 248, 255, 0.1)\",\n  SELECTION_BORDER_COLOR: \"#cef0fe\",\n  SELECTION_LINE_WIDTH: 1,\n  START_COLOR: \"#ff0000\",\n};\n\nexport const CANVAS_SETTINGS = {\n  height: FABRIC_SETTINGS.CANVAS_HEIGHT,\n  width: FABRIC_SETTINGS.CANVAS_WIDTH,\n  backgroundColor: FABRIC_SETTINGS.CANVAS_BACKGROUND,\n};\n\nexport const answers: AnswerType[] = [\n  {\n    id: \"57425\",\n    sort: 1,\n    type: \"textbox\",\n    width: 200,\n    height: 0,\n    value:\n      \"<b>Lorem ipsum dolor sit amet, consectetur adipisicing elit. <br />Animi aperiam aut autem consectetur ea excepturi explicabo facere hic illum inventore ipsam, nulla numquam, obcaecati, quam quas recusandae tenetur ut veritatis?</b>\",\n    options: {\n      fontSize: 16,\n      fontFamily: \"Georgia\",\n      fill: \"black\",\n      width: 300,\n    },\n  },\n  {\n    id: \"57426\",\n    sort: 1,\n    type: \"image\",\n    width: 50,\n    height: 50,\n    value:\n      \"https://backend25-dev.acceleratelearning.com/system/part_type_graphic_organizer_answer/images/57426/original/pngtree-hand-drawn-little-girl-cartoon-lively-little-girl-cute-little-girl-png-image_491210.jpeg?1628770578\",\n    options: {\n      width: 50,\n      height: 50,\n    },\n  },\n  {\n    id: \"57427\",\n    sort: 1,\n    type: \"textbox\",\n    width: 0,\n    height: 0,\n    value: \"simple\",\n    options: {\n      fontSize: 16,\n      fontFamily: \"Arial\",\n      fill: \"black\",\n      width: 0,\n      height: 0,\n    },\n  },\n];\n","import { fabric as FabricType } from \"fabric\";\nimport { FABRIC_SETTINGS } from \"./constants\";\n\nexport const getId = (length = 10): string => {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * characters.length));\n  }\n  return result;\n};\n\nexport const addOpacity = (hex: string, opacity: number) => {\n  const tempHex = hex.replace(\"#\", \"\");\n  const r = parseInt(tempHex.substring(0, 2), 16);\n  const g = parseInt(tempHex.substring(2, 4), 16);\n  const b = parseInt(tempHex.substring(4, 6), 16);\n\n  return `rgba(${r},${g},${b},${opacity / 100})`;\n};\n\nexport const randomInt = (min: number, max: number): number => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const randomPosition = () => {\n  const center = {\n    x: FABRIC_SETTINGS.CANVAS_WIDTH / 2,\n    y: FABRIC_SETTINGS.CANVAS_HEIGHT / 2,\n  };\n\n  return {\n    top: randomInt(center.y - 180, center.y + 70),\n    left: randomInt(center.x - 350, center.x + 50),\n  };\n};\n\nexport const rgbToHex = (r: number, g: number, b: number): string =>\n  `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;\n\nexport const lockAllObjects = (canvas: FabricType.Canvas): void => {\n  canvas.selection = false;\n  canvas.getObjects().forEach((object: FabricType.Object) => {\n    object.set(\"selectable\", false);\n    object.hoverCursor = \"default\";\n  });\n};\n\nexport const unLockAllObjects = (canvas: FabricType.Canvas): void => {\n  canvas.selection = true;\n  canvas.getObjects().forEach((object: FabricType.Object) => {\n    object.set(\"selectable\", true);\n    object.hoverCursor = \"move\";\n  });\n};\n","import * as React from \"react\";\nimport { AppContext as AppContextType } from \"./types\";\n\nexport const AppContext = React.createContext<AppContextType>(null as any);\n","import { State } from \"./types\";\nimport { CANVAS_SETTINGS, FABRIC_SETTINGS } from \"./constants\";\n\nconst appState: State = {\n  currentColor: FABRIC_SETTINGS.START_COLOR,\n  mode: \"hand\",\n  brushType: \"pencil\",\n  fullscreen: false,\n  width: CANVAS_SETTINGS.width,\n  height: CANVAS_SETTINGS.height,\n  answers: [],\n  usedAnswers: [],\n};\n\nexport default appState;\n","import { createAction } from \"typesafe-actions\";\nimport { Mode, BrushType, AnswerType } from \"./types\";\n\nexport const setCurrentColor = createAction(\"SKETCH/SET_CURRENT_COLOR\")<{\n  currentColor: string;\n}>();\n\nexport const setMode = createAction(\"SKETCH/SET_MODE\")<{\n  mode: Mode;\n}>();\n\nexport const setBrush = createAction(\"SKETCH/SET_BRUSH\")<{\n  brushType: BrushType;\n}>();\n\nexport const setFullscreen = createAction(\"SKETCH/SET_FULLSCREEN\")<{\n  fullscreen: boolean;\n}>();\n\nexport const setWidth = createAction(\"SKETCH/SET_WIDTH\")<{\n  width: number;\n}>();\n\nexport const setHeight = createAction(\"SKETCH/SET_HEIGHT\")<{\n  height: number;\n}>();\n\nexport const setAnswers = createAction(\"SKETCH/SET_ANSWERS\")<{\n  answers: AnswerType[];\n}>();\n\nexport const setUsedAnswers = createAction(\"SKETCH/SET_USED_ANSWERS\")<{\n  usedAnswers: string[];\n}>();\n\nexport const addUsedAnswer = createAction(\"SKETCH/ADD_USED_ANSWER\")<{\n  usedAnswer: string;\n}>();\n\nexport const removeUsedAnswer = createAction(\"SKETCH/REMOVE_USED_ANSWER\")<{\n  usedAnswer: string;\n}>();\n","import { createReducer, ActionType } from \"typesafe-actions\";\nimport initialState from \"./state\";\nimport * as actions from \"./actions\";\nimport * as Types from \"./types\";\n\ntype Action = ActionType<typeof actions>;\n\nconst appReducer = createReducer<Types.State, Action>(initialState)\n  .handleAction(\n    actions.setCurrentColor,\n    (state, { payload: { currentColor } }) => ({\n      ...state,\n      currentColor,\n    })\n  )\n  .handleAction(actions.setBrush, (state, { payload: { brushType } }) => ({\n    ...state,\n    brushType,\n  }))\n  .handleAction(actions.setMode, (state, { payload: { mode } }) => ({\n    ...state,\n    mode,\n  }))\n  .handleAction(\n    actions.setFullscreen,\n    (state, { payload: { fullscreen } }) => ({\n      ...state,\n      fullscreen,\n    })\n  )\n  .handleAction(actions.setWidth, (state, { payload: { width } }) => ({\n    ...state,\n    width,\n  }))\n  .handleAction(actions.setHeight, (state, { payload: { height } }) => ({\n    ...state,\n    height,\n  }))\n  .handleAction(actions.setAnswers, (state, { payload: { answers } }) => ({\n    ...state,\n    answers,\n  }))\n  .handleAction(\n    actions.setUsedAnswers,\n    (state, { payload: { usedAnswers } }) => ({\n      ...state,\n      usedAnswers,\n    })\n  )\n  .handleAction(\n    actions.addUsedAnswer,\n    (state, { payload: { usedAnswer } }) => ({\n      ...state,\n      usedAnswers: [...state.usedAnswers, usedAnswer],\n    })\n  )\n  .handleAction(\n    actions.removeUsedAnswer,\n    (state, { payload: { usedAnswer } }) => ({\n      ...state,\n      usedAnswers: state.usedAnswers.filter(\n        (answer: string) => answer !== usedAnswer\n      ),\n    })\n  );\n\nexport default appReducer;\n","// @ts-nocheck\n/* eslint-disable */\n\n// https://github.com/av01d/fabric-brushes/blob/main/dist/fabric.brushes.min.js\n\nconst { fabric } = window;\n\nexport const addPencilBrush = () => {\n  fabric.util.trimCanvas = function (a) {\n    for (\n      var b = a.getContext(\"2d\"),\n        c = a.width,\n        e = a.height,\n        g = [],\n        h = [],\n        l = b.getImageData(0, 0, c, e),\n        m = function (p, q) {\n          return p - q;\n        },\n        k = 0;\n      k < e;\n      k++\n    )\n      for (var n = 0; n < c; n++)\n        0 < l.data[4 * (k * c + n) + 3] && (g.push(n), h.push(k));\n    g.sort(m);\n    h.sort(m);\n    e = g.length - 1;\n    c = g[e] - g[0];\n    e = h[e] - h[0];\n    l = b.getImageData(g[0], h[0], c, e);\n    a.width = c;\n    a.height = e;\n    b.putImageData(l, 0, 0);\n    return { x: g[0], y: h[0] };\n  };\n  fabric.Point.prototype.normalize = function (a) {\n    if (null === a || void 0 === a) a = 1;\n    var b = this.distanceFrom({ x: 0, y: 0 });\n    0 < b && ((this.x = (this.x / b) * a), (this.y = (this.y / b) * a));\n    return this;\n  };\n  fabric.BaseBrush.prototype.convertToImg = function () {\n    const zoom = this.canvas.getZoom();\n    var a = this.canvas.getRetinaScaling(),\n      b = fabric.util.copyCanvasElement(this.canvas.upperCanvasEl),\n      c = fabric.util.trimCanvas(b);\n    b = new fabric.Image(b, {\n      left: c.x / a / zoom,\n      top: c.y / a / zoom,\n      scaleX: 1 / a / zoom,\n      scaleY: 1 / a / zoom,\n    });\n    b.crossOrigin = \"Anonymous\";\n    this.canvas.add(b);\n    this.canvas.clearContext(this.canvas.contextTop);\n  };\n  fabric.util.getRandom = function (a, b) {\n    b = b ? b : 0;\n    return Math.random() * ((a ? a : 1) - b) + b;\n  };\n  fabric.util.clamp = function (a, b, c) {\n    \"number\" !== typeof c && (c = 0);\n    return a > b ? b : a < c ? c : a;\n  };\n  fabric.CrayonBrush = fabric.util.createClass(fabric.BaseBrush, {\n    color: \"#000\",\n    opacity: 0.6,\n    width: 1,\n    _baseWidth: 1,\n    _inkAmount: 10,\n    _latestStrokeLength: 0,\n    _point: null,\n    _sep: 5,\n    _size: 0,\n    _latest: null,\n    _drawn: !1,\n    initialize: function (a, b) {\n      b = b || {};\n      this.canvas = a;\n      this.width = b.width || a.freeDrawingBrush.width;\n      this.color = b.color || a.freeDrawingBrush.color;\n      this.opacity = b.opacity || a.contextTop.globalAlpha;\n      this._point = new fabric.Point(0, 0);\n    },\n    onMouseDown: function (a) {\n      this.canvas.contextTop.globalAlpha = this.opacity;\n      this._size = this.width / 2 + this._baseWidth;\n      this._drawn = !1;\n      this.set(a);\n    },\n    onMouseMove: function (a) {\n      this.update(a);\n      this.draw(this.canvas.contextTop);\n    },\n    onMouseUp: function () {\n      this._drawn && this.convertToImg();\n      this._latest = null;\n      this._latestStrokeLength = 0;\n      this.canvas.contextTop.globalAlpha = 1;\n    },\n    set: function (a) {\n      this._latest\n        ? this._latest.setFromPoint(this._point)\n        : (this._latest = new fabric.Point(a.x, a.y));\n      fabric.Point.prototype.setFromPoint.call(this._point, a);\n    },\n    update: function (a) {\n      this.set(a);\n      this._latestStrokeLength = this._point\n        .subtract(this._latest)\n        .distanceFrom({ x: 0, y: 0 });\n    },\n    draw: function (a) {\n      var zoom = this.canvas.getZoom();\n      var b;\n      var c = this._point.subtract(this._latest);\n      var e = Math.ceil(this._size / 2);\n      var g = Math.floor(c.distanceFrom({ x: 0, y: 0 }) / e) + 1;\n      c.normalize(e);\n      var h =\n        this._sep *\n        fabric.util.clamp(\n          (this._inkAmount / this._latestStrokeLength) * 3,\n          1,\n          0.5\n        );\n      var l = Math.ceil(this._size * this._sep);\n      var m = this._size / 2;\n      a.save();\n      a.fillStyle = this.color;\n      a.beginPath();\n      for (e = 0; e < l; e++)\n        for (b = 0; b < g; b++) {\n          var k = this._latest.add(c.multiply(b));\n          var n = fabric.util.getRandom(m);\n          var p = fabric.util.getRandom(2 * Math.PI);\n          var q = fabric.util.getRandom(h, h / 2);\n          var r = fabric.util.getRandom(h, h / 2);\n          var t = k.x + n * Math.sin(p) - q / 2;\n          k = k.y + n * Math.cos(p) - r / 2;\n          a.rect(t * zoom, k * zoom, q, r);\n        }\n      a.fill();\n      a.restore();\n      this._drawn = !0;\n    },\n    _render: function () {},\n  });\n};\n","// @ts-nocheck\n\nconst { fabric } = window;\n\nconst getImageUrlFromSvg = (html, width, height) => {\n  const svgData = `<svg xmlns=\"http://www.w3.org/2000/svg\" \n      width=\"${width}\" \n      height=\"${height}\"\n      style=\"overflow: visible;\">\n      <foreignObject width=\"100%\" height=\"100%\">\n        ${html}\n      </foreignObject>\n    </svg>`;\n\n  const domUrl = window.URL || window.webkitURL || window;\n  const svg = new Blob([svgData], { type: \"image/svg+xml\" });\n  return domUrl.createObjectURL(svg);\n};\n\nexport const aliSupport = (): void => {\n  fabric.AnswerImage = fabric.util.createClass(fabric.Image, {\n    type: \"answerImage\",\n\n    initialize: function initialize(src, options = {}, fn) {\n      const this$1 = this;\n\n      options = Object.assign(\n        {},\n        {\n          editable: false,\n        },\n        options\n      );\n      // Setup image object to pass along to `fabric.Image`.\n      const image = new Image();\n\n      image.onload = function () {\n        this$1.setHeight(this$1.height || options.height || image.height);\n        this$1.setWidth(this$1.width || options.width || image.width);\n        this$1.setCoords();\n        this$1.canvas.renderAll();\n      };\n\n      image.src = src;\n\n      this.callSuper(\"initialize\", image, {\n        ...options,\n        width: \"\",\n        height: \"\",\n      });\n\n      this.scaleToHeight(options.height || image.height);\n      this.scaleToWidth(options.width || image.width);\n\n      this.setControlsVisibility({\n        bl: true,\n        br: true,\n        mb: false,\n        ml: false,\n        mr: false,\n        mt: false,\n        tl: true,\n        tr: true,\n        mtr: false,\n      });\n\n      this.lockUniScaling = true;\n      this.lockRotation = true;\n      this.set(\"answerID\", options.answerID || \"\");\n      this.set(\"scaledSize\", {\n        height: options.height || image.height,\n        width: options.width || image.width,\n      });\n      fn && fn(this);\n    },\n\n    toObject: function toObject() {\n      return Object.assign(this.callSuper(\"toObject\"), {\n        answerID: this.get(\"answerID\"),\n        scaledSize: this.get(\"scaledSize\"),\n      });\n    },\n  });\n\n  fabric.AnswerImage.fromObject = function (object, callback) {\n    const test = new fabric.AnswerImage(object.src, object, callback);\n    test.scaleToHeight(object.scaledSize.height);\n    test.scaleToWidth(object.scaledSize.width);\n    return test;\n  };\n\n  fabric.AnswerSvg = fabric.util.createClass(fabric.Image, {\n    type: \"answerSvg\",\n\n    initialize: function initialize(html: any, options = {}, fn: any) {\n      const fontSize = options.fontSize ? options.fontSize + \"px\" : \"initial\";\n      const span = `<span \n                      xmlns=\"http://www.w3.org/1999/xhtml\"\n                      style=\"display: inline-block; \n                             width: ${\n                               options.width > 0 ? options.width + \"px\" : \"auto\"\n                             };\n                             line-height: 2; \n                             color: ${options.fill || \"black\"};\n                             font-size: ${fontSize}; \n                             font-family: ${options.fontFamily || \"Arial\"};\"\n                    > \n\n                      ${html}\n                    </span>`;\n\n      document.getElementsByTagName(\"body\")[0].append();\n      const $tempAnswer = document.createElement(\"div\");\n      $tempAnswer.id = \"alisketch-svg-answer\";\n      $tempAnswer.innerHTML = span;\n      document.body.appendChild($tempAnswer);\n\n      const tempAnswerRect = $tempAnswer\n        .getElementsByTagName(\"span\")[0]\n        .getBoundingClientRect();\n      const width = Math.ceil(tempAnswerRect.width);\n      const height = Math.ceil(tempAnswerRect.height);\n      $tempAnswer.remove();\n\n      const this$1 = this;\n      options = { ...options, editable: false };\n      const image = new Image();\n      image.onload = function () {\n        this$1.setWidth(this$1.width || options.width || image.width);\n        this$1.setHeight(this$1.height || options.height || image.height);\n        this$1.setCoords();\n        this$1.canvas.renderAll();\n      };\n      image.src = getImageUrlFromSvg(span, width, height);\n      this.callSuper(\"initialize\", image, options);\n      this.setControlsVisibility({\n        bl: true,\n        br: true,\n        mb: false,\n        ml: false,\n        mr: false,\n        mt: false,\n        tl: true,\n        tr: true,\n        mtr: false,\n      });\n\n      this.lockUniScaling = true;\n      this.lockRotation = true;\n      this.set(\"answerID\", options.answerID || \"\");\n      this.set(\"height\", height || \"\");\n      this.set(\"html\", html);\n      fn && fn(this);\n    },\n\n    toObject: function toObject() {\n      return Object.assign(this.callSuper(\"toObject\"), {\n        fontFamily: this.get(\"fontFamily\"),\n        height: this.get(\"height\"),\n        answerID: this.get(\"answerID\"),\n        html: this.get(\"html\"),\n      });\n    },\n  });\n\n  fabric.AnswerSvg.fromObject = function (object, callback) {\n    return new fabric.AnswerSvg(object.html, object, callback);\n  };\n\n  fabric.AnswerTextbox = fabric.util.createClass(fabric.Textbox, {\n    type: \"answerTextbox\",\n\n    initialize: function initialize(object, options = {}) {\n      options = {\n        editable: false,\n        fontSize: 16,\n        fontFamily: \"Arial\",\n        fill: \"black\",\n        left: object.left,\n        top: object.top,\n        answerID: object.answerID,\n        ...options,\n      };\n\n      if (typeof object !== \"string\") {\n        object = object.text;\n      }\n\n      object = object.replace(/<br>/g, \"\\n\");\n\n      this.callSuper(\"initialize\", object, options);\n\n      this.setControlsVisibility({\n        bl: false,\n        br: false,\n        mb: false,\n        ml: true,\n        mr: true,\n        tl: false,\n        tr: false,\n        mtr: false,\n      });\n\n      this.lockRotation = true;\n\n      this.set(\"answerID\", options.answerID || \"\");\n    },\n\n    toObject: function toObject() {\n      return Object.assign(this.callSuper(\"toObject\"), {\n        answerID: this.get(\"answerID\"),\n      });\n    },\n  });\n\n  fabric.AnswerTextbox.fromObject = (object, callback, forceAsync) => {\n    return new fabric.Object._fromObject(\n      \"AnswerTextbox\",\n      object,\n      callback,\n      forceAsync\n    );\n  };\n};\n","import { Dispatch } from \"react\";\nimport { fabric as FabricType } from \"fabric\";\nimport { addPencilBrush } from \"legacy/customBrushes\";\nimport { aliSupport } from \"legacy/aliSupport\";\nimport { FABRIC_SETTINGS } from \"./constants\";\nimport { addOpacity } from \"./utils\";\nimport { removeUsedAnswer } from \"./actions\";\n\nconst { fabric } = window;\n\nexport const setSketchSettings = (\n  canvas: FabricType.Canvas | undefined,\n  dispatch: Dispatch<any>\n): void => {\n  if (canvas) {\n    // Initial canvas setup\n    // @ts-ignore\n    fabric.Object.prototype.cornerStyle = FABRIC_SETTINGS.CORNER_STYLE;\n    fabric.Object.prototype.cornerSize = FABRIC_SETTINGS.CORNER_SIZE;\n    canvas.selectionColor = FABRIC_SETTINGS.SELECTION_COLOR;\n    canvas.selectionBorderColor = FABRIC_SETTINGS.SELECTION_BORDER_COLOR;\n    canvas.selectionLineWidth = FABRIC_SETTINGS.SELECTION_LINE_WIDTH;\n    // @ts-ignore\n    canvas.setBackgroundColor(\"white\", canvas.renderAll.bind(canvas), {\n      erasable: false,\n    });\n    addPencilBrush();\n    aliSupport();\n\n    document.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Backspace\") {\n        const selectedObject = canvas.getActiveObject();\n        // @ts-ignore\n        if (selectedObject && !selectedObject.isEditing) {\n          removeSelectedObject(canvas, selectedObject, dispatch);\n        }\n      }\n    });\n  }\n};\n\nexport const removeSelectedObject = (\n  canvas: FabricType.Canvas,\n  selectedObject: any,\n  dispatch: Dispatch<any>\n) => {\n  if (selectedObject && selectedObject.type === \"activeSelection\") {\n    (selectedObject as any).forEachObject((element: any) => {\n      canvas.remove(element);\n\n      if (element.answerID) {\n        dispatch(removeUsedAnswer({ usedAnswer: element.answerID }));\n      }\n    });\n  } else {\n    canvas.remove(selectedObject);\n    if (selectedObject.answerID) {\n      dispatch(removeUsedAnswer({ usedAnswer: selectedObject.answerID }));\n    }\n  }\n\n  canvas.discardActiveObject().requestRenderAll();\n};\n\nexport const changeActiveObjectColor = (\n  canvas: FabricType.Canvas,\n  color: string\n) => {\n  const activeObject = canvas.getActiveObject();\n\n  if (activeObject) {\n    if (\n      activeObject.type === \"activeSelection\" ||\n      activeObject.type === \"group\"\n    ) {\n      (activeObject as any).forEachObject((element: any) => {\n        changeObjectColor(element, color);\n      });\n    } else {\n      changeObjectColor(activeObject, color);\n    }\n\n    canvas.renderAll();\n  }\n};\n\nconst changeObjectColor = (object: any, color: string) => {\n  if (\n    (object.type === \"path\" || object.type === \"line\") &&\n    !object.shadow &&\n    object.brushType !== \"marker\"\n  ) {\n    object.set({ stroke: color });\n  }\n\n  if (object.type === \"path\" && object.brushType === \"marker\") {\n    object.set({ stroke: addOpacity(color, 20) });\n  }\n\n  if (\n    object.type === \"rect\" ||\n    object.type === \"circle\" ||\n    object.type === \"ellipse\" ||\n    object.type === \"triangle\" ||\n    object.type === \"text\" ||\n    object.type === \"i-text\" ||\n    object.fromSVG\n  ) {\n    object.set({ fill: color });\n  }\n\n  if (object.type === \"path\" && object.shadow) {\n    object.set({ shadow: { ...object.shadow, color } });\n  }\n\n  if (object.type === \"image\") {\n    object.filters[0] = new fabric.Image.filters.BlendColor({\n      color,\n      mode: \"tint\",\n    });\n\n    object.applyFilters();\n  }\n};\n","export default __webpack_public_path__ + \"static/media/close.ae19aa75.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport classNames from \"classnames\";\nimport closeIcon from \"./assets/close.svg\";\nimport styles from \"./Panel.module.css\";\n\ninterface PanelType {\n  opened: boolean;\n  title?: string;\n  onClose: () => any;\n  onTransitionEnd?: () => any;\n}\n\nconst Panel: React.FC<PanelType> = ({\n  opened,\n  onClose,\n  title,\n  children,\n  onTransitionEnd,\n}) => {\n  return (\n    <div\n      onTransitionEnd={onTransitionEnd}\n      className={classNames(styles.wrapper, { [styles.opened]: opened })}\n    >\n      <div className={styles.header}>\n        <div className={styles.title}>{title}</div>\n        <Button onClick={onClose} className={styles.close}>\n          <img src={closeIcon} alt=\"\" />\n        </Button>\n      </div>\n      {children}\n    </div>\n  );\n};\n\nexport default Panel;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./Button.module.css\";\n\ninterface ButtonType {\n  onClick?: () => any;\n  className?: string;\n  active?: boolean;\n  style?: any;\n  disabled?: boolean;\n}\n\nconst Button: React.FC<ButtonType> = ({\n  children,\n  onClick,\n  className,\n  style,\n  active = false,\n  disabled = false,\n}) => (\n  <button\n    disabled={disabled}\n    onClick={onClick}\n    className={classNames(styles.wrapper, className, {\n      [styles.active]: active,\n      [styles.disabled]: disabled,\n    })}\n    style={style}\n  >\n    {children}\n  </button>\n);\n\nexport default Button;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./Select.module.css\";\n\ninterface SelectType {\n  onChange?: (e: any) => any;\n  className?: string;\n  style?: any;\n  value?: any;\n}\n\nconst Select: React.FC<SelectType> = ({\n  children,\n  onChange,\n  value,\n  className,\n  style,\n}) => {\n  return (\n    <select\n      value={value}\n      onChange={onChange}\n      className={classNames(styles.wrapper, className)}\n      style={style}\n    >\n      {children}\n    </select>\n  );\n};\n\nexport default Select;\n","// @ts-nocheck\nimport { rgbToHex } from \"duck/utils\";\nimport { fabric as FabricType } from \"fabric\";\n\nconst { fabric } = window;\n\nexport const getColorOfThePointOnTheCanvas = (\n  canvas: FabricType.Canvas,\n  x: number,\n  y: number\n) => {\n  let ctx = canvas.getContext();\n  const { data } = ctx.getImageData(\n    Math.round(\n      (x + canvas.viewportTransform[4]) *\n        fabric.devicePixelRatio *\n        canvas.getZoom()\n    ),\n    Math.round(\n      (y + canvas.viewportTransform[5]) *\n        fabric.devicePixelRatio *\n        canvas.getZoom()\n    ),\n    1,\n    1\n  );\n\n  return rgbToHex(data[0], data[1], data[2]);\n};\n","export default __webpack_public_path__ + \"static/media/dropper.69cb0ffd.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor, setMode } from \"duck/actions\";\nimport { lockAllObjects, unLockAllObjects } from \"duck/utils\";\nimport { getColorOfThePointOnTheCanvas } from \"./duck/utils\";\nimport icon from \"./assets/dropper.svg\";\nimport styles from \"./Eyedropper.module.css\";\n\nconst Eyedropper: React.FC = () => {\n  const [activated, setActivated] = React.useState<boolean>(false);\n  const [previewColor, setPreviewColor] = React.useState<string>(\"\");\n  const [previewPosition, setPreviewPosition] = React.useState({\n    top: 460,\n    left: 260,\n  });\n  const { canvas, dispatch } = React.useContext(AppContext);\n\n  const canvasMove = (e: any): void => {\n    const selectedColor = getColorOfThePointOnTheCanvas(\n      canvas,\n      e.pointer.x,\n      e.pointer.y\n    );\n    setPreviewPosition({ top: e.pointer.y - 10, left: e.pointer.x + 20 });\n    setPreviewColor(selectedColor);\n  };\n\n  const defaultCanvasState = (): void => {\n    setActivated(false);\n    canvas.off(\"mouse:down\", canvasClick);\n    canvas.off(\"mouse:move\", canvasMove);\n    unLockAllObjects(canvas);\n  };\n\n  const canvasClick = (e: any) => {\n    defaultCanvasState();\n    const selectedColor = getColorOfThePointOnTheCanvas(\n      canvas,\n      e.pointer.x,\n      e.pointer.y\n    );\n    dispatch(setCurrentColor({ currentColor: selectedColor }));\n  };\n\n  const eyeDropperHandler = () => {\n    if (!activated) {\n      setActivated(true);\n      lockAllObjects(canvas);\n      dispatch(setMode({ mode: \"hand\" }));\n      canvas.on(\"mouse:down\", canvasClick);\n      canvas.on(\"mouse:move\", canvasMove);\n    } else {\n      defaultCanvasState();\n    }\n  };\n\n  return (\n    <>\n      {activated && (\n        <div\n          className={styles.colorView}\n          style={{ backgroundColor: previewColor, ...previewPosition }}\n        />\n      )}\n      <Button\n        active={activated}\n        onClick={eyeDropperHandler}\n        className={styles.wrapper}\n      >\n        <img src={icon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default Eyedropper;\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor } from \"duck/actions\";\nimport styles from \"./ColorHistory.module.css\";\n\nconst ColorHistory: React.FC = () => {\n  const [history, setHistory] = React.useState([\"\", \"\"]);\n  const { state, dispatch } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  React.useEffect(() => {\n    setHistory((state) => [currentColor, state[0]]);\n  }, [currentColor]);\n\n  const setColorHandler = (color: string) => {\n    dispatch(setCurrentColor({ currentColor: color }));\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <button\n        className={styles.color}\n        style={{ backgroundColor: history[0] }}\n        onClick={() => setColorHandler(history[0])}\n      />\n      <button\n        className={styles.color}\n        style={{ backgroundColor: history[1] || \"white\" }}\n        onClick={() => setColorHandler(history[1] || \"white\")}\n      />\n    </div>\n  );\n};\n\nexport default ColorHistory;\n","export const GRADIENT_COLORS = [\n  \"#f00\",\n  \"#ff0\",\n  \"#0f0\",\n  \"#0ff\",\n  \"#00f\",\n  \"#f0f\",\n  \"#fff\",\n  \"#000\",\n];\n","import { GRADIENT_COLORS } from \"./constants\";\nimport { rgbToHex } from \"duck/utils\";\n\nexport const renderGradient = (\n  canvas: HTMLCanvasElement | null,\n  width: number,\n  height: number\n): void => {\n  if (canvas) {\n    const ctx = canvas.getContext(\"2d\");\n\n    if (ctx) {\n      const gradient = ctx.createLinearGradient(0, 0, width, 0);\n\n      GRADIENT_COLORS.forEach((color: string, index: number) => {\n        if (index < GRADIENT_COLORS.length - 1) {\n          gradient.addColorStop(index / (GRADIENT_COLORS.length - 1), color);\n        } else {\n          gradient.addColorStop(1, color);\n        }\n      });\n\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, width, height);\n    }\n  }\n};\n\nexport const getColor = (canvas: HTMLCanvasElement | null, left: number) => {\n  if (canvas) {\n    const ctx = canvas.getContext(\"2d\");\n\n    if (ctx) {\n      const { data } = ctx.getImageData(left, 10, 1, 1);\n      return rgbToHex(data[0], data[1], data[2]);\n    }\n  }\n\n  return \"#000\";\n};\n","export const calculateOffsetPosition = (\n  wrapper: HTMLDivElement,\n  clientX: number,\n  width: number\n): number => {\n  const elemRect = wrapper.getBoundingClientRect();\n\n  const offset = clientX - elemRect.left;\n  if (offset < 0) {\n    return 0;\n  }\n\n  if (offset > width) {\n    return width;\n  }\n\n  return offset;\n};\n","import React from \"react\";\nimport { FABRIC_SETTINGS } from \"duck/constants\";\nimport { getColor, renderGradient } from \"./duck/operations\";\nimport { calculateOffsetPosition } from \"./duck/utils\";\nimport styles from \"./ColorPicker.module.css\";\n\ninterface ColorPickerType {\n  width: number;\n  height: number;\n  onChange?: (color: string) => any;\n}\n\nconst ColorPicker: React.FC<ColorPickerType> = ({\n  width,\n  height,\n  onChange,\n}) => {\n  const [color, setColor] = React.useState<string>(FABRIC_SETTINGS.START_COLOR);\n  const [dragging, setDragging] = React.useState<boolean>(false);\n  const [positionX, setPositionX] = React.useState<number>(0);\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const wrapperRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    renderGradient(canvasRef.current, width, height);\n    setColor(getColor(canvasRef.current, positionX));\n  }, [height, positionX, width]);\n\n  React.useEffect(() => {\n    setColor(getColor(canvasRef.current, positionX));\n  }, [positionX]);\n\n  const mouseMoveHandler = (e: any) => {\n    if (dragging && wrapperRef.current) {\n      setPositionX(\n        calculateOffsetPosition(wrapperRef.current, e.clientX, width)\n      );\n    }\n  };\n\n  const mouseUpHandler = (): void => {\n    setDragging(false);\n    if (typeof onChange === \"function\") {\n      onChange(color);\n    }\n  };\n\n  const canvasMouseDownHandler = (e: any): void => {\n    setDragging(true);\n    if (wrapperRef.current) {\n      setPositionX(\n        calculateOffsetPosition(wrapperRef.current, e.clientX, width)\n      );\n    }\n  };\n\n  const canvasMouseLeaveHandler = (e: any): void => {\n    if (dragging) {\n      setDragging(false);\n      if (typeof onChange === \"function\") {\n        onChange(color);\n      }\n    }\n  };\n\n  return (\n    <div\n      ref={wrapperRef}\n      onMouseMove={mouseMoveHandler}\n      onMouseLeave={canvasMouseLeaveHandler}\n      className={styles.wrapper}\n      style={{ width, height }}\n    >\n      <canvas\n        ref={canvasRef}\n        onMouseDown={canvasMouseDownHandler}\n        width={width}\n        height={height}\n      />\n      <button\n        onMouseDown={() => setDragging(true)}\n        onMouseUp={mouseUpHandler}\n        className={styles.pointer}\n        style={{ left: positionX, backgroundColor: color }}\n      />\n    </div>\n  );\n};\n\nexport default ColorPicker;\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor } from \"duck/actions\";\nimport { changeActiveObjectColor } from \"duck/operations\";\nimport { Eyedropper, ColorHistory, ColorPicker } from \"./components\";\nimport styles from \"./ColorPicker.module.css\";\n\nconst ColorPickerPanel: React.FC = () => {\n  const { canvas, dispatch, state } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  React.useEffect(() => {\n    changeActiveObjectColor(canvas, currentColor);\n  }, [currentColor, canvas]);\n\n  const changeHandler = (color: string): void => {\n    dispatch(setCurrentColor({ currentColor: color }));\n  };\n\n  return (\n    <div className={styles.pickerWrapper}>\n      <Eyedropper />\n      <ColorPicker width={430} height={24} onChange={changeHandler} />\n      <ColorHistory />\n    </div>\n  );\n};\n\nexport default ColorPickerPanel;\n","import eraser from \"../assets/brush1.svg\";\nimport marker from \"../assets/brush2.svg\";\nimport magic from \"../assets/brush3.svg\";\nimport pencil from \"../assets/brush4.svg\";\nimport pen from \"../assets/brush5.svg\";\n\nexport const TOOLS = [\n  {\n    type: \"eraser\",\n    icon: eraser,\n  },\n  {\n    type: \"marker\",\n    icon: marker,\n  },\n  {\n    type: \"magic\",\n    icon: magic,\n  },\n  {\n    type: \"pencil\",\n    icon: pencil,\n  },\n  {\n    type: \"pen\",\n    icon: pen,\n  },\n];\n\nexport const BRUSH_SIZE = {\n  eraser: {\n    min: 1,\n    max: 90\n  },\n  marker: {\n    min: 20,\n    max: 90\n  },\n  magic: {\n    min: 10,\n    max: 60\n  },\n  pencil: {\n    min: 1,\n    max: 60\n  },\n  pen: {\n    min: 5,\n    max: 20\n  },\n}","export default __webpack_public_path__ + \"static/media/brush1.4bb3634c.svg\";","export default __webpack_public_path__ + \"static/media/brush2.bd74d5cf.svg\";","export default __webpack_public_path__ + \"static/media/brush3.38a28f48.svg\";","export default __webpack_public_path__ + \"static/media/brush4.4c238ed7.svg\";","export default __webpack_public_path__ + \"static/media/brush5.b0040eae.svg\";","export default __webpack_public_path__ + \"static/media/highlight.a5e0d7ce.svg\";","// @ts-nocheck\nimport { fabric as FabricType } from \"fabric\";\nimport { BrushType } from \"duck/types\";\nimport { addOpacity } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const changeCanvasBrush = (\n  canvas: FabricType.Canvas,\n  brush: BrushType,\n  brushSize: number,\n  color: string\n) => {\n  if (brush === \"marker\" || brush === \"magic\" || brush === \"pencil\") {\n    canvas.freeDrawingBrush = new fabric.PencilBrush(canvas);\n  }\n\n  if (brush === \"eraser\") {\n    canvas.freeDrawingBrush = new fabric.EraserBrush(canvas);\n  } else {\n    canvas.freeDrawingBrush.color = color;\n  }\n\n  if (brush === \"pen\") {\n    canvas.freeDrawingBrush = new fabric.CrayonBrush(canvas);\n  }\n\n  if (brush === \"marker\") {\n    canvas.freeDrawingBrush.color = addOpacity(color, 20);\n  }\n\n  if (brush === \"magic\") {\n    canvas.freeDrawingBrush.color = \"#fff\";\n    canvas.freeDrawingBrush.shadow = new fabric.Shadow({\n      blur: 30,\n      affectStroke: true,\n      color,\n    });\n  }\n\n  canvas.freeDrawingBrush.width = brushSize;\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport ReactSlider from \"react-slider\";\nimport { Panel, Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport { BrushType } from \"duck/types\";\nimport { TOOLS, BRUSH_SIZE } from \"./duck/constants\";\nimport highlight from \"./assets/highlight.svg\";\nimport { changeCanvasBrush } from \"./duck/operations\";\nimport styles from \"./Drawing.module.css\";\n\nconst Drawing: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const [brush, setBrush] = React.useState<BrushType>(\"\");\n  const [brushSize, setBrushSize] = React.useState<number>(10);\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { currentColor, mode } = state;\n\n  React.useEffect(() => {\n    const pathCreateHandler = (e: any) => {\n      e.path.brushType = brush;\n\n      if (brush === \"eraser\") {\n        canvas.fire(\"object:erased\");\n      }\n    };\n\n    canvas.on(\"path:created\", pathCreateHandler);\n\n    canvas.isDrawingMode = mode === \"drawing\";\n    if (mode !== \"drawing\") {\n      setBrush(\"\");\n    }\n\n    return () => {\n      canvas.off(\"path:created\", pathCreateHandler);\n    };\n  }, [mode, canvas, brush]);\n\n  React.useEffect(() => {\n    changeCanvasBrush(canvas, brush, brushSize, currentColor);\n    if (brush && brushSize < BRUSH_SIZE[brush].min) {\n      setBrushSize(BRUSH_SIZE[brush].min);\n    }\n\n    if (brush && brushSize > BRUSH_SIZE[brush].max) {\n      setBrushSize(BRUSH_SIZE[brush].max);\n    }\n  }, [brush, canvas, brushSize, currentColor]);\n\n  const brushHandler = (brushType: BrushType): void => {\n    dispatch(setMode({ mode: \"drawing\" }));\n    setBrush(brushType);\n  };\n\n  const sizeHandler = (size: number): void => {\n    setBrushSize(size);\n  };\n\n  return (\n    <>\n      <Button active={mode === \"drawing\"} onClick={() => setOpened(true)}>\n        <img src={highlight} alt=\"\" />\n      </Button>\n      <Panel title=\"Brushes\" opened={opened} onClose={() => setOpened(false)}>\n        <div className={styles.panel}>\n          <div className={styles.brushSize}>\n            <div className={styles.exampleWrapper}>\n              {brush === \"marker\" && (\n                <span className={styles.exampleText}>text</span>\n              )}\n              <div\n                className={styles.example}\n                style={{\n                  width: brushSize,\n                  height: brushSize,\n                  border: brush === \"eraser\" ? \"1px solid #c3d0e4\" : \"none\",\n                  backgroundColor:\n                    brush !== \"magic\" && brush !== \"eraser\"\n                      ? currentColor\n                      : \"white\",\n                  opacity: brush === \"marker\" ? 0.2 : 1,\n                  boxShadow:\n                    brush === \"magic\" ? `0 0 30px ${currentColor}` : \"none\",\n                }}\n              />\n            </div>\n            <ReactSlider\n              className={styles.slider}\n              orientation=\"vertical\"\n              value={brushSize}\n              renderThumb={(props, state) => (\n                <div {...props} className={styles.thumb}>\n                  <div className={styles.value}>{state.valueNow}</div>\n                </div>\n              )}\n              invert\n              min={brush ? BRUSH_SIZE[brush].min : 1}\n              max={brush ? BRUSH_SIZE[brush].max : 60}\n              onChange={sizeHandler}\n            />\n          </div>\n          <div className={styles.brushes}>\n            {TOOLS.map((tool: any) => (\n              <button\n                onClick={() => brushHandler(tool.type)}\n                key={tool.type}\n                className={classNames(styles.brush, {\n                  [styles.active]: brush === tool.type,\n                })}\n              >\n                <img src={tool.icon} alt=\"\" />\n              </button>\n            ))}\n          </div>\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Drawing;\n","export default __webpack_public_path__ + \"static/media/hand.cf210679.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport icon from \"./assets/hand.svg\";\n\nconst Hand: React.FC = () => {\n  const { state, dispatch } = React.useContext(AppContext);\n\n  const clickHandler = () => {\n    dispatch(setMode({ mode: \"hand\" }));\n  };\n\n  return (\n    <Button onClick={clickHandler} active={state.mode === \"hand\"}>\n      <img src={icon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Hand;\n","export default __webpack_public_path__ + \"static/media/star.10d3d0dd.svg\";","export default __webpack_public_path__ + \"static/media/circle.1be35666.svg\";","export default __webpack_public_path__ + \"static/media/circle-outlined.55858944.svg\";","export default __webpack_public_path__ + \"static/media/rectangle.06a5077b.svg\";","export default __webpack_public_path__ + \"static/media/rectangle-outlined.f492c7dd.svg\";","export default __webpack_public_path__ + \"static/media/star.9acb5ada.svg\";","export default __webpack_public_path__ + \"static/media/star-outlined.0daaff4a.svg\";","export default __webpack_public_path__ + \"static/media/triangle.fbe306e2.svg\";","export default __webpack_public_path__ + \"static/media/triangle-outlined.a25dd2aa.svg\";","export default __webpack_public_path__ + \"static/media/arrow-down.66902268.svg\";","export default __webpack_public_path__ + \"static/media/arrow-up.c13fee86.svg\";","export default __webpack_public_path__ + \"static/media/arrow-left.6c52d128.svg\";","import circle from \"./circle.svg\";\nimport circleOutlined from \"./circle-outlined.svg\";\nimport rectangle from \"./rectangle.svg\";\nimport rectangleOutlined from \"./rectangle-outlined.svg\";\nimport star from \"./star.svg\";\nimport starOutlined from \"./star-outlined.svg\";\nimport triangle from \"./triangle.svg\";\nimport triangleOutlined from \"./triangle-outlined.svg\";\nimport arrowDown from \"./arrow-down.svg\";\nimport arrowUp from \"./arrow-up.svg\";\nimport arrowLeft from \"./arrow-left.svg\";\nimport arrowRight from \"./arrow-right.svg\";\nimport thunderOutlined from \"./thunder-outlined.svg\";\nimport thunder from \"./thunder.svg\";\nimport cloudOutlined from \"./cloud-outlined.svg\";\nimport cloud from \"./cloud.svg\";\n\nexport const SHAPES = [\n  {\n    title: \"circle\",\n    src: circle,\n  },\n  {\n    title: \"circleOutlined\",\n    src: circleOutlined,\n  },\n  {\n    title: \"rectangle\",\n    src: rectangle,\n  },\n  {\n    title: \"rectangleOutlined\",\n    src: rectangleOutlined,\n  },\n  {\n    title: \"star\",\n    src: star,\n  },\n  {\n    title: \"starOutlined\",\n    src: starOutlined,\n  },\n  {\n    title: \"triangle\",\n    src: triangle,\n  },\n  {\n    title: \"triangleOutlined\",\n    src: triangleOutlined,\n  },\n  {\n    title: \"arrowDown\",\n    src: arrowDown,\n  },\n  {\n    title: \"arrowRight\",\n    src: arrowRight,\n  },\n  {\n    title: \"arrowLeft\",\n    src: arrowLeft,\n  },\n  {\n    title: \"arrowUp\",\n    src: arrowUp,\n  },\n  {\n    title: \"thunderOutlined\",\n    src: thunderOutlined,\n  },\n  {\n    title: \"thunder\",\n    src: thunder,\n  },\n  {\n    title: \"cloudOutlined\",\n    src: cloudOutlined,\n  },\n  {\n    title: \"cloud\",\n    src: cloud,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/arrow-right.545fd979.svg\";","export default __webpack_public_path__ + \"static/media/thunder-outlined.96c0359a.svg\";","export default __webpack_public_path__ + \"static/media/thunder.ddcd8d6d.svg\";","export default __webpack_public_path__ + \"static/media/cloud-outlined.c144d388.svg\";","export default __webpack_public_path__ + \"static/media/cloud.eda4a7bc.svg\";","export default __webpack_public_path__ + \"static/media/apple.e096d285.svg\";","export default __webpack_public_path__ + \"static/media/grape.603d86e2.svg\";","export default __webpack_public_path__ + \"static/media/lemon.e505d6e4.svg\";","export default __webpack_public_path__ + \"static/media/peach.5acec3d9.svg\";","import apple from \"./apple.svg\";\nimport grape from \"./grape.svg\";\nimport lemon from \"./lemon.svg\";\nimport peach from \"./peach.svg\";\nimport strawberry from \"./strawberry.svg\";\nimport watermelon from \"./watermelon.svg\";\n\nexport const FRUITS = [\n  {\n    title: \"lemon\",\n    src: lemon,\n  },\n  {\n    title: \"apple\",\n    src: apple,\n  },\n  {\n    title: \"grape\",\n    src: grape,\n  },\n  {\n    title: \"strawberry\",\n    src: strawberry,\n  },\n  {\n    title: \"peach\",\n    src: peach,\n  },\n  {\n    title: \"watermelon\",\n    src: watermelon,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/strawberry.8825d787.svg\";","export default __webpack_public_path__ + \"static/media/watermelon.339708ac.svg\";","import { fabric as FabricType } from \"fabric\";\nimport { randomPosition } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const drawImg = (\n  canvas: FabricType.Canvas,\n  src: string,\n  type: string\n) => {\n  const position = randomPosition();\n  fabric.loadSVGFromURL(src, (objects, options) => {\n    let obj = fabric.util.groupSVGElements(objects, options);\n    obj.set({\n      ...position,\n      ...(type !== \"shapes\" ? { fromImgShape: true } : {}),\n    });\n    obj.scaleToWidth(90);\n    canvas.add(obj);\n    canvas.setActiveObject(obj);\n    canvas.renderAll();\n  });\n};\n","import React from \"react\";\nimport { Button, Panel, Select } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport starIcon from \"./assets/star.svg\";\nimport { SHAPES } from \"./shapes\";\nimport { FRUITS } from \"./fruits\";\nimport { drawImg } from \"./duck/operations\";\nimport styles from \"./Figures.module.css\";\n\nconst figures: any = {\n  shapes: SHAPES,\n  fruits: FRUITS,\n};\n\nconst Figures: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const [figuresType, setFiguresType] = React.useState(\"shapes\");\n  const { canvas, dispatch } = React.useContext(AppContext);\n\n  const shapeClickHandler = (src: string) => {\n    dispatch(setMode({ mode: \"hand\" }));\n    drawImg(canvas, src, figuresType);\n  };\n\n  return (\n    <>\n      <Button onClick={() => setOpened(true)}>\n        <img src={starIcon} alt=\"\" />\n      </Button>\n      <Panel\n        title=\"Image Library\"\n        opened={opened}\n        onClose={() => setOpened(false)}\n      >\n        <Select\n          className={styles.select}\n          onChange={(e: any) => setFiguresType(e.target.value)}\n        >\n          <option value=\"shapes\">Shapes</option>\n          <option value=\"fruits\">Fruits</option>\n        </Select>\n        <div className={styles.shapeList}>\n          {figures[figuresType].map((shape: any) => (\n            <button\n              onClick={() => shapeClickHandler(shape.src)}\n              key={shape.title}\n              className={styles.shape}\n            >\n              <img src={shape.src} alt=\"\" />\n            </button>\n          ))}\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Figures;\n","export default __webpack_public_path__ + \"static/media/text.fc450231.svg\";","import { fabric as FabricType } from \"fabric\";\nimport { randomPosition } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const appendText = (canvas: FabricType.Canvas, color: string): void => {\n  const position = randomPosition();\n  const itext = new fabric.IText(\"\", {\n    ...position,\n    fontSize: 28,\n    lineHeight: 0.95,\n    fill: color,\n    fontFamily: \"Tahoma\",\n    cursorColor: \"black\",\n    textAlign: \"center\",\n  });\n\n  canvas.add(itext);\n  canvas.setActiveObject(itext);\n  itext.enterEditing();\n  canvas.renderAll();\n};\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport { Button } from \"components\";\nimport icon from \"./assets/text.svg\";\nimport { appendText } from \"./duck/operations\";\n\nconst Text: React.FC = () => {\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  const textHandler = () => {\n    appendText(canvas, currentColor);\n    dispatch(setMode({ mode: \"hand\" }));\n  };\n\n  return (\n    <Button onClick={textHandler}>\n      <img src={icon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Text;\n","import bg1 from \"./bg1.svg\";\nimport bg2 from \"./bg2.svg\";\nimport bg3 from \"./bg3.svg\";\n\nexport const BACKGROUNDS = [bg1, bg2, bg3];\n\nexport const BACKGROUND_COLORS = [\n  \"white\",\n  \"black\",\n  \"#3cb5ff\",\n  \"#bce8f1\",\n  \"#f4e796\",\n  \"#c1beec\",\n];\n","export default __webpack_public_path__ + \"static/media/bg1.981d1d53.svg\";","export default __webpack_public_path__ + \"static/media/bg2.402b432f.svg\";","export default __webpack_public_path__ + \"static/media/bg3.782e88f7.svg\";","export default __webpack_public_path__ + \"static/media/picture.b59a650c.svg\";","import React from \"react\";\nimport { Button, Panel } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { BACKGROUNDS, BACKGROUND_COLORS } from \"./assets\";\nimport starIcon from \"./assets/picture.svg\";\nimport styles from \"./Background.module.css\";\n\nconst { fabric } = window;\n\nconst Background: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const { canvas, state } = React.useContext(AppContext);\n  const { width, height } = state;\n\n  const backgroundHandler = (src: string): void => {\n    fabric.Image.fromURL(src, (img: any) => {\n      canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n        scaleX: width / img.width,\n        scaleY: height / img.height,\n        // @ts-ignore\n        erasable: false,\n      });\n    });\n  };\n\n  const backgroundColorHandler = (color: string): void => {\n    canvas.setBackgroundImage(\n      new fabric.Image(\"\"),\n      canvas.renderAll.bind(canvas)\n    );\n    // @ts-ignore\n    canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas), {\n      erasable: false,\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={() => setOpened(true)}>\n        <img src={starIcon} alt=\"\" />\n      </Button>\n      <Panel\n        title=\"Background\"\n        opened={opened}\n        onClose={() => setOpened(false)}\n      >\n        <div className={styles.backgroundList}>\n          {BACKGROUNDS.map((background: string) => (\n            <button\n              onClick={() => backgroundHandler(background)}\n              key={background}\n              className={styles.background}\n            >\n              <img src={background} alt=\"\" />\n            </button>\n          ))}\n        </div>\n        <div className={styles.backgroundList}>\n          {BACKGROUND_COLORS.map((color: string) => (\n            <button\n              onClick={() => backgroundColorHandler(color)}\n              key={color}\n              className={styles.backgroundColor}\n              style={{ backgroundColor: color }}\n            />\n          ))}\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Background;\n","export default __webpack_public_path__ + \"static/media/char.7bb36b6f.svg\";","export const CHARS = [\"\", \"\", \"\", \"\", \"\", \"\"];","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport charIcon from \"./assets/char.svg\";\nimport { CHARS } from \"./duck/constants\";\nimport { insertChar } from \"./duck/operations\";\nimport styles from \"./SpecialChars.module.css\";\n\nconst SpecialChars: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  const openHandler = () => {\n    setOpened(!opened);\n  };\n\n  return (\n    <>\n      {opened && (\n        <div className={styles.charList}>\n          {CHARS.map((char: string) => (\n            <Button\n              onClick={() => insertChar(canvas, char)}\n              key={char}\n              className={styles.char}\n            >\n              {char}\n            </Button>\n          ))}\n        </div>\n      )}\n      <Button active={opened} onClick={openHandler}>\n        <img src={charIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default SpecialChars;\n","// @ts-nocheck\nimport { fabric } from \"fabric\";\n\nexport const insertChar = (canvas: fabric.Canvas, char: string): void => {\n  const activeObject = canvas.getActiveObject();\n\n  if (\n    activeObject &&\n    activeObject.type === \"i-text\" &&\n    activeObject.isEditing\n  ) {\n    const caretStart = activeObject.selectionStart;\n    const caretEnd = activeObject.selectionEnd;\n    activeObject.insertChars(char, null, caretStart, caretEnd);\n    activeObject.selectionStart = caretStart + 1;\n    activeObject.selectionEnd = caretStart + 1;\n    canvas.renderAll();\n  }\n};\n","import { randomPosition } from \"duck/utils\";\nimport { fabric as FabricType } from \"fabric\";\n\nconst { fabric } = window;\n\nexport const insertFraction = (\n  canvas: FabricType.Canvas,\n  currentColor: string,\n  numerator: string,\n  denominator: string\n): void => {\n  if (numerator && denominator) {\n    const length =\n      numerator.length > denominator.length\n        ? numerator.length\n        : denominator.length;\n    const viewBoxWidth = length * 12;\n    const position = randomPosition();\n    const svgContainer = `<svg viewBox=\"0 0 ${viewBoxWidth} 85\">\n            <line x1=\"0\" y1=\"45\" x2=\"${viewBoxWidth}\" y2=\"45\" stroke=\"${currentColor}\" stroke-width=\"2\" />\n            <text text-anchor=\"middle\" x=\"${\n              viewBoxWidth / 2\n            }\" y=\"38\" font-size=\"24px\" fill=\"${currentColor}\">${numerator}</text>\n            <text text-anchor=\"middle\" x=\"${\n              viewBoxWidth / 2\n            }\" y=\"70\" font-size=\"24px\" fill=\"${currentColor}\">${denominator}</text>\n        </svg>`;\n\n    fabric.loadSVGFromString(svgContainer, (objects, options) => {\n      let obj = fabric.util.groupSVGElements(objects, options);\n      obj.set({\n        ...position,\n      });\n      canvas.add(obj);\n      canvas.setActiveObject(obj);\n      canvas.renderAll();\n    });\n  }\n};\n","export default __webpack_public_path__ + \"static/media/fraction.f6677d83.svg\";","import React from \"react\";\nimport { Button, Panel } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { insertFraction } from \"./duck/operations\";\nimport fractionIcon from \"./assets/fraction.svg\";\nimport styles from \"./Fraction.module.css\";\n\nconst Fraction: React.FC = () => {\n  const [fraction, setFraction] = React.useState({\n    numerator: \"\",\n    denominator: \"\",\n  });\n  const [opened, setOpened] = React.useState(false);\n  const { canvas, state } = React.useContext(AppContext);\n  const focusInputRef = React.useRef<HTMLInputElement>(null);\n  const { currentColor } = state;\n\n  const handlerInsert = (): void => {\n    insertFraction(\n      canvas,\n      currentColor,\n      fraction.numerator,\n      fraction.denominator\n    );\n  };\n\n  const handleClose = (): void => {\n    setOpened(false);\n    setFraction({ numerator: \"\", denominator: \"\" });\n  };\n\n  const openPanelHandler = (): void => {\n    setOpened(true);\n  };\n\n  const transitionEndHandler = (): void => {\n    if (opened) {\n      focusInputRef.current?.focus();\n    }\n  };\n\n  return (\n    <>\n      <Button>\n        <img src={fractionIcon} alt=\"\" onClick={openPanelHandler} />\n      </Button>\n      <Panel\n        title=\"Insert Fraction\"\n        opened={opened}\n        onClose={handleClose}\n        onTransitionEnd={transitionEndHandler}\n      >\n        <div className={styles.wrapper}>\n          <input\n            ref={focusInputRef}\n            value={fraction.numerator}\n            style={{ color: currentColor }}\n            onChange={(e) =>\n              setFraction({ ...fraction, numerator: e.target.value })\n            }\n          />\n          <div\n            className={styles.separator}\n            style={{ backgroundColor: currentColor }}\n          />\n          <input\n            value={fraction.denominator}\n            style={{ color: currentColor }}\n            onChange={(e) =>\n              setFraction({ ...fraction, denominator: e.target.value })\n            }\n          />\n          <Button onClick={handlerInsert} className={styles.insertButton}>\n            Insert\n          </Button>\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Fraction;\n","import React from \"react\";\nimport {\n  Drawing,\n  Hand,\n  Figures,\n  Text,\n  Background,\n  SpecialChars,\n  Fraction\n} from \"./components\";\nimport styles from \"./RightControlPanel.module.css\";\n\nconst RightControlPanel: React.FC = () => (\n  <div className={styles.wrapper}>\n    <Hand />\n    <Drawing />\n    <Text />\n    <SpecialChars />\n    <Fraction />\n    <Background />\n    <Figures />\n  </div>\n);\n\nexport default RightControlPanel;\n","import { fabric as FabricType } from \"fabric\";\nimport { HistoryConfig } from \"./types\";\n\nexport const updateCanvasState = (\n  canvas: FabricType.Canvas,\n  historyConfig: HistoryConfig,\n  setDisabled: any\n) => {\n  if (!historyConfig.undoStatus && !historyConfig.redoStatus) {\n    const canvasAsJson = canvas.toJSON();\n    if (\n      historyConfig.currentStateIndex !== 0 &&\n      historyConfig.currentStateIndex < historyConfig.canvasState.length - 1\n    ) {\n      const indexToBeInserted = historyConfig.currentStateIndex + 1;\n      const numberOfElementsToRetain = indexToBeInserted + 1;\n      historyConfig.canvasState[indexToBeInserted] = canvasAsJson;\n      historyConfig.canvasState = historyConfig.canvasState.splice(\n        0,\n        numberOfElementsToRetain\n      );\n    } else {\n      // @ts-ignore\n      if (canvasAsJson.objects.length > 0) {\n        historyConfig.canvasState.push(canvasAsJson);\n      }\n    }\n    historyConfig.currentStateIndex = historyConfig.canvasState.length - 1;\n\n    if (historyConfig.currentStateIndex !== -1) {\n      setDisabled(() => ({\n        undo: historyConfig.canvasState.length === 0,\n        redo: true,\n      }));\n    }\n  }\n};\n\nexport const undo = (\n  canvas: FabricType.Canvas,\n  historyConfig: HistoryConfig,\n  setDisabled: any\n): void => {\n  if (historyConfig.undoFinishedStatus) {\n    if (historyConfig.currentStateIndex === -1) {\n      historyConfig.undoStatus = false;\n    } else {\n      if (historyConfig.canvasState.length >= 1) {\n        historyConfig.undoFinishedStatus = 0;\n        if (historyConfig.currentStateIndex !== 0) {\n          historyConfig.undoStatus = true;\n          canvas.loadFromJSON(\n            historyConfig.canvasState[historyConfig.currentStateIndex - 1],\n            () => {\n              fireEvent(\n                canvas,\n                historyConfig.canvasState[historyConfig.currentStateIndex],\n                historyConfig.canvasState[historyConfig.currentStateIndex - 1],\n                \"undo\"\n              );\n              canvas.renderAll();\n              historyConfig.undoStatus = false;\n              historyConfig.currentStateIndex -= 1;\n              historyConfig.undoFinishedStatus = 1;\n              setDisabled(() => ({\n                undo: false,\n                redo:\n                  historyConfig.currentStateIndex ===\n                  historyConfig.canvasState.length - 1,\n              }));\n            }\n          );\n        } else if (historyConfig.currentStateIndex === 0) {\n          fireEvent(\n            canvas,\n            historyConfig.canvasState[historyConfig.currentStateIndex],\n            { ...historyConfig.canvasState[0], objects: [] },\n            \"undo\"\n          );\n          historyConfig.undoFinishedStatus = 1;\n          canvas.remove(...canvas.getObjects());\n          setDisabled(() => ({\n            undo: true,\n            redo: false,\n          }));\n          historyConfig.currentStateIndex = -1;\n        }\n      }\n    }\n  }\n};\n\nexport const redo = (\n  canvas: FabricType.Canvas,\n  historyConfig: HistoryConfig,\n  setDisabled: any\n): void => {\n  if (historyConfig.redoFinishedStatus) {\n    if (\n      historyConfig.currentStateIndex ===\n        historyConfig.canvasState.length - 1 &&\n      historyConfig.currentStateIndex !== -1\n    ) {\n      setDisabled((disableState: any) => ({\n        ...disableState,\n        redo: true,\n      }));\n    } else {\n      if (\n        historyConfig.canvasState.length > historyConfig.currentStateIndex &&\n        historyConfig.canvasState.length !== 0\n      ) {\n        historyConfig.redoFinishedStatus = 0;\n        historyConfig.redoStatus = true;\n        canvas.loadFromJSON(\n          historyConfig.canvasState[historyConfig.currentStateIndex + 1],\n          () => {\n            fireEvent(\n              canvas,\n              historyConfig.canvasState[historyConfig.currentStateIndex],\n              historyConfig.canvasState[historyConfig.currentStateIndex + 1],\n              \"redo\"\n            );\n            canvas.renderAll();\n            historyConfig.redoStatus = false;\n            historyConfig.currentStateIndex += 1;\n            setDisabled(() => ({\n              undo: historyConfig.currentStateIndex === -1,\n              redo:\n                historyConfig.currentStateIndex ===\n                  historyConfig.canvasState.length - 1 &&\n                historyConfig.currentStateIndex !== -1,\n            }));\n            historyConfig.redoFinishedStatus = 1;\n          }\n        );\n      }\n    }\n  }\n};\n\nconst fireEvent = (\n  canvas: FabricType.Canvas,\n  prevState: any,\n  newState: any,\n  eventType: \"redo\" | \"undo\"\n): void => {\n  const delta: any = {};\n  const prevObjects = prevState?.objects || [];\n  const newObjects = newState.objects;\n\n  if (newObjects.length > prevObjects.length) {\n    delta.actionType = \"added\";\n\n    newObjects.forEach((object: any, index: number) => {\n      if (!prevObjects[index]) {\n        delta.object = object;\n      }\n    });\n  }\n\n  if (newObjects.length < prevObjects.length) {\n    delta.actionType = \"removed\";\n\n    prevObjects.forEach((object: any, index: number) => {\n      if (!newObjects[index]) {\n        delta.object = object;\n      }\n    });\n  }\n\n  if (newObjects.length === prevObjects.length) {\n    delta.actionType = \"modified\";\n\n    newObjects.forEach((object: any, index: number) => {\n      if (JSON.stringify(object) !== JSON.stringify(prevObjects[index])) {\n        delta.object = object;\n      }\n    });\n  }\n\n  if (newObjects.length === 0) {\n    delta.actionType = \"removed\";\n    delta.object = prevObjects[0];\n  }\n\n  canvas.fire(`history:${eventType}`, { ...delta });\n};\n","import { HistoryConfig } from \"./types\";\n\nexport const initialConfig: HistoryConfig = {\n  canvasState: [],\n  currentStateIndex: -1,\n  undoStatus: false,\n  redoStatus: false,\n  undoFinishedStatus: 1,\n  redoFinishedStatus: 1,\n};\n","export default __webpack_public_path__ + \"static/media/undo.c0720610.svg\";","export default __webpack_public_path__ + \"static/media/redo.cfafd4e4.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { updateCanvasState, undo, redo } from \"./duck/operations\";\nimport { initialConfig } from \"./duck/constants\";\nimport { HistoryConfig } from \"./duck/types\";\nimport undoIcon from \"./assets/undo.svg\";\nimport redoIcon from \"./assets/redo.svg\";\n\nconst UndoRedo: React.FC = () => {\n  const configRef = React.useRef<HistoryConfig>(initialConfig);\n  const [disabled, setDisabled] = React.useState<any>({\n    undo: true,\n    redo: true,\n  });\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    const canvasStateHandler = () =>\n      updateCanvasState(canvas, configRef.current, setDisabled);\n\n    canvas.on(\"object:erased\", canvasStateHandler);\n    canvas.on(\"object:modified\", canvasStateHandler);\n    canvas.on(\"object:added\", canvasStateHandler);\n    canvas.on(\"object:removed\", canvasStateHandler);\n\n    return () => {\n      canvas.off(\"object:erased\", canvasStateHandler);\n      canvas.off(\"object:modified\", canvasStateHandler);\n      canvas.off(\"object:added\", canvasStateHandler);\n      canvas.off(\"object:removed\", canvasStateHandler);\n    };\n  }, [canvas]);\n\n  return (\n    <>\n      <Button\n        disabled={disabled.undo}\n        onClick={() => undo(canvas, configRef.current, setDisabled)}\n      >\n        <img src={undoIcon} alt=\"\" />\n      </Button>\n      <Button\n        disabled={disabled.redo}\n        onClick={() => redo(canvas, configRef.current, setDisabled)}\n      >\n        <img src={redoIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default UndoRedo;\n","export default __webpack_public_path__ + \"static/media/fullscreen.24771eb9.svg\";","export default __webpack_public_path__ + \"static/media/minimize.43572175.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { setFullscreen } from \"duck/actions\";\nimport { AppContext } from \"duck/context\";\nimport fullscreenIcon from \"./assets/fullscreen.svg\";\nimport minimizeIcon from \"./assets/minimize.svg\";\n\nconst Fullscreen: React.FC = () => {\n  const { canvas, state, dispatch } = React.useContext(AppContext);\n  const { fullscreen, width, height } = state;\n\n  const fullscreenHandler = () => {\n    canvas.setDimensions({\n      ...(!fullscreen\n        ? {\n            width: window.innerWidth,\n            height: window.innerHeight,\n          }\n        : {\n            width,\n            height,\n          }),\n    });\n\n    const zoom = window.innerWidth / width;\n    canvas.setZoom(!fullscreen ? zoom : 1);\n    dispatch(setFullscreen({ fullscreen: !fullscreen }));\n  };\n\n  return (\n    <Button active={fullscreen} onClick={fullscreenHandler}>\n      <img src={fullscreen ? minimizeIcon : fullscreenIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Fullscreen;\n","import React from \"react\";\nimport { Fullscreen, UndoRedo } from \"./components\";\nimport styles from \"./LeftControlPanel.module.css\";\n\nconst LeftControlPanel: React.FC = () => {\n  return (\n    <div className={styles.wrapper}>\n      <Fullscreen />\n      <UndoRedo />\n    </div>\n  );\n};\n\nexport default LeftControlPanel;\n","import { fabric as FabricType } from \"fabric\";\n\nexport const getPosition = (\n  target: any,\n  canvas: FabricType.Canvas\n): { top: number; left: number } => {\n  const center = target.getCenterPoint();\n  const zoom = canvas.getZoom();\n  const canvasHeight = canvas.getHeight();\n  let top = (15 + center.y + (target.height * target.scaleY) / 2) * zoom;\n\n  // change menu position from bottom to top\n  if (top + 30 > canvasHeight) {\n    top = (center.y - 95 - (target.height * target.scaleY) / 2) * zoom;\n  }\n\n  return {\n    top,\n    left: center.x * zoom,\n  };\n};\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { changeActiveObjectColor } from \"duck/operations\";\nimport { Button } from \"components\";\n\nconst ColorApply: React.FC = () => {\n  const { canvas, state } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  const setColorHandler = () => {\n    changeActiveObjectColor(canvas, currentColor);\n  };\n\n  return (\n    <Button\n      onClick={setColorHandler}\n      style={{ backgroundColor: currentColor }}\n    />\n  );\n};\n\nexport default ColorApply;\n","export default __webpack_public_path__ + \"static/media/delete.c022e131.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { removeSelectedObject } from \"duck/operations\";\nimport remove from \"./assets/delete.svg\";\nimport { AppContext } from \"duck/context\";\n\nconst RemoveObject: React.FC = () => {\n  const { canvas, dispatch } = React.useContext(AppContext);\n\n  const removeHandler = () => {\n    const activeObject = canvas.getActiveObject();\n    removeSelectedObject(canvas, activeObject, dispatch);\n  };\n\n  return (\n    <Button onClick={removeHandler}>\n      <img src={remove} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default RemoveObject;\n","export default __webpack_public_path__ + \"static/media/copy.15beb7fb.svg\";","// @ts-nocheck\nimport React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport copy from \"./assets/copy.svg\";\n\nconst Copy: React.FC = () => {\n  const { canvas } = React.useContext(AppContext);\n\n  const copyHandler = () => {\n    const activeObject = canvas.getActiveObject();\n    activeObject.clone((cloned: any) => {\n      canvas.discardActiveObject();\n      cloned.set({\n        top: cloned.top + 8,\n        left: cloned.left + 8,\n        ...(activeObject.fromSVG ? { fromSVG: true } : {}),\n        ...(activeObject.fromImgShape ? { fromImgShape: true } : {}),\n        ...(activeObject.brushType\n          ? { brushType: activeObject.brushType }\n          : {}),\n      });\n\n      if (cloned.type === \"activeSelection\") {\n        cloned.canvas = canvas;\n        cloned.forEachObject((obj: any, index: number) => {\n          const clonedObject = activeObject.getObjects()[index];\n\n          if (clonedObject.fromSVG) {\n            obj.set({\n              fromSVG: true,\n            });\n          }\n          if (clonedObject.brushType) {\n            obj.set({\n              brushType: clonedObject.brushType,\n            });\n          }\n          if (clonedObject.fromImgShape) {\n            obj.set({\n              fromImgShape: true,\n            });\n          }\n          canvas.add(obj);\n        });\n      } else {\n        canvas.add(cloned);\n      }\n      canvas.setActiveObject(cloned);\n      canvas.requestRenderAll();\n    });\n  };\n\n  return (\n    <Button onClick={copyHandler}>\n      <img src={copy} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Copy;\n","export default __webpack_public_path__ + \"static/media/bold.a0908168.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport boldIcon from \"./assets/bold.svg\";\n\nconst BoldText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().fontWeight === \"bold\") {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setBoldHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ fontWeight: \"normal\" });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ fontWeight: \"bold\" });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setBoldHandler}>\n      <img src={boldIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default BoldText;\n","export default __webpack_public_path__ + \"static/media/italic.cf5cd34d.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport italicIcon from \"./assets/italic.svg\";\n\nconst ItalicText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().fontStyle === \"italic\") {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setItalicHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ fontStyle: \"normal\" });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ fontStyle: \"italic\" });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setItalicHandler}>\n      <img src={italicIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default ItalicText;\n","export default __webpack_public_path__ + \"static/media/underline.c56bb0d2.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport underlineIcon from \"./assets/underline.svg\";\n\nconst UnderlineText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().underline) {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setUnderlineHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ underline: false });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ underline: true });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setUnderlineHandler}>\n      <img src={underlineIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default UnderlineText;\n","export default __webpack_public_path__ + \"static/media/align-left.277ba860.svg\";","export default __webpack_public_path__ + \"static/media/align-center.32449acd.svg\";","export default __webpack_public_path__ + \"static/media/align-right.f9735e6a.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport alignLeftIcon from \"./assets/align-left.svg\";\nimport alignCenterIcon from \"./assets/align-center.svg\";\nimport alignRightIcon from \"./assets/align-right.svg\";\n\nconst AlignText: React.FC = () => {\n  const [align, setAlign] = React.useState(\"center\");\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    setAlign(canvas.getActiveObject().textAlign);\n  }, [canvas]);\n\n  const alignHandler = (newAlign: string) => {\n    setAlign(newAlign);\n    // @ts-ignore\n    canvas.getActiveObject().set({ textAlign: newAlign });\n    canvas.renderAll();\n  };\n\n  return (\n    <>\n      <Button active={align === \"left\"} onClick={() => alignHandler(\"left\")}>\n        <img src={alignLeftIcon} alt=\"\" />\n      </Button>\n      <Button\n        active={align === \"center\"}\n        onClick={() => alignHandler(\"center\")}\n      >\n        <img src={alignCenterIcon} alt=\"\" />\n      </Button>\n      <Button active={align === \"right\"} onClick={() => alignHandler(\"right\")}>\n        <img src={alignRightIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default AlignText;\n","export const FONTS = [\n  \"Arial\",\n  \"Comic Sans MS\",\n  \"Courier New\",\n  \"Georgia\",\n  \"Tahoma\",\n  \"Times New Roman\",\n  \"Verdana\",\n];\n","import React from \"react\";\nimport { Select } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { FONTS } from \"./duck/constants\";\nimport styles from \"./FontText.module.css\";\n\ninterface FontTextType {}\n\nconst FontText: React.FC<FontTextType> = () => {\n  const [currentFont, setCurrentFont] = React.useState(\"\");\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    setCurrentFont(canvas.getActiveObject().fontFamily);\n  }, [canvas]);\n\n  const changeFontHandler = (e: any): void => {\n    setCurrentFont(e.target.value);\n    const activeObject = canvas.getActiveObject();\n    // @ts-ignore\n    activeObject.set({ fontFamily: e.target.value });\n    canvas.renderAll();\n  };\n\n  return (\n    <Select\n      onChange={changeFontHandler}\n      value={currentFont}\n      className={styles.wrapper}\n    >\n      {FONTS.map((font: string) => (\n        <option value={font} key={font}>\n          {font}\n        </option>\n      ))}\n    </Select>\n  );\n};\n\nexport default FontText;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { AppContext } from \"duck/context\";\nimport { getPosition } from \"./duck/utils\";\nimport { removeEmptyTextbox } from \"./duck/operations\";\nimport {\n  ColorApply,\n  RemoveObject,\n  Copy,\n  BoldText,\n  ItalicText,\n  UnderlineText,\n  AlignText,\n  FontText,\n} from \"./components\";\nimport styles from \"./ObjectMenu.module.css\";\n\nconst ObjectMenu: React.FC = () => {\n  const [selected, setSelected] = React.useState(false);\n  const [fromImgShape, setFromImgShape] = React.useState(false);\n  const [type, setType] = React.useState(\"\");\n  const [position, setPosition] = React.useState({ top: 0, left: 0 });\n  const { canvas, state } = React.useContext(AppContext);\n  const { fullscreen } = state;\n\n  const withColorApply =\n    !fromImgShape &&\n    type !== \"answerTextbox\" &&\n    type !== \"answerImage\" &&\n    type !== \"answerSvg\";\n\n  React.useEffect(() => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activeObject) {\n      setPosition(getPosition(canvas.getActiveObject(), canvas));\n    }\n  }, [fullscreen, canvas]);\n\n  React.useEffect(() => {\n    const movingHandler = (e: any) => {\n      setPosition(getPosition(e.transform.target, canvas));\n    };\n\n    const selectHandler = (e: any) => {\n      const targetObject = e.target;\n\n      if (targetObject) {\n        setType(targetObject.type);\n        setSelected(true);\n        setPosition(getPosition(targetObject, canvas));\n        targetObject.on(\"moving\", movingHandler);\n        targetObject.on(\"scaling\", movingHandler);\n\n        if (targetObject.fromImgShape) {\n          setFromImgShape(true);\n        }\n\n        // resize for i-text\n        if (targetObject.type === \"i-text\") {\n          targetObject.on(\"changed\", () => {\n            setPosition(getPosition(targetObject, canvas));\n          });\n        }\n      }\n    };\n\n    canvas.on(\"selection:created\", selectHandler);\n    canvas.on(\"selection:updated\", selectHandler);\n    canvas.on(\"selection:cleared\", (e: any) => {\n      setSelected(false);\n      setFromImgShape(false);\n      if (e.deselected) {\n        e.deselected[0].off(\"moving\", movingHandler);\n        e.deselected[0].off(\"scaling\", movingHandler);\n\n        if (e.deselected[0].type === \"i-text\") {\n          canvas.defaultCursor = \"default\";\n          e.deselected[0].off(\"changed\");\n          removeEmptyTextbox(canvas, e.deselected[0]);\n        }\n      }\n    });\n  }, [canvas]);\n\n  return (\n    <>\n      {selected && (\n        <div\n          style={{ ...position }}\n          className={classNames(styles.wrapper, {\n            [styles.withColorApply]: withColorApply,\n          })}\n        >\n          {withColorApply && <ColorApply />}\n          <RemoveObject />\n          <Copy />\n          {type === \"i-text\" && (\n            <>\n              <BoldText />\n              <ItalicText />\n              <UnderlineText />\n              <AlignText />\n              <FontText />\n            </>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ObjectMenu;\n","import { fabric as FabricType } from \"fabric\";\n\nexport const removeEmptyTextbox = (\n  canvas: FabricType.Canvas,\n  textbox: any\n): any => {\n  if (textbox.text === \"\") {\n    canvas.remove(textbox);\n    canvas.renderAll();\n  }\n};\n","import React, { CSSProperties } from \"react\";\nimport { AnswerType } from \"duck/types\";\nimport styles from \"./Answer.module.css\";\n\ninterface AnswerProps {\n  answer: AnswerType;\n}\n\nconst Answer: React.FC<AnswerProps> = ({ answer }) => {\n  const style: CSSProperties = {};\n  if (answer.width) {\n    style.width = `${answer.width}px`;\n  }\n  if (answer.height) {\n    style.height = `${answer.height}px`;\n  }\n  if (answer.type === \"textbox\") {\n    if (answer.options.fontSize) {\n      style.fontSize = `${answer.options.fontSize}px`;\n    }\n    if (answer.options.fontFamily) {\n      style.fontFamily = answer.options.fontFamily;\n    }\n    if (answer.options.fill) {\n      style.color = answer.options.fill;\n    }\n  }\n\n  const dragHandler = (dragEvent: any) => {\n    const offset = dragEvent.target.getBoundingClientRect();\n\n    dragEvent.dataTransfer.setData(\n      \"data\",\n      JSON.stringify({\n        ...answer,\n        ...{\n          offsetLeft: dragEvent.clientX - offset.left,\n          offsetTop: dragEvent.clientY - offset.top,\n        },\n      })\n    );\n  };\n\n  return (\n    <div\n      draggable\n      style={style}\n      onDragStart={dragHandler}\n      className={styles.answer}\n    >\n      {answer.type === \"image\" ? (\n        <img\n          src={answer.value}\n          width={answer.width}\n          height={answer.height}\n          alt=\"\"\n        />\n      ) : (\n        <span dangerouslySetInnerHTML={{ __html: answer.value || \"\" }} />\n      )}\n    </div>\n  );\n};\n\nexport default Answer;\n","import { fabric as FabricType } from \"fabric\";\n\nconst { fabric } = window;\n\nexport const renderAnswer = (\n  canvas: FabricType.Canvas,\n  answer: any,\n  event: any\n): void => {\n  const options = {\n    ...answer.options,\n    answerID: answer.id,\n    left: event.e.offsetX - answer.offsetLeft,\n    top: event.e.offsetY - answer.offsetTop,\n  };\n\n  let type = answer.type;\n\n  // Check if string contains HTML tags, and if so, change type to \"svg\"\n  if (type === \"textbox\" && /<[a-z][\\s\\S]*>/i.test(answer.value)) {\n    type = \"svg\";\n  }\n\n  if (type === \"textbox\") {\n    // @ts-ignore\n    const answerText = new fabric.AnswerTextbox(answer.value, options);\n    canvas.add(answerText);\n  }\n\n  if (type === \"image\") {\n    // @ts-ignore\n    const answerImage = new fabric.AnswerImage(answer.value, {\n      ...options,\n    });\n    canvas.add(answerImage);\n  }\n\n  if (type === \"svg\") {\n    // @ts-ignore\n    const answerImage = new fabric.AnswerSvg(answer.value, {\n      ...options,\n    });\n    canvas.add(answerImage);\n  }\n\n  canvas.renderAll();\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { addUsedAnswer, removeUsedAnswer } from \"duck/actions\";\nimport { AnswerType } from \"duck/types\";\nimport { AppContext } from \"duck/context\";\nimport { Answer } from \"./components\";\nimport { renderAnswer } from \"./duck/operations\";\n\ninterface AnswersType {\n  target: any;\n}\n\nconst Answers: React.FC<AnswersType> = ({ target }) => {\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { answers, usedAnswers } = state;\n\n  React.useEffect(() => {\n    canvas.on(\"drop\", (event: any) => {\n      event.e.preventDefault();\n      const answer = JSON.parse(event.e.dataTransfer.getData(\"data\"));\n      renderAnswer(canvas, answer, event);\n      dispatch(addUsedAnswer({ usedAnswer: answer.id }));\n    });\n  }, [canvas, dispatch]);\n\n  React.useEffect(() => {\n    const undoRedoHandler = (e: any) => {\n      if (e.object.answerID) {\n        if (\n          e.actionType === \"added\" &&\n          !usedAnswers.includes(e.object.answerID)\n        ) {\n          dispatch(addUsedAnswer({ usedAnswer: e.object.answerID }));\n        }\n\n        if (\n          e.actionType === \"removed\" &&\n          usedAnswers.includes(e.object.answerID)\n        ) {\n          dispatch(removeUsedAnswer({ usedAnswer: e.object.answerID }));\n        }\n      }\n    };\n\n    canvas.on(\"history:undo\", undoRedoHandler);\n    canvas.on(\"history:redo\", undoRedoHandler);\n\n    return () => {\n      canvas.off(\"history:undo\", undoRedoHandler);\n      canvas.off(\"history:undo\", undoRedoHandler);\n    };\n  }, [canvas, dispatch, usedAnswers]);\n\n  return ReactDOM.createPortal(\n    <>\n      {answers\n        .sort((a, b) => a.sort - b.sort)\n        .filter((answer: AnswerType) => !usedAnswers.includes(`${answer.id}`))\n        .map((answer: AnswerType, index: number) => (\n          <Answer key={answer.id || index} answer={answer} />\n        ))}\n    </>,\n    target.current\n  );\n};\n\nexport default Answers;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { getId } from \"duck/utils\";\nimport { AppContext } from \"duck/context\";\nimport appReducer from \"duck/reducer\";\nimport appState from \"duck/state\";\nimport { CANVAS_SETTINGS } from \"duck/constants\";\nimport { setSketchSettings } from \"duck/operations\";\nimport { setAnswers, setHeight, setUsedAnswers, setWidth } from \"duck/actions\";\nimport { AnswerType } from \"duck/types\";\nimport {\n  ColorPickerPanel,\n  ObjectMenu,\n  RightControlPanel,\n  LeftControlPanel,\n  Answers,\n} from \"./components\";\nimport styles from \"./Sketch.module.css\";\n\nconst { fabric } = window;\n\ninterface SketchProps {\n  id?: string;\n  initialValue?: string;\n  onChange?: (value: string) => void;\n  editable?: boolean;\n  width?: number;\n  height?: number;\n  answers?: AnswerType[];\n  hasCrop?: boolean;\n}\n\nconst Sketch: React.FC<SketchProps> = ({\n  id,\n  onChange,\n  initialValue,\n  width,\n  height,\n  answers,\n}) => {\n  const [state, dispatch] = React.useReducer(appReducer, appState);\n  const [init, setInit] = React.useState(false);\n  const canvasIdRef = React.useRef<string>(id || getId());\n  const sketchRef = React.useRef<any>(null);\n  const answersRef = React.useRef<HTMLDivElement>(null);\n  const { fullscreen } = state;\n\n  React.useEffect(() => {\n    if (canvasIdRef.current) {\n      sketchRef.current = new fabric.Canvas(canvasIdRef.current, {\n        ...CANVAS_SETTINGS,\n        ...(width ? { width } : {}),\n        ...(height ? { height } : {}),\n      });\n      setSketchSettings(sketchRef.current, dispatch);\n      setInit(true);\n\n      if (initialValue) {\n        const values = JSON.parse(initialValue);\n\n        sketchRef.current.loadFromJSON(values, () => {\n          sketchRef.current.renderAll();\n        });\n\n        const usedAnswers = values.objects.map(\n          (answer: any) => answer.answerID\n        );\n\n        dispatch(setUsedAnswers({ usedAnswers }));\n      }\n\n      if (width) {\n        dispatch(setWidth({ width }));\n      }\n\n      if (height) {\n        dispatch(setHeight({ height }));\n      }\n\n      if (answers) {\n        dispatch(setAnswers({ answers }));\n      }\n\n      sketchRef.current.on(\"after:render\", () => {\n        if (typeof onChange === \"function\") {\n          onChange(sketchRef.current.toJSON());\n        }\n      });\n    }\n  }, [onChange, initialValue, width, height, answers, dispatch]);\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        margin: \"0 auto\",\n        width: width || CANVAS_SETTINGS.width,\n        height: height || CANVAS_SETTINGS.height,\n      }}\n    >\n      <div\n        className={classNames(styles.canvasWrapper, {\n          [styles.fullscreen]: fullscreen,\n        })}\n      >\n        <canvas id={canvasIdRef.current} />\n        {init && (\n          <AppContext.Provider\n            value={{ canvas: sketchRef.current, dispatch, state }}\n          >\n            <LeftControlPanel />\n            <ColorPickerPanel />\n            <RightControlPanel />\n            <ObjectMenu />\n            <Answers target={answersRef} />\n          </AppContext.Provider>\n        )}\n      </div>\n      <div ref={answersRef} className={styles.answers} />\n    </div>\n  );\n};\n\nexport default Sketch;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Sketch from \"./sketch\";\nimport { answers } from \"./duck/constants\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Sketch\n      width={800}\n      height={550}\n      answers={answers}\n    />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}