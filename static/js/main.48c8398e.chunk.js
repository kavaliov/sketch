(this.webpackJsonpsketch=this.webpackJsonpsketch||[]).push([[0],[,,,,,,,function(e,t,n){e.exports={panel:"Drawing_panel__2o_TQ",brushSize:"Drawing_brushSize__aLRaj",exampleWrapper:"Drawing_exampleWrapper__3TzB5",example:"Drawing_example__2VsWC",exampleText:"Drawing_exampleText__ETlUH",brushes:"Drawing_brushes__2BT4B",brush:"Drawing_brush__2P9t4",active:"Drawing_active__2g9G-",leaves:"Drawing_leaves__hypIS",slider:"Drawing_slider__pHZbj",thumb:"Drawing_thumb__2xpH_",value:"Drawing_value__3uPDE"}},function(e,t,n){e.exports={wrapper:"Panel_wrapper__o97Tj",header:"Panel_header__1ho3T",title:"Panel_title__gMfhr",close:"Panel_close__3SCzl",opened:"Panel_opened__1xDq5"}},,function(e,t,n){e.exports={backgroundList:"Background_backgroundList__3Q63z",background:"Background_background__2waWn",backgroundColor:"Background_backgroundColor__11qqf"}},function(e,t,n){e.exports={answers:"Sketch_answers__2XJOF",canvasWrapper:"Sketch_canvasWrapper__Mvkdt",fullscreen:"Sketch_fullscreen__3tgqX"}},,,,function(e,t,n){e.exports={wrapper:"Button_wrapper__1oiSI",active:"Button_active__1Qvou",disabled:"Button_disabled__nbT6h"}},function(e,t,n){e.exports={wrapper:"ColorHistory_wrapper__2Ecmf",color:"ColorHistory_color__mlCe6"}},function(e,t,n){e.exports={select:"Figures_select__1KLhn",shapeList:"Figures_shapeList__x2KT2",shape:"Figures_shape__ub_sG"}},function(e,t,n){e.exports={wrapper:"Fraction_wrapper__drGCQ",separator:"Fraction_separator__1j604",insertButton:"Fraction_insertButton__pLNCq"}},function(e,t,n){e.exports={wrapper:"ObjectMenu_wrapper__pEbwy",withColorApply:"ObjectMenu_withColorApply__2MbWx",withoutCopy:"ObjectMenu_withoutCopy__3hOz0"}},,function(e,t,n){e.exports={wrapper:"Eyedropper_wrapper__3_CV9",colorView:"Eyedropper_colorView__2Ppen"}},function(e,t,n){e.exports={wrapper:"ColorPicker_wrapper__1LHHr",pointer:"ColorPicker_pointer__1gLq0"}},function(e,t,n){e.exports={charList:"SpecialChars_charList__jsD3R",char:"SpecialChars_char__3qn65"}},function(e,t,n){e.exports={wrapper:"Select_wrapper__1Vf5h"}},function(e,t,n){e.exports={pickerWrapper:"ColorPicker_pickerWrapper__1gQeM",picker:"ColorPicker_picker__NHuPG",pointer:"ColorPicker_pointer__2vrFs"}},,function(e,t,n){e.exports={wrapper:"RightControlPanel_wrapper__3PtuO"}},function(e,t,n){e.exports={wrapper:"LeftControlPanel_wrapper__2Xh4t"}},function(e,t,n){e.exports={wrapper:"FontText_wrapper__1LKYP"}},function(e,t,n){e.exports={answer:"Answer_answer__3lvrs"}},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(12),i=n.n(c),s=n(4),o=n(2),l=n(3),u=n(6),d=n.n(u),h=518,f=970,b="#fffff",p=8,g="circle",j="rgba(232, 248, 255, 0.1)",m="#cef0fe",v=1,x="#ff0000",w={height:h,width:f,backgroundColor:b},O=function(e,t){var n=e.replace("#",""),a=parseInt(n.substring(0,2),16),r=parseInt(n.substring(2,4),16),c=parseInt(n.substring(4,6),16);return"rgba(".concat(a,",").concat(r,",").concat(c,",").concat(t/100,")")},S=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},_=function(){var e=f/2,t=h/2;return{top:S(t-180,t+70),left:S(e-350,e+50)}},y=function(e,t,n){return"#".concat(((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1))},C=a.createContext(null),A=n(14),k=n(5),I={currentColor:x,mode:"hand",brushType:"pencil",fullscreen:!1,width:w.width,height:w.height,answers:[],usedAnswers:[]},T=I,E=Object(k.createAction)("SKETCH/SET_CURRENT_COLOR")(),D=Object(k.createAction)("SKETCH/SET_MODE")(),N=Object(k.createAction)("SKETCH/SET_BRUSH")(),F=Object(k.createAction)("SKETCH/SET_FULLSCREEN")(),B=Object(k.createAction)("SKETCH/SET_WIDTH")(),R=Object(k.createAction)("SKETCH/SET_HEIGHT")(),z=Object(k.createAction)("SKETCH/SET_ANSWERS")(),L=Object(k.createAction)("SKETCH/SET_USED_ANSWERS")(),M=Object(k.createAction)("SKETCH/ADD_USED_ANSWER")(),P=Object(k.createAction)("SKETCH/REMOVE_USED_ANSWER")(),H=Object(k.createReducer)(T).handleAction(E,(function(e,t){var n=t.payload.currentColor;return Object(o.a)(Object(o.a)({},e),{},{currentColor:n})})).handleAction(N,(function(e,t){var n=t.payload.brushType;return Object(o.a)(Object(o.a)({},e),{},{brushType:n})})).handleAction(D,(function(e,t){var n=t.payload.mode;return Object(o.a)(Object(o.a)({},e),{},{mode:n})})).handleAction(F,(function(e,t){var n=t.payload.fullscreen;return Object(o.a)(Object(o.a)({},e),{},{fullscreen:n})})).handleAction(B,(function(e,t){var n=t.payload.width;return Object(o.a)(Object(o.a)({},e),{},{width:n})})).handleAction(R,(function(e,t){var n=t.payload.height;return Object(o.a)(Object(o.a)({},e),{},{height:n})})).handleAction(z,(function(e,t){var n=t.payload.answers;return Object(o.a)(Object(o.a)({},e),{},{answers:n})})).handleAction(L,(function(e,t){var n=t.payload.usedAnswers;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:n})})).handleAction(M,(function(e,t){var n=t.payload.usedAnswer;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:[].concat(Object(A.a)(e.usedAnswers),[n])})})).handleAction(P,(function(e,t){var n=t.payload.usedAnswer;return Object(o.a)(Object(o.a)({},e),{},{usedAnswers:e.usedAnswers.filter((function(e){return e!==n}))})})),W=H,V=window,G=V.fabric,U=window,J=U.fabric,K=function(e,t,n){var a='<svg xmlns="http://www.w3.org/2000/svg" \n      width="'.concat(t,'" \n      height="').concat(n,'"\n      style="overflow: visible;">\n      <foreignObject width="100%" height="100%">\n        ').concat(e,"\n      </foreignObject>\n    </svg>"),r=window.URL||window.webkitURL||window,c=new Blob([a],{type:"image/svg+xml"});return r.createObjectURL(c)},q=window.fabric,X=function(e,t){e&&(q.Object.prototype.cornerStyle=g,q.Object.prototype.cornerSize=p,e.selectionColor=j,e.selectionBorderColor=m,e.selectionLineWidth=v,e.setBackgroundColor("white",e.renderAll.bind(e),{erasable:!1}),G.util.trimCanvas=function(e){for(var t=e.getContext("2d"),n=e.width,a=e.height,r=[],c=[],i=t.getImageData(0,0,n,a),s=function(e,t){return e-t},o=0;o<a;o++)for(var l=0;l<n;l++)0<i.data[4*(o*n+l)+3]&&(r.push(l),c.push(o));return r.sort(s),c.sort(s),n=r[a=r.length-1]-r[0],a=c[a]-c[0],i=t.getImageData(r[0],c[0],n,a),e.width=n,e.height=a,t.putImageData(i,0,0),{x:r[0],y:c[0]}},G.Point.prototype.normalize=function(e){null!==e&&void 0!==e||(e=1);var t=this.distanceFrom({x:0,y:0});return 0<t&&(this.x=this.x/t*e,this.y=this.y/t*e),this},G.BaseBrush.prototype.convertToImg=function(){var e=this.canvas.getZoom(),t=this.canvas.getRetinaScaling(),n=G.util.copyCanvasElement(this.canvas.upperCanvasEl),a=G.util.trimCanvas(n);(n=new G.Image(n,{left:a.x/t/e,top:a.y/t/e,scaleX:1/t/e,scaleY:1/t/e})).crossOrigin="Anonymous",this.canvas.add(n),this.canvas.clearContext(this.canvas.contextTop)},G.util.getRandom=function(e,t){return t=t||0,Math.random()*((e||1)-t)+t},G.util.clamp=function(e,t,n){return"number"!==typeof n&&(n=0),e>t?t:e<n?n:e},G.CrayonBrush=G.util.createClass(G.BaseBrush,{color:"#000",opacity:.6,width:1,_baseWidth:1,_inkAmount:10,_latestStrokeLength:0,_point:null,_sep:5,_size:0,_latest:null,_drawn:!1,initialize:function(e,t){t=t||{},this.canvas=e,this.width=t.width||e.freeDrawingBrush.width,this.color=t.color||e.freeDrawingBrush.color,this.opacity=t.opacity||e.contextTop.globalAlpha,this._point=new G.Point(0,0)},onMouseDown:function(e){this.canvas.contextTop.globalAlpha=this.opacity,this._size=this.width/2+this._baseWidth,this._drawn=!1,this.set(e)},onMouseMove:function(e){this.update(e),this.draw(this.canvas.contextTop)},onMouseUp:function(){this._drawn&&this.convertToImg(),this._latest=null,this._latestStrokeLength=0,this.canvas.contextTop.globalAlpha=1},set:function(e){this._latest?this._latest.setFromPoint(this._point):this._latest=new G.Point(e.x,e.y),G.Point.prototype.setFromPoint.call(this._point,e)},update:function(e){this.set(e),this._latestStrokeLength=this._point.subtract(this._latest).distanceFrom({x:0,y:0})},draw:function(e){var t,n=this.canvas.getZoom(),a=this._point.subtract(this._latest),r=Math.ceil(this._size/2),c=Math.floor(a.distanceFrom({x:0,y:0})/r)+1;a.normalize(r);var i=this._sep*G.util.clamp(this._inkAmount/this._latestStrokeLength*3,1,.5),s=Math.ceil(this._size*this._sep),o=this._size/2;for(e.save(),e.fillStyle=this.color,e.beginPath(),r=0;r<s;r++)for(t=0;t<c;t++){var l=this._latest.add(a.multiply(t)),u=G.util.getRandom(o),d=G.util.getRandom(2*Math.PI),h=G.util.getRandom(i,i/2),f=G.util.getRandom(i,i/2),b=l.x+u*Math.sin(d)-h/2;l=l.y+u*Math.cos(d)-f/2,e.rect(b*n,l*n,h,f)}e.fill(),e.restore(),this._drawn=!0},_render:function(){}}),J.AnswerImage=J.util.createClass(J.Image,{type:"answerImage",initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=this;t=Object.assign({},{editable:!1},t);var r=new Image;r.onload=function(){a.setHeight(a.height||t.height||r.height),a.setWidth(a.width||t.width||r.width),a.setCoords(),a.canvas.renderAll()},r.src=e,this.callSuper("initialize",r,Object(o.a)(Object(o.a)({},t),{},{width:"",height:""})),this.scaleToHeight(t.height||r.height),this.scaleToWidth(t.width||r.width),this.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!0,tr:!0,mtr:!1}),this.lockUniScaling=!0,this.lockRotation=!0,this.set("answerID",t.answerID||""),this.set("scaledSize",{height:t.height||r.height,width:t.width||r.width}),n&&n(this)},toObject:function(){return Object.assign(this.callSuper("toObject"),{answerID:this.get("answerID"),scaledSize:this.get("scaledSize")})}}),J.AnswerImage.fromObject=function(e,t){var n=new J.AnswerImage(e.src,e,t);return n.scaleToHeight(e.scaledSize.height),n.scaleToWidth(e.scaledSize.width),n},J.AnswerSvg=J.util.createClass(J.Image,{type:"answerSvg",initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.fontSize?t.fontSize+"px":"initial",r='<span \n                      xmlns="http://www.w3.org/1999/xhtml"\n                      style="display: inline-block; \n                             width: '.concat(t.width>0?t.width+"px":"auto",";\n                             line-height: 2; \n                             color: ").concat(t.fill||"black",";\n                             font-size: ").concat(a,"; \n                             font-family: ").concat(t.fontFamily||"Arial",';"\n                    > \n\n                      ').concat(e,"\n                    </span>");document.getElementsByTagName("body")[0].append();var c=document.createElement("div");c.id="alisketch-svg-answer",c.innerHTML=r,document.body.appendChild(c);var i=c.getElementsByTagName("span")[0].getBoundingClientRect(),s=Math.ceil(i.width),l=Math.ceil(i.height);c.remove();var u=this;t=Object(o.a)(Object(o.a)({},t),{},{editable:!1});var d=new Image;d.onload=function(){u.setWidth(u.width||t.width||d.width),u.setHeight(u.height||t.height||d.height),u.setCoords(),u.canvas.renderAll()},d.src=K(r,s,l),this.callSuper("initialize",d,t),this.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!0,tr:!0,mtr:!1}),this.lockUniScaling=!0,this.lockRotation=!0,this.set("answerID",t.answerID||""),this.set("height",l||""),this.set("html",e),n&&n(this)},toObject:function(){return Object.assign(this.callSuper("toObject"),{fontFamily:this.get("fontFamily"),height:this.get("height"),answerID:this.get("answerID"),html:this.get("html")})}}),J.AnswerSvg.fromObject=function(e,t){return new J.AnswerSvg(e.html,e,t)},J.AnswerTextbox=J.util.createClass(J.Textbox,{type:"answerTextbox",initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(o.a)({editable:!1,fontSize:16,fontFamily:"Arial",fill:"black",left:e.left,top:e.top,answerID:e.answerID},t),"string"!==typeof e&&(e=e.text),e=e.replace(/<br>/g,"\n"),this.callSuper("initialize",e,t),this.setControlsVisibility({bl:!1,br:!1,mb:!1,ml:!0,mr:!0,tl:!1,tr:!1,mtr:!1}),this.lockRotation=!0,this.set("answerID",t.answerID||"")},toObject:function(){return Object.assign(this.callSuper("toObject"),{answerID:this.get("answerID")})}}),J.AnswerTextbox.fromObject=function(e,t,n){return new J.Object._fromObject("AnswerTextbox",e,t,n)},document.addEventListener("keydown",(function(n){if("Backspace"===n.key){var a=e.getActiveObject();a&&!a.isEditing&&Y(e,a,t)}})))},Y=function(e,t,n){t&&"activeSelection"===t.type?t.forEachObject((function(t){e.remove(t),t.answerID&&n(P({usedAnswer:t.answerID}))})):(e.remove(t),t.answerID&&n(P({usedAnswer:t.answerID}))),e.discardActiveObject().requestRenderAll()},Z=function(e,t){var n=e.getActiveObject();n&&("activeSelection"===n.type||"group"===n.type?n.forEachObject((function(e){Q(e,t)})):Q(n,t),e.renderAll())},Q=function(e,t){"path"!==e.type&&"line"!==e.type||e.shadow||"marker"===e.brushType||e.set({stroke:t}),"path"===e.type&&"marker"===e.brushType&&e.set({stroke:O(t,20)}),("rect"===e.type||"circle"===e.type||"ellipse"===e.type||"triangle"===e.type||"text"===e.type||"i-text"===e.type||e.fromSVG)&&e.set({fill:t}),"path"===e.type&&e.shadow&&e.set({shadow:Object(o.a)(Object(o.a)({},e.shadow),{},{color:t})}),"image"===e.type&&(e.filters[0]=new q.Image.filters.BlendColor({color:t,mode:"tint"}),e.applyFilters())},$=n.p+"static/media/close.ae19aa75.svg",ee=n(8),te=n.n(ee),ne=n(0),ae=function(e){var t=e.opened,n=e.onClose,a=e.title,r=e.children,c=e.onTransitionEnd;return Object(ne.jsxs)("div",{onTransitionEnd:c,className:d()(te.a.wrapper,Object(s.a)({},te.a.opened,t)),children:[Object(ne.jsxs)("div",{className:te.a.header,children:[Object(ne.jsx)("div",{className:te.a.title,children:a}),Object(ne.jsx)(ie,{onClick:n,className:te.a.close,children:Object(ne.jsx)("img",{src:$,alt:""})})]}),r]})},re=n(15),ce=n.n(re),ie=function(e){var t,n=e.children,a=e.onClick,r=e.className,c=e.style,i=e.active,o=void 0!==i&&i,l=e.disabled,u=void 0!==l&&l;return Object(ne.jsx)("button",{disabled:u,onClick:a,className:d()(ce.a.wrapper,r,(t={},Object(s.a)(t,ce.a.active,o),Object(s.a)(t,ce.a.disabled,u),t)),style:c,children:n})},se=n(24),oe=n.n(se),le=function(e){var t=e.children,n=e.onChange,a=e.value,r=e.className,c=e.style;return Object(ne.jsx)("select",{value:a,onChange:n,className:d()(oe.a.wrapper,r),style:c,children:t})},ue=window.fabric,de=function(e,t,n){var a=e.getContext().getImageData(Math.round((t+e.viewportTransform[4])*ue.devicePixelRatio*e.getZoom()),Math.round((n+e.viewportTransform[5])*ue.devicePixelRatio*e.getZoom()),1,1).data;return y(a[0],a[1],a[2])},he=n.p+"static/media/dropper.69cb0ffd.svg",fe=n(21),be=n.n(fe),pe=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useState({top:460,left:260}),h=Object(l.a)(d,2),f=h[0],b=h[1],p=r.a.useContext(C),g=p.canvas,j=p.dispatch,m=function(e){var t=de(g,e.pointer.x,e.pointer.y);b({top:e.pointer.y-10,left:e.pointer.x+20}),u(t)},v=function(){a(!1),g.off("mouse:down",x),g.off("mouse:move",m),function(e){e.selection=!0,e.getObjects().forEach((function(e){e.set("selectable",!0),e.hoverCursor="move"}))}(g)},x=function(e){v();var t=de(g,e.pointer.x,e.pointer.y);j(E({currentColor:t}))};return Object(ne.jsxs)(ne.Fragment,{children:[n&&Object(ne.jsx)("div",{className:be.a.colorView,style:Object(o.a)({backgroundColor:s},f)}),Object(ne.jsx)(ie,{active:n,onClick:function(){n?v():(a(!0),function(e){e.selection=!1,e.getObjects().forEach((function(e){e.set("selectable",!1),e.hoverCursor="default"}))}(g),j(D({mode:"hand"})),g.on("mouse:down",x),g.on("mouse:move",m))},className:be.a.wrapper,children:Object(ne.jsx)("img",{src:he,alt:""})})]})},ge=n(16),je=n.n(ge),me=function(){var e=r.a.useState(["",""]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C),i=c.state,s=c.dispatch,o=i.currentColor;r.a.useEffect((function(){a((function(e){return[o,e[0]]}))}),[o]);var u=function(e){s(E({currentColor:e}))};return Object(ne.jsxs)("div",{className:je.a.wrapper,children:[Object(ne.jsx)("button",{className:je.a.color,style:{backgroundColor:n[0]},onClick:function(){return u(n[0])}}),Object(ne.jsx)("button",{className:je.a.color,style:{backgroundColor:n[1]||"white"},onClick:function(){return u(n[1]||"white")}})]})},ve=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#fff","#000"],xe=function(e,t){if(e){var n=e.getContext("2d");if(n){var a=n.getImageData(t,10,1,1).data;return y(a[0],a[1],a[2])}}return"#000"},we=function(e,t,n){var a=t-e.getBoundingClientRect().left;return a<0?0:a>n?n:a},Oe=n(22),Se=n.n(Oe),_e=function(e){var t=e.width,n=e.height,a=e.onChange,c=r.a.useState(x),i=Object(l.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),d=Object(l.a)(u,2),h=d[0],f=d[1],b=r.a.useState(0),p=Object(l.a)(b,2),g=p[0],j=p[1],m=r.a.useRef(null),v=r.a.useRef(null);r.a.useEffect((function(){!function(e,t,n){if(e){var a=e.getContext("2d");if(a){var r=a.createLinearGradient(0,0,t,0);ve.forEach((function(e,t){t<ve.length-1?r.addColorStop(t/(ve.length-1),e):r.addColorStop(1,e)})),a.fillStyle=r,a.fillRect(0,0,t,n)}}}(m.current,t,n),o(xe(m.current,g))}),[n,g,t]),r.a.useEffect((function(){o(xe(m.current,g))}),[g]);return Object(ne.jsxs)("div",{ref:v,onMouseMove:function(e){h&&v.current&&j(we(v.current,e.clientX,t))},onMouseLeave:function(e){h&&(f(!1),"function"===typeof a&&a(s))},className:Se.a.wrapper,style:{width:t,height:n},children:[Object(ne.jsx)("canvas",{ref:m,onMouseDown:function(e){f(!0),v.current&&j(we(v.current,e.clientX,t))},width:t,height:n}),Object(ne.jsx)("button",{onMouseDown:function(){return f(!0)},onMouseUp:function(){f(!1),"function"===typeof a&&a(s)},className:Se.a.pointer,style:{left:g,backgroundColor:s}})]})},ye=n(25),Ce=n.n(ye),Ae=function(){var e=r.a.useContext(C),t=e.canvas,n=e.dispatch,a=e.state.currentColor;r.a.useEffect((function(){Z(t,a)}),[a,t]);return Object(ne.jsxs)("div",{className:Ce.a.pickerWrapper,children:[Object(ne.jsx)(pe,{}),Object(ne.jsx)(_e,{width:430,height:24,onChange:function(e){n(E({currentColor:e}))}}),Object(ne.jsx)(me,{})]})},ke=n(26),Ie=[{type:"eraser",icon:n.p+"static/media/brush1.4bb3634c.svg"},{type:"marker",icon:n.p+"static/media/brush2.bd74d5cf.svg"},{type:"magic",icon:n.p+"static/media/brush3.38a28f48.svg"},{type:"pencil",icon:n.p+"static/media/brush4.4c238ed7.svg"},{type:"pen",icon:n.p+"static/media/brush5.b0040eae.svg"}],Te={eraser:{min:1,max:90},marker:{min:20,max:90},magic:{min:10,max:60},pencil:{min:1,max:60},pen:{min:5,max:20}},Ee=n.p+"static/media/highlight.a5e0d7ce.svg",De=window.fabric,Ne=n(7),Fe=n.n(Ne),Be=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),u=i[0],h=i[1],f=r.a.useState(10),b=Object(l.a)(f,2),p=b[0],g=b[1],j=r.a.useContext(C),m=j.state,v=j.canvas,x=j.dispatch,w=m.currentColor,S=m.mode;r.a.useEffect((function(){var e=function(e){e.path.brushType=u,"eraser"===u&&v.fire("object:erased")};return v.on("path:created",e),v.isDrawingMode="drawing"===S,"drawing"!==S&&h(""),function(){v.off("path:created",e)}}),[S,v,u]),r.a.useEffect((function(){!function(e,t,n,a){"marker"!==t&&"magic"!==t&&"pencil"!==t||(e.freeDrawingBrush=new De.PencilBrush(e)),"eraser"===t?e.freeDrawingBrush=new De.EraserBrush(e):e.freeDrawingBrush.color=a,"pen"===t&&(e.freeDrawingBrush=new De.CrayonBrush(e)),"marker"===t&&(e.freeDrawingBrush.color=O(a,20)),"magic"===t&&(e.freeDrawingBrush.color="#fff",e.freeDrawingBrush.shadow=new De.Shadow({blur:30,affectStroke:!0,color:a})),e.freeDrawingBrush.width=n}(v,u,p,w),u&&p<Te[u].min&&g(Te[u].min),u&&p>Te[u].max&&g(Te[u].max)}),[u,v,p,w]);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{active:"drawing"===S,onClick:function(){return a(!0)},children:Object(ne.jsx)("img",{src:Ee,alt:""})}),Object(ne.jsx)(ae,{title:"Brushes",opened:n,onClose:function(){return a(!1)},children:Object(ne.jsxs)("div",{className:Fe.a.panel,children:[Object(ne.jsxs)("div",{className:Fe.a.brushSize,children:[Object(ne.jsxs)("div",{className:Fe.a.exampleWrapper,children:["marker"===u&&Object(ne.jsx)("span",{className:Fe.a.exampleText,children:"text"}),Object(ne.jsx)("div",{className:Fe.a.example,style:{width:p,height:p,border:"eraser"===u?"1px solid #c3d0e4":"none",backgroundColor:"magic"!==u&&"eraser"!==u?w:"white",opacity:"marker"===u?.2:1,boxShadow:"magic"===u?"0 0 30px ".concat(w):"none"}})]}),Object(ne.jsx)(ke.a,{className:Fe.a.slider,orientation:"vertical",value:p,renderThumb:function(e,t){return Object(ne.jsx)("div",Object(o.a)(Object(o.a)({},e),{},{className:Fe.a.thumb,children:Object(ne.jsx)("div",{className:Fe.a.value,children:t.valueNow})}))},invert:!0,min:u?Te[u].min:1,max:u?Te[u].max:60,onChange:function(e){g(e)}})]}),Object(ne.jsx)("div",{className:Fe.a.brushes,children:Ie.map((function(e){return Object(ne.jsx)("button",{onClick:function(){return t=e.type,x(D({mode:"drawing"})),void h(t);var t},className:d()(Fe.a.brush,Object(s.a)({},Fe.a.active,u===e.type)),children:Object(ne.jsx)("img",{src:e.icon,alt:""})},e.type)}))})]})})]})},Re=n.p+"static/media/hand.cf210679.svg",ze=function(){var e=r.a.useContext(C),t=e.state,n=e.dispatch;return Object(ne.jsx)(ie,{onClick:function(){n(D({mode:"hand"}))},active:"hand"===t.mode,children:Object(ne.jsx)("img",{src:Re,alt:""})})},Le=n.p+"static/media/star.10d3d0dd.svg",Me=n.p+"static/media/circle.1be35666.svg",Pe=n.p+"static/media/circle-outlined.55858944.svg",He=n.p+"static/media/rectangle.06a5077b.svg",We=n.p+"static/media/rectangle-outlined.f492c7dd.svg",Ve=n.p+"static/media/star.9acb5ada.svg",Ge=n.p+"static/media/star-outlined.0daaff4a.svg",Ue=n.p+"static/media/triangle.fbe306e2.svg",Je=n.p+"static/media/triangle-outlined.a25dd2aa.svg",Ke=n.p+"static/media/arrow-down.66902268.svg",qe=n.p+"static/media/arrow-up.c13fee86.svg",Xe=n.p+"static/media/arrow-left.6c52d128.svg",Ye=[{title:"circle",src:Me},{title:"circleOutlined",src:Pe},{title:"rectangle",src:He},{title:"rectangleOutlined",src:We},{title:"star",src:Ve},{title:"starOutlined",src:Ge},{title:"triangle",src:Ue},{title:"triangleOutlined",src:Je},{title:"arrowDown",src:Ke},{title:"arrowRight",src:n.p+"static/media/arrow-right.545fd979.svg"},{title:"arrowLeft",src:Xe},{title:"arrowUp",src:qe},{title:"thunderOutlined",src:n.p+"static/media/thunder-outlined.96c0359a.svg"},{title:"thunder",src:n.p+"static/media/thunder.ddcd8d6d.svg"},{title:"cloudOutlined",src:n.p+"static/media/cloud-outlined.c144d388.svg"},{title:"cloud",src:n.p+"static/media/cloud.eda4a7bc.svg"}],Ze=n.p+"static/media/apple.e096d285.svg",Qe=n.p+"static/media/grape.603d86e2.svg",$e=n.p+"static/media/lemon.e505d6e4.svg",et=n.p+"static/media/peach.5acec3d9.svg",tt=[{title:"lemon",src:$e},{title:"apple",src:Ze},{title:"grape",src:Qe},{title:"strawberry",src:n.p+"static/media/strawberry.8825d787.svg"},{title:"peach",src:et},{title:"watermelon",src:n.p+"static/media/watermelon.339708ac.svg"}],nt=window.fabric,at=n(17),rt=n.n(at),ct={shapes:Ye,fruits:tt},it=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState("shapes"),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useContext(C),h=d.canvas,f=d.dispatch,b=function(e){f(D({mode:"hand"})),function(e,t,n){var a=_();nt.loadSVGFromURL(t,(function(t,r){var c=nt.util.groupSVGElements(t,r);c.set(Object(o.a)(Object(o.a)({},a),"shapes"!==n?{fromImgShape:!0}:{})),c.scaleToWidth(90),e.add(c),e.setActiveObject(c),e.renderAll()}))}(h,e,s)};return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{onClick:function(){return a(!0)},children:Object(ne.jsx)("img",{src:Le,alt:""})}),Object(ne.jsxs)(ae,{title:"Image Library",opened:n,onClose:function(){return a(!1)},children:[Object(ne.jsxs)(le,{className:rt.a.select,onChange:function(e){return u(e.target.value)},children:[Object(ne.jsx)("option",{value:"shapes",children:"Shapes"}),Object(ne.jsx)("option",{value:"fruits",children:"Fruits"})]}),Object(ne.jsx)("div",{className:rt.a.shapeList,children:ct[s].map((function(e){return Object(ne.jsx)("button",{onClick:function(){return b(e.src)},className:rt.a.shape,children:Object(ne.jsx)("img",{src:e.src,alt:""})},e.title)}))})]})]})},st=n.p+"static/media/text.fc450231.svg",ot=window.fabric,lt=function(){var e=r.a.useContext(C),t=e.state,n=e.canvas,a=e.dispatch,c=t.currentColor;return Object(ne.jsx)(ie,{onClick:function(){!function(e,t){var n=_(),a=new ot.IText("",Object(o.a)(Object(o.a)({},n),{},{fontSize:28,lineHeight:.95,fill:t,fontFamily:"Tahoma",cursorColor:"black",textAlign:"center"}));e.add(a),e.setActiveObject(a),a.enterEditing(),e.renderAll()}(n,c),a(D({mode:"hand"}))},children:Object(ne.jsx)("img",{src:st,alt:""})})},ut=[n.p+"static/media/bg1.981d1d53.svg",n.p+"static/media/bg2.402b432f.svg",n.p+"static/media/bg3.782e88f7.svg"],dt=["white","black","#3cb5ff","#bce8f1","#f4e796","#c1beec"],ht=n.p+"static/media/picture.b59a650c.svg",ft=n(10),bt=n.n(ft),pt=window.fabric,gt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C),i=c.canvas,s=c.state,o=s.width,u=s.height;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{onClick:function(){return a(!0)},children:Object(ne.jsx)("img",{src:ht,alt:""})}),Object(ne.jsxs)(ae,{title:"Background",opened:n,onClose:function(){return a(!1)},children:[Object(ne.jsx)("div",{className:bt.a.backgroundList,children:ut.map((function(e){return Object(ne.jsx)("button",{onClick:function(){return t=e,void pt.Image.fromURL(t,(function(e){i.setBackgroundImage(e,i.renderAll.bind(i),{scaleX:o/e.width,scaleY:u/e.height,erasable:!1})}));var t},className:bt.a.background,children:Object(ne.jsx)("img",{src:e,alt:""})},e)}))}),Object(ne.jsx)("div",{className:bt.a.backgroundList,children:dt.map((function(e){return Object(ne.jsx)("button",{onClick:function(){return function(e){i.setBackgroundImage(new pt.Image(""),i.renderAll.bind(i)),i.setBackgroundColor(e,i.renderAll.bind(i),{erasable:!1})}(e)},className:bt.a.backgroundColor,style:{backgroundColor:e}},e)}))})]})]})},jt=n.p+"static/media/char.7bb36b6f.svg",mt=["\u2264","\u2265","\xd7","\xf7","\xb0","\u2192"],vt=n(23),xt=n.n(vt),wt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;return Object(ne.jsxs)(ne.Fragment,{children:[n&&Object(ne.jsx)("div",{className:xt.a.charList,children:mt.map((function(e){return Object(ne.jsx)(ie,{onClick:function(){return function(e,t){var n=e.getActiveObject();if(n&&"i-text"===n.type&&n.isEditing){var a=n.selectionStart,r=n.selectionEnd;n.insertChars(t,null,a,r),n.selectionStart=a+1,n.selectionEnd=a+1,e.renderAll()}}(c,e)},className:xt.a.char,children:e},e)}))}),Object(ne.jsx)(ie,{active:n,onClick:function(){a(!n)},children:Object(ne.jsx)("img",{src:jt,alt:""})})]})},Ot=window.fabric,St=n.p+"static/media/fraction.f6677d83.svg",_t=n(18),yt=n.n(_t),Ct=function(){var e=r.a.useState({numerator:"",denominator:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useState(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],d=r.a.useContext(C),h=d.canvas,f=d.state,b=r.a.useRef(null),p=f.currentColor;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{children:Object(ne.jsx)("img",{src:St,alt:"",onClick:function(){u(!0)}})}),Object(ne.jsx)(ae,{title:"Insert Fraction",opened:s,onClose:function(){u(!1),a({numerator:"",denominator:""})},onTransitionEnd:function(){var e;s&&(null===(e=b.current)||void 0===e||e.focus())},children:Object(ne.jsxs)("div",{className:yt.a.wrapper,children:[Object(ne.jsx)("input",{ref:b,value:n.numerator,style:{color:p},onChange:function(e){return a(Object(o.a)(Object(o.a)({},n),{},{numerator:e.target.value}))}}),Object(ne.jsx)("div",{className:yt.a.separator,style:{backgroundColor:p}}),Object(ne.jsx)("input",{value:n.denominator,style:{color:p},onChange:function(e){return a(Object(o.a)(Object(o.a)({},n),{},{denominator:e.target.value}))}}),Object(ne.jsx)(ie,{onClick:function(){!function(e,t,n,a){if(n&&a){var r=12*(n.length>a.length?n.length:a.length),c=_(),i='<svg viewBox="0 0 '.concat(r,' 85">\n            <line x1="0" y1="45" x2="').concat(r,'" y2="45" stroke="').concat(t,'" stroke-width="2" />\n            <text text-anchor="middle" x="').concat(r/2,'" y="38" font-size="24px" fill="').concat(t,'">').concat(n,'</text>\n            <text text-anchor="middle" x="').concat(r/2,'" y="70" font-size="24px" fill="').concat(t,'">').concat(a,"</text>\n        </svg>");Ot.loadSVGFromString(i,(function(t,n){var a=Ot.util.groupSVGElements(t,n);a.set(Object(o.a)({},c)),e.add(a),e.setActiveObject(a),e.renderAll()}))}}(h,p,n.numerator,n.denominator)},className:yt.a.insertButton,children:"Insert"})]})})]})},At=n(27),kt=n.n(At),It=function(){return Object(ne.jsxs)("div",{className:kt.a.wrapper,children:[Object(ne.jsx)(ze,{}),Object(ne.jsx)(Be,{}),Object(ne.jsx)(lt,{}),Object(ne.jsx)(wt,{}),Object(ne.jsx)(Ct,{}),Object(ne.jsx)(gt,{}),Object(ne.jsx)(it,{})]})},Tt=function(e,t,n,a){var r={},c=(null===t||void 0===t?void 0:t.objects)||[],i=n.objects;i.length>c.length&&(r.actionType="added",i.forEach((function(e,t){c[t]||(r.object=e)}))),i.length<c.length&&(r.actionType="removed",c.forEach((function(e,t){i[t]||(r.object=e)}))),i.length===c.length&&(r.actionType="modified",i.forEach((function(e,t){JSON.stringify(e)!==JSON.stringify(c[t])&&(r.object=e)}))),0===i.length&&(r.actionType="removed",r.object=c[0]),e.fire("history:".concat(a),Object(o.a)({},r))},Et={canvasState:[],currentStateIndex:-1,undoStatus:!1,redoStatus:!1,undoFinishedStatus:1,redoFinishedStatus:1},Dt=n.p+"static/media/undo.c0720610.svg",Nt=n.p+"static/media/redo.cfafd4e4.svg",Ft=function(){var e=r.a.useRef(Et),t=r.a.useState({undo:!0,redo:!0}),n=Object(l.a)(t,2),a=n[0],c=n[1],i=r.a.useContext(C).canvas;return r.a.useEffect((function(){var t=function(){return function(e,t,n){if(!t.undoStatus&&!t.redoStatus){var a=e.toJSON();if(0!==t.currentStateIndex&&t.currentStateIndex<t.canvasState.length-1){var r=t.currentStateIndex+1,c=r+1;t.canvasState[r]=a,t.canvasState=t.canvasState.splice(0,c)}else a.objects.length>0&&t.canvasState.push(a);t.currentStateIndex=t.canvasState.length-1,-1!==t.currentStateIndex&&n((function(){return{undo:0===t.canvasState.length,redo:!0}}))}}(i,e.current,c)};return i.on("object:erased",t),i.on("object:modified",t),i.on("object:added",t),i.on("object:removed",t),function(){i.off("object:erased",t),i.off("object:modified",t),i.off("object:added",t),i.off("object:removed",t)}}),[i]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{disabled:a.undo,onClick:function(){return function(e,t,n){t.undoFinishedStatus&&(-1===t.currentStateIndex?t.undoStatus=!1:t.canvasState.length>=1&&(t.undoFinishedStatus=0,0!==t.currentStateIndex?(t.undoStatus=!0,e.loadFromJSON(t.canvasState[t.currentStateIndex-1],(function(){Tt(e,t.canvasState[t.currentStateIndex],t.canvasState[t.currentStateIndex-1],"undo"),e.renderAll(),t.undoStatus=!1,t.currentStateIndex-=1,t.undoFinishedStatus=1,n((function(){return{undo:!1,redo:t.currentStateIndex===t.canvasState.length-1}}))}))):0===t.currentStateIndex&&(Tt(e,t.canvasState[t.currentStateIndex],Object(o.a)(Object(o.a)({},t.canvasState[0]),{},{objects:[]}),"undo"),t.undoFinishedStatus=1,e.remove.apply(e,Object(A.a)(e.getObjects())),n((function(){return{undo:!0,redo:!1}})),t.currentStateIndex=-1)))}(i,e.current,c)},children:Object(ne.jsx)("img",{src:Dt,alt:""})}),Object(ne.jsx)(ie,{disabled:a.redo,onClick:function(){return function(e,t,n){t.redoFinishedStatus&&(t.currentStateIndex===t.canvasState.length-1&&-1!==t.currentStateIndex?n((function(e){return Object(o.a)(Object(o.a)({},e),{},{redo:!0})})):t.canvasState.length>t.currentStateIndex&&0!==t.canvasState.length&&(t.redoFinishedStatus=0,t.redoStatus=!0,e.loadFromJSON(t.canvasState[t.currentStateIndex+1],(function(){Tt(e,t.canvasState[t.currentStateIndex],t.canvasState[t.currentStateIndex+1],"redo"),e.renderAll(),t.redoStatus=!1,t.currentStateIndex+=1,n((function(){return{undo:-1===t.currentStateIndex,redo:t.currentStateIndex===t.canvasState.length-1&&-1!==t.currentStateIndex}})),t.redoFinishedStatus=1}))))}(i,e.current,c)},children:Object(ne.jsx)("img",{src:Nt,alt:""})})]})},Bt=n.p+"static/media/fullscreen.24771eb9.svg",Rt=n.p+"static/media/minimize.43572175.svg",zt=function(){var e=r.a.useContext(C),t=e.canvas,n=e.state,a=e.dispatch,c=n.fullscreen,i=n.width,s=n.height;return Object(ne.jsx)(ie,{active:c,onClick:function(){t.setDimensions(Object(o.a)({},c?{width:i,height:s}:{width:window.innerWidth,height:window.innerHeight}));var e=window.innerWidth/i;t.setZoom(c?1:e),a(F({fullscreen:!c}))},children:Object(ne.jsx)("img",{src:c?Rt:Bt,alt:""})})},Lt=n(28),Mt=n.n(Lt),Pt=function(){return Object(ne.jsxs)("div",{className:Mt.a.wrapper,children:[Object(ne.jsx)(zt,{}),Object(ne.jsx)(Ft,{})]})},Ht=function(e,t){var n=e.getCenterPoint(),a=t.getZoom(),r=t.getHeight(),c=(15+n.y+e.height*e.scaleY/2)*a;return c+30>r&&(c=(n.y-95-e.height*e.scaleY/2)*a),{top:c,left:n.x*a}},Wt=function(){var e=r.a.useContext(C),t=e.canvas,n=e.state.currentColor;return Object(ne.jsx)(ie,{onClick:function(){Z(t,n)},style:{backgroundColor:n}})},Vt=n.p+"static/media/delete.c022e131.svg",Gt=function(){var e=r.a.useContext(C),t=e.canvas,n=e.dispatch;return Object(ne.jsx)(ie,{onClick:function(){var e=t.getActiveObject();Y(t,e,n)},children:Object(ne.jsx)("img",{src:Vt,alt:""})})},Ut=n.p+"static/media/copy.15beb7fb.svg",Jt=function(){var e=r.a.useContext(C).canvas;return Object(ne.jsx)(ie,{onClick:function(){var t=e.getActiveObject();t.clone((function(n){e.discardActiveObject(),n.set(Object(o.a)(Object(o.a)(Object(o.a)({top:n.top+8,left:n.left+8},t.fromSVG?{fromSVG:!0}:{}),t.fromImgShape?{fromImgShape:!0}:{}),t.brushType?{brushType:t.brushType}:{})),"activeSelection"===n.type?(n.canvas=e,n.forEachObject((function(n,a){var r=t.getObjects()[a];r.fromSVG&&n.set({fromSVG:!0}),r.brushType&&n.set({brushType:r.brushType}),r.fromImgShape&&n.set({fromImgShape:!0}),e.add(n)}))):e.add(n),e.setActiveObject(n),e.requestRenderAll()}))},children:Object(ne.jsx)("img",{src:Ut,alt:""})})},Kt=n.p+"static/media/bold.a0908168.svg",qt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;r.a.useEffect((function(){"bold"===c.getActiveObject().fontWeight&&a(!0)}),[c]);return Object(ne.jsx)(ie,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({fontWeight:"normal"}),a(!1)):(e.set({fontWeight:"bold"}),a(!0)),c.renderAll()},children:Object(ne.jsx)("img",{src:Kt,alt:""})})},Xt=n.p+"static/media/italic.cf5cd34d.svg",Yt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;r.a.useEffect((function(){"italic"===c.getActiveObject().fontStyle&&a(!0)}),[c]);return Object(ne.jsx)(ie,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({fontStyle:"normal"}),a(!1)):(e.set({fontStyle:"italic"}),a(!0)),c.renderAll()},children:Object(ne.jsx)("img",{src:Xt,alt:""})})},Zt=n.p+"static/media/underline.c56bb0d2.svg",Qt=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;r.a.useEffect((function(){c.getActiveObject().underline&&a(!0)}),[c]);return Object(ne.jsx)(ie,{active:n,onClick:function(){var e=c.getActiveObject();n?(e.set({underline:!1}),a(!1)):(e.set({underline:!0}),a(!0)),c.renderAll()},children:Object(ne.jsx)("img",{src:Zt,alt:""})})},$t=n.p+"static/media/align-left.277ba860.svg",en=n.p+"static/media/align-center.32449acd.svg",tn=n.p+"static/media/align-right.f9735e6a.svg",nn=function(){var e=r.a.useState("center"),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;r.a.useEffect((function(){a(c.getActiveObject().textAlign)}),[c]);var i=function(e){a(e),c.getActiveObject().set({textAlign:e}),c.renderAll()};return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{active:"left"===n,onClick:function(){return i("left")},children:Object(ne.jsx)("img",{src:$t,alt:""})}),Object(ne.jsx)(ie,{active:"center"===n,onClick:function(){return i("center")},children:Object(ne.jsx)("img",{src:en,alt:""})}),Object(ne.jsx)(ie,{active:"right"===n,onClick:function(){return i("right")},children:Object(ne.jsx)("img",{src:tn,alt:""})})]})},an=["Arial","Comic Sans MS","Courier New","Georgia","Tahoma","Times New Roman","Verdana"],rn=n(29),cn=n.n(rn),sn=function(){var e=r.a.useState(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(C).canvas;r.a.useEffect((function(){a(c.getActiveObject().fontFamily)}),[c]);return Object(ne.jsx)(le,{onChange:function(e){a(e.target.value),c.getActiveObject().set({fontFamily:e.target.value}),c.renderAll()},value:n,className:cn.a.wrapper,children:an.map((function(e){return Object(ne.jsx)("option",{value:e,children:e},e)}))})},on=n(19),ln=n.n(on),un=function(){var e,t=r.a.useState(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!1),u=Object(l.a)(i,2),h=u[0],f=u[1],b=r.a.useState(""),p=Object(l.a)(b,2),g=p[0],j=p[1],m=r.a.useState({top:0,left:0}),v=Object(l.a)(m,2),x=v[0],w=v[1],O=r.a.useContext(C),S=O.canvas,_=O.state.fullscreen,y=!h&&"answerTextbox"!==g&&"answerImage"!==g&&"answerSvg"!==g,A="answerTextbox"!==g&&"answerImage"!==g&&"answerSvg"!==g;return r.a.useEffect((function(){S.getActiveObject()&&w(Ht(S.getActiveObject(),S))}),[_,S]),r.a.useEffect((function(){var e=function(e){w(Ht(e.transform.target,S))},t=function(t){var n=t.target;n&&(j(n.type),c(!0),w(Ht(n,S)),n.on("moving",e),n.on("scaling",e),n.fromImgShape&&f(!0),"i-text"===n.type&&n.on("changed",(function(){w(Ht(n,S))})))};S.on("selection:created",t),S.on("selection:updated",t),S.on("selection:cleared",(function(t){c(!1),f(!1),t.deselected&&(t.deselected[0].off("moving",e),t.deselected[0].off("scaling",e),"i-text"===t.deselected[0].type&&(S.defaultCursor="default",t.deselected[0].off("changed"),function(e,t){""===t.text&&(e.remove(t),e.renderAll())}(S,t.deselected[0])))}))}),[S]),Object(ne.jsx)(ne.Fragment,{children:a&&Object(ne.jsxs)("div",{style:Object(o.a)({},x),className:d()(ln.a.wrapper,(e={},Object(s.a)(e,ln.a.withColorApply,y),Object(s.a)(e,ln.a.withoutCopy,!A),e)),children:[y&&Object(ne.jsx)(Wt,{}),Object(ne.jsx)(Gt,{}),A&&Object(ne.jsx)(Jt,{}),"i-text"===g&&Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(qt,{}),Object(ne.jsx)(Yt,{}),Object(ne.jsx)(Qt,{}),Object(ne.jsx)(nn,{}),Object(ne.jsx)(sn,{})]})]})})},dn=n(30),hn=n.n(dn),fn=function(e){var t=e.answer,n={};t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px")),"textbox"===t.type&&(t.options.fontSize&&(n.fontSize="".concat(t.options.fontSize,"px")),t.options.fontFamily&&(n.fontFamily=t.options.fontFamily),t.options.fill&&(n.color=t.options.fill));return Object(ne.jsx)("div",{draggable:!0,style:n,onDragStart:function(e){var n=e.target.getBoundingClientRect();e.dataTransfer.setData("data",JSON.stringify(Object(o.a)(Object(o.a)({},t),{offsetLeft:e.clientX-n.left,offsetTop:e.clientY-n.top})))},className:hn.a.answer,children:"image"===t.type?Object(ne.jsx)("img",{src:t.value,width:t.width,height:t.height,alt:""}):Object(ne.jsx)("span",{dangerouslySetInnerHTML:{__html:t.value||""}})})},bn=window.fabric,pn=function(e){var t=e.target,n=r.a.useContext(C),a=n.state,c=n.canvas,s=n.dispatch,l=a.answers,u=a.usedAnswers;return r.a.useEffect((function(){var e=function(e){e.e.preventDefault();var t=JSON.parse(e.e.dataTransfer.getData("data"));!function(e,t,n){var a=Object(o.a)(Object(o.a)({},t.options),{},{answerID:t.id,left:n.e.offsetX-t.offsetLeft,top:n.e.offsetY-t.offsetTop}),r=t.type;if("textbox"===r&&/<[a-z][\s\S]*>/i.test(t.value)&&(r="svg"),"textbox"===r){var c=new bn.AnswerTextbox(t.value,a);e.add(c)}if("image"===r){var i=new bn.AnswerImage(t.value,Object(o.a)({},a));e.add(i)}if("svg"===r){var s=new bn.AnswerSvg(t.value,Object(o.a)({},a));e.add(s)}e.renderAll()}(c,t,e),s(M({usedAnswer:t.id}))},t=function(e){e.object.answerID&&("added"!==e.actionType||u.includes(e.object.answerID)||s(M({usedAnswer:e.object.answerID})),"removed"===e.actionType&&u.includes(e.object.answerID)&&s(P({usedAnswer:e.object.answerID})))};return c.on("drop",e),c.on("history:undo",t),c.on("history:redo",t),function(){c.off("drop",e),c.off("history:undo",t),c.off("history:undo",t)}}),[c,s,u]),i.a.createPortal(Object(ne.jsx)(ne.Fragment,{children:l.sort((function(e,t){return e.sort-t.sort})).filter((function(e){return!u.includes("".concat(e.id))})).map((function(e,t){return Object(ne.jsx)(fn,{answer:e},e.id||t)}))}),t.current)},gn=n(11),jn=n.n(gn),mn=window.fabric,vn=function(e){var t=e.id,n=e.onChange,a=e.initialValue,c=e.width,i=e.height,u=e.answers,h=r.a.useReducer(W,T),f=Object(l.a)(h,2),b=f[0],p=f[1],g=r.a.useState(!1),j=Object(l.a)(g,2),m=j[0],v=j[1],x=r.a.useRef(t||function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}()),O=r.a.useRef(null),S=r.a.useRef(null),_=b.fullscreen;return r.a.useEffect((function(){if(x.current){if(O.current=new mn.Canvas(x.current,Object(o.a)(Object(o.a)(Object(o.a)({},w),c?{width:c}:{}),i?{height:i}:{})),X(O.current,p),v(!0),a){var e=JSON.parse(a);O.current.loadFromJSON(e,(function(){O.current.renderAll()}));var t=e.objects.map((function(e){return e.answerID}));p(L({usedAnswers:t}))}c&&p(B({width:c})),i&&p(R({height:i})),u&&p(z({answers:u})),O.current.on("after:render",(function(){"function"===typeof n&&n(O.current.toJSON())}))}}),[n,a,c,i,u,p]),Object(ne.jsxs)("div",{className:jn.a.wrapper,style:{margin:"0 auto",width:c||w.width,height:i||w.height},children:[Object(ne.jsxs)("div",{className:d()(jn.a.canvasWrapper,Object(s.a)({},jn.a.fullscreen,_)),children:[Object(ne.jsx)("canvas",{id:x.current}),m&&Object(ne.jsxs)(C.Provider,{value:{canvas:O.current,dispatch:p,state:b},children:[Object(ne.jsx)(Pt,{}),Object(ne.jsx)(Ae,{}),Object(ne.jsx)(It,{}),Object(ne.jsx)(un,{}),Object(ne.jsx)(pn,{target:S})]})]}),Object(ne.jsx)("div",{ref:S,className:jn.a.answers})]})};i.a.render(Object(ne.jsx)(r.a.StrictMode,{children:Object(ne.jsx)(vn,{width:800,height:550,answers:[{id:"57425",sort:1,type:"textbox",width:200,height:0,value:"<b>Lorem ipsum dolor sit amet, consectetur adipisicing elit. <br />Animi aperiam aut autem consectetur ea excepturi explicabo facere hic illum inventore ipsam, nulla numquam, obcaecati, quam quas recusandae tenetur ut veritatis?</b>",options:{fontSize:16,fontFamily:"Georgia",fill:"black",width:300}},{id:"57426",sort:1,type:"image",width:50,height:50,value:"https://backend25-dev.acceleratelearning.com/system/part_type_graphic_organizer_answer/images/57426/original/pngtree-hand-drawn-little-girl-cartoon-lively-little-girl-cute-little-girl-png-image_491210.jpeg?1628770578",options:{width:50,height:50}},{id:"57427",sort:1,type:"textbox",width:0,height:0,value:"simple",options:{fontSize:16,fontFamily:"Arial",fill:"black",width:0,height:0}}]})}),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.48c8398e.chunk.js.map