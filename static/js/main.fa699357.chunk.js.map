{"version":3,"sources":["components/panel/Panel.module.css","duck/constants.ts","duck/utils.ts","duck/context.ts","duck/state.ts","duck/actions.ts","duck/reducer.ts","duck/operations.ts","duck/customBrushes.ts","components/panel/assets/close.svg","components/panel/Panel.tsx","components/button/Button.tsx","components/select/Select.tsx","sketch/components/color-picker-panel/components/eyedropper/duck/utils.ts","sketch/components/color-picker-panel/components/eyedropper/assets/dropper.svg","sketch/components/color-picker-panel/components/eyedropper/Eyedropper.tsx","sketch/components/color-picker-panel/components/color-history/ColorHistory.tsx","sketch/components/color-picker-panel/ColorPickerPanel.tsx","sketch/components/right-control-panel/components/drawing/duck/constants.ts","sketch/components/right-control-panel/components/drawing/assets/brush1.svg","sketch/components/right-control-panel/components/drawing/assets/brush2.svg","sketch/components/right-control-panel/components/drawing/assets/brush3.svg","sketch/components/right-control-panel/components/drawing/assets/brush4.svg","sketch/components/right-control-panel/components/drawing/assets/brush5.svg","sketch/components/right-control-panel/components/drawing/assets/highlight.svg","sketch/components/right-control-panel/components/drawing/duck/operations.ts","sketch/components/right-control-panel/components/drawing/Drawing.tsx","sketch/components/right-control-panel/components/hand/assets/hand.svg","sketch/components/right-control-panel/components/hand/Hand.tsx","sketch/components/right-control-panel/components/figures/assets/star.svg","sketch/components/right-control-panel/components/figures/shapes/circle.svg","sketch/components/right-control-panel/components/figures/shapes/circle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/rectangle.svg","sketch/components/right-control-panel/components/figures/shapes/rectangle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/star.svg","sketch/components/right-control-panel/components/figures/shapes/star-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/triangle.svg","sketch/components/right-control-panel/components/figures/shapes/triangle-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-down.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-up.svg","sketch/components/right-control-panel/components/figures/shapes/arrow-left.svg","sketch/components/right-control-panel/components/figures/shapes/index.ts","sketch/components/right-control-panel/components/figures/shapes/arrow-right.svg","sketch/components/right-control-panel/components/figures/shapes/thunder-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/thunder.svg","sketch/components/right-control-panel/components/figures/shapes/cloud-outlined.svg","sketch/components/right-control-panel/components/figures/shapes/cloud.svg","sketch/components/right-control-panel/components/figures/fruits/apple.svg","sketch/components/right-control-panel/components/figures/fruits/grape.svg","sketch/components/right-control-panel/components/figures/fruits/lemon.svg","sketch/components/right-control-panel/components/figures/fruits/peach.svg","sketch/components/right-control-panel/components/figures/fruits/index.ts","sketch/components/right-control-panel/components/figures/fruits/strawberry.svg","sketch/components/right-control-panel/components/figures/fruits/watermelon.svg","sketch/components/right-control-panel/components/figures/duck/operations.ts","sketch/components/right-control-panel/components/figures/Figures.tsx","sketch/components/right-control-panel/components/text/assets/text.svg","sketch/components/right-control-panel/components/text/duck/operations.ts","sketch/components/right-control-panel/components/text/Text.tsx","sketch/components/right-control-panel/components/background/assets/index.ts","sketch/components/right-control-panel/components/background/assets/bg1.svg","sketch/components/right-control-panel/components/background/assets/bg2.svg","sketch/components/right-control-panel/components/background/assets/bg3.svg","sketch/components/right-control-panel/components/background/assets/picture.svg","sketch/components/right-control-panel/components/background/Background.tsx","sketch/components/right-control-panel/components/special-chars/assets/char.svg","sketch/components/right-control-panel/components/special-chars/duck/constants.ts","sketch/components/right-control-panel/components/special-chars/SpecialChars.tsx","sketch/components/right-control-panel/components/special-chars/duck/operations.ts","sketch/components/right-control-panel/components/fraction/duck/operations.ts","sketch/components/right-control-panel/components/fraction/assets/fraction.svg","sketch/components/right-control-panel/components/fraction/Fraction.tsx","sketch/components/right-control-panel/RightControlPanel.tsx","sketch/components/left-control-panel/components/undo-redo/assets/undo.svg","sketch/components/left-control-panel/components/undo-redo/assets/redo.svg","sketch/components/left-control-panel/components/undo-redo/UndoRedo.tsx","sketch/components/left-control-panel/components/fullscreen/assets/fullscreen.svg","sketch/components/left-control-panel/components/fullscreen/assets/minimize.svg","sketch/components/left-control-panel/components/fullscreen/Fullscreen.tsx","sketch/components/left-control-panel/LeftControlPanel.tsx","sketch/components/object-menu/duck/utils.ts","sketch/components/object-menu/components/current-color/CurrentColor.tsx","sketch/components/object-menu/components/remove-object/assets/delete.svg","sketch/components/object-menu/components/remove-object/RemoveObject.tsx","sketch/components/object-menu/components/copy/assets/copy.svg","sketch/components/object-menu/components/copy/Copy.tsx","sketch/components/object-menu/components/bold-text/assets/bold.svg","sketch/components/object-menu/components/bold-text/BoldText.tsx","sketch/components/object-menu/components/italic-text/assets/italic.svg","sketch/components/object-menu/components/italic-text/ItalicText.tsx","sketch/components/object-menu/components/underline-text/assets/underline.svg","sketch/components/object-menu/components/underline-text/UnderlineText.tsx","sketch/components/object-menu/components/align-text/assets/align-left.svg","sketch/components/object-menu/components/align-text/assets/align-center.svg","sketch/components/object-menu/components/align-text/assets/align-right.svg","sketch/components/object-menu/components/align-text/AlignText.tsx","sketch/components/object-menu/components/font-text/duck/constants.ts","sketch/components/object-menu/components/font-text/FontText.tsx","sketch/components/object-menu/ObjectMenu.tsx","sketch/components/object-menu/duck/operations.ts","sketch/Sketch.tsx","index.tsx","sketch/components/right-control-panel/components/background/Background.module.css","components/button/Button.module.css","sketch/components/color-picker-panel/components/color-history/ColorHistory.module.css","sketch/components/color-picker-panel/ColorPicker.module.css","sketch/components/right-control-panel/components/figures/Figures.module.css","sketch/components/right-control-panel/components/fraction/Fraction.module.css","sketch/components/color-picker-panel/components/eyedropper/Eyedropper.module.css","sketch/components/right-control-panel/components/special-chars/SpecialChars.module.css","sketch/components/object-menu/ObjectMenu.module.css","sketch/Sketch.module.css","sketch/components/right-control-panel/components/drawing/Drawing.module.css","components/select/Select.module.css","sketch/components/right-control-panel/RightControlPanel.module.css","sketch/components/left-control-panel/LeftControlPanel.module.css","sketch/components/object-menu/components/font-text/FontText.module.css"],"names":["module","exports","FABRIC_SETTINGS","CANVAS_SETTINGS","height","width","backgroundColor","addOpacity","hex","opacity","tempHex","replace","r","parseInt","substring","g","b","randomInt","min","max","Math","floor","random","randomPosition","center","top","left","AppContext","React","appState","currentColor","mode","brushType","fullscreen","setCurrentColor","createAction","setMode","setBrush","setFullscreen","appReducer","createReducer","initialState","handleAction","actions","state","payload","fabric","window","setSketchSettings","canvas","f","Object","prototype","cornerStyle","cornerSize","selectionColor","selectionBorderColor","selectionLineWidth","setBackgroundColor","renderAll","bind","erasable","util","trimCanvas","a","getContext","c","e","h","l","getImageData","m","p","q","k","n","data","push","sort","length","putImageData","x","y","Point","normalize","this","distanceFrom","BaseBrush","convertToImg","zoom","getZoom","getRetinaScaling","copyCanvasElement","upperCanvasEl","Image","add","set","scaleX","scaleY","setCoords","clearContext","contextTop","getRandom","clamp","CrayonBrush","createClass","color","_baseWidth","_inkAmount","_latestStrokeLength","_point","_sep","_size","_latest","_drawn","initialize","freeDrawingBrush","globalAlpha","onMouseDown","onMouseMove","update","draw","onMouseUp","setFromPoint","call","subtract","ceil","save","fillStyle","beginPath","multiply","PI","t","sin","cos","rect","fill","restore","_render","document","addEventListener","event","key","selectedObject","getActiveObject","isEditing","removeSelectedObject","type","forEachObject","element","remove","discardActiveObject","requestRenderAll","changeActiveObjectColor","activeObject","changeObjectColor","object","shadow","stroke","fromSVG","filters","BlendColor","applyFilters","Panel","opened","onClose","title","children","onTransitionEnd","className","classNames","styles","wrapper","header","onClick","close","src","closeIcon","alt","Button","style","active","disabled","Select","onChange","value","getColorOfThePointOnTheCanvas","round","viewportTransform","devicePixelRatio","toString","slice","Eyedropper","useState","activated","setActivated","previewColor","setPreviewColor","previewPosition","setPreviewPosition","useContext","dispatch","canvasMove","selectedColor","pointer","defaultCanvasState","off","canvasClick","selection","getObjects","forEach","hoverCursor","unLockAllObjects","colorView","lockAllObjects","on","icon","ColorHistory","history","setHistory","useEffect","setColorHandler","ColorPickerPanel","localColor","setLocalColor","pickerWrapper","picker","onChangeComplete","TOOLS","BRUSH_SIZE","eraser","marker","magic","pencil","pen","Drawing","setOpened","brush","brushSize","setBrushSize","pathCreateHandler","path","isDrawingMode","PencilBrush","EraserBrush","Shadow","blur","affectStroke","changeCanvasBrush","highlight","panel","exampleWrapper","exampleText","example","ReactSlider","slider","orientation","renderThumb","props","thumb","valueNow","invert","size","brushes","map","tool","Hand","SHAPES","circle","circleOutlined","rectangle","rectangleOutlined","star","starOutlined","triangle","triangleOutlined","arrowDown","arrowLeft","arrowUp","FRUITS","lemon","apple","grape","peach","figures","shapes","fruits","Figures","figuresType","setFiguresType","shapeClickHandler","position","loadSVGFromURL","objects","options","obj","groupSVGElements","fromImgShape","scaleToWidth","setActiveObject","drawImg","starIcon","select","target","shapeList","shape","Text","itext","IText","fontSize","lineHeight","fontFamily","cursorColor","textAlign","enterEditing","appendText","BACKGROUNDS","BACKGROUND_COLORS","Background","backgroundList","background","fromURL","img","setBackgroundImage","backgroundColorHandler","CHARS","SpecialChars","charList","char","caretStart","selectionStart","caretEnd","selectionEnd","insertChars","insertChar","charIcon","Fraction","numerator","denominator","fraction","setFraction","focusInputRef","useRef","fractionIcon","current","focus","ref","separator","viewBoxWidth","svgContainer","loadSVGFromString","insertFraction","insertButton","RightControlPanel","UndoRedo","redoActive","setRedoActive","undoActive","setUndoActive","activeCheck","useCallback","historyUndo","historyRedo","undo","undoIcon","redo","redoIcon","Fullscreen","setDimensions","innerWidth","innerHeight","setZoom","minimizeIcon","fullscreenIcon","LeftControlPanel","getPosition","getCenterPoint","canvasHeight","getHeight","CurrentColor","RemoveObject","Copy","clone","cloned","index","clonedObject","copy","BoldText","fontWeight","boldIcon","ItalicText","fontStyle","italicIcon","UnderlineText","underline","underlineIcon","AlignText","align","setAlign","alignHandler","newAlign","alignLeftIcon","alignCenterIcon","alignRightIcon","FONTS","FontText","currentFont","setCurrentFont","font","ObjectMenu","selected","setSelected","setFromImgShape","setType","setPosition","movingHandler","transform","selectHandler","targetObject","deselected","defaultCursor","textbox","text","removeEmptyTextbox","Sketch","useReducer","canvasIdRef","result","characters","i","charAt","getId","sketchRef","init","setInit","Canvas","id","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"oFACAA,EAAOC,QAAU,CAAC,QAAU,uBAAuB,OAAS,sBAAsB,MAAQ,qBAAqB,MAAQ,qBAAqB,OAAS,wB,2GCDxIC,G,OACI,KADJA,EAEG,IAFHA,EAGQ,OAHRA,EAIE,EAJFA,EAKG,SALHA,EAMM,2BANNA,EAOa,UAPbA,EAQW,EARXA,EASE,UAGFC,EAAkB,CAC7BC,OAAQF,EACRG,MAAOH,EACPI,gBAAiBJ,GCFNK,EAAa,SAACC,EAAaC,GACtC,IAAMC,EAAUF,EAAIG,QAAQ,IAAK,IAC3BC,EAAIC,SAASH,EAAQI,UAAU,EAAG,GAAI,IACtCC,EAAIF,SAASH,EAAQI,UAAU,EAAG,GAAI,IACtCE,EAAIH,SAASH,EAAQI,UAAU,EAAG,GAAI,IAE5C,MAAM,QAAN,OAAeF,EAAf,YAAoBG,EAApB,YAAyBC,EAAzB,YAA8BP,EAAU,IAAxC,MAGWQ,EAAY,SAACC,EAAaC,GACrC,OAAOC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,IAAMA,GAG1CK,EAAiB,WAC5B,IAAMC,EACDtB,EAA+B,EAD9BsB,EAEDtB,EAAgC,EAGrC,MAAO,CACLuB,IAAKR,EAAUO,EAAW,IAAKA,EAAW,IAC1CE,KAAMT,EAAUO,EAAW,IAAKA,EAAW,MC/BlCG,EAAaC,gBAAoC,M,eCO/CC,EAPS,CACtBC,aAAc5B,EACd6B,KAAM,OACNC,UAAW,SACXC,YAAY,GCJDC,EAAkBC,uBAAa,2BAAbA,GAIlBC,EAAUD,uBAAa,kBAAbA,GAIVE,EAAWF,uBAAa,mBAAbA,GAIXG,EAAgBH,uBAAa,wBAAbA,GCgBdI,EAxBIC,wBAAmCC,GACnDC,aACCC,GACA,SAACC,EAAD,OAAqBd,EAArB,EAAUe,QAAWf,aAArB,mBAAC,eACIc,GADL,IAEEd,oBAGHY,aAAaC,GAAkB,SAACC,EAAD,OAAqBZ,EAArB,EAAUa,QAAWb,UAArB,mBAAC,eAC5BY,GAD2B,IAE9BZ,iBAEDU,aAAaC,GAAiB,SAACC,EAAD,OAAqBb,EAArB,EAAUc,QAAWd,KAArB,mBAAC,eAC3Ba,GAD0B,IAE7Bb,YAEDW,aACCC,GACA,SAACC,EAAD,OAAqBX,EAArB,EAAUY,QAAWZ,WAArB,mBAAC,eACIW,GADL,IAEEX,kBCtBEa,EAAWC,OAAXD,OAEKE,EAAoB,SAC/BC,GCH4B,IAACC,EDKzBD,IAGFH,EAAOK,OAAOC,UAAUC,YAAcnD,EACtC4C,EAAOK,OAAOC,UAAUE,WAAapD,EACrC+C,EAAOM,eAAiBrD,EACxB+C,EAAOO,qBAAuBtD,EAC9B+C,EAAOQ,mBAAqBvD,EAE5B+C,EAAOS,mBAAmB,QAAST,EAAOU,UAAUC,KAAKX,GAAS,CAChEY,UAAU,KCfeX,EDiBZJ,GChBfgB,KAAKC,WAAa,SAAUC,GAC5B,IACE,IAAIhD,EAAIgD,EAAEC,WAAW,MACnBC,EAAIF,EAAE3D,MACN8D,EAAIH,EAAE5D,OACNW,EAAI,GACJqD,EAAI,GACJC,EAAIrD,EAAEsD,aAAa,EAAG,EAAGJ,EAAGC,GAC5BI,EAAI,SAAUC,EAAGC,GACf,OAAOD,EAAIC,GAEbC,EAAI,EACNA,EAAIP,EACJO,IAEA,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAGS,IACrB,EAAIN,EAAEO,KAAK,GAAKF,EAAIR,EAAIS,GAAK,KAAO5D,EAAE8D,KAAKF,GAAIP,EAAES,KAAKH,IAU1D,OATA3D,EAAE+D,KAAKP,GACPH,EAAEU,KAAKP,GAEPL,EAAInD,EADJoD,EAAIpD,EAAEgE,OAAS,GACJhE,EAAE,GACboD,EAAIC,EAAED,GAAKC,EAAE,GACbC,EAAIrD,EAAEsD,aAAavD,EAAE,GAAIqD,EAAE,GAAIF,EAAGC,GAClCH,EAAE3D,MAAQ6D,EACVF,EAAE5D,OAAS+D,EACXnD,EAAEgE,aAAaX,EAAG,EAAG,GACd,CAAEY,EAAGlE,EAAE,GAAImE,EAAGd,EAAE,KAEzBlB,EAAEiC,MAAM/B,UAAUgC,UAAY,SAAUpB,GAClC,OAASA,QAAK,IAAWA,IAAGA,EAAI,GACpC,IAAIhD,EAAIqE,KAAKC,aAAa,CAAEL,EAAG,EAAGC,EAAG,IAErC,OADA,EAAIlE,IAAOqE,KAAKJ,EAAKI,KAAKJ,EAAIjE,EAAKgD,EAAKqB,KAAKH,EAAKG,KAAKH,EAAIlE,EAAKgD,GACzDqB,MAETnC,EAAEqC,UAAUnC,UAAUoC,aAAe,WACnC,IAAIC,EAAOJ,KAAKpC,OAAOyC,UACnB1B,EAAIqB,KAAKpC,OAAO0C,mBAClB3E,EAAIkC,EAAEY,KAAK8B,kBAAkBP,KAAKpC,OAAO4C,eACzC3B,EAAIhB,EAAEY,KAAKC,WAAW/C,GACxBA,EAAI,IAAIkC,EAAE4C,MAAM9E,GAChBqE,KAAKpC,OAAO8C,IAAI/E,GAChBA,EAAEgF,IAAI,CACJtE,KAAMwC,EAAEe,EAAIjB,EAAIyB,EAChBhE,IAAKyC,EAAEgB,EAAIlB,EAAIyB,EACfQ,OAAQ,EAAIjC,EAAIyB,EAChBS,OAAQ,EAAIlC,EAAIyB,IACfU,YACHd,KAAKpC,OAAOmD,aAAaf,KAAKpC,OAAOoD,aAEvCnD,EAAEY,KAAKwC,UAAY,SAAUtC,EAAGhD,GAE9B,OADAA,EAAIA,GAAQ,EACLI,KAAKE,WAAa0C,GAAQ,GAAKhD,GAAKA,GAE7CkC,EAAEY,KAAKyC,MAAQ,SAAUvC,EAAGhD,EAAGkD,GAE7B,MADA,kBAAoBA,IAAMA,EAAI,GACvBF,EAAIhD,EAAIA,EAAIgD,EAAIE,EAAIA,EAAIF,GAEjCd,EAAEsD,YAActD,EAAEY,KAAK2C,YAAYvD,EAAEqC,UAAW,CAC9CmB,MAAO,OACPjG,QAAS,GACTJ,MAAO,EACPsG,WAAY,EACZC,WAAY,GACZC,oBAAqB,EACrBC,OAAQ,KACRC,KAAM,EACNC,MAAO,EACPC,QAAS,KACTC,QAAQ,EACRC,WAAY,SAAUnD,EAAGhD,GACvBA,EAAIA,GAAK,GACTqE,KAAKpC,OAASe,EACdqB,KAAKhF,MAAQW,EAAEX,OAAS2D,EAAEoD,iBAAiB/G,MAC3CgF,KAAKqB,MAAQ1F,EAAE0F,OAAS1C,EAAEoD,iBAAiBV,MAC3CrB,KAAK5E,QAAUO,EAAEP,SAAWuD,EAAEqC,WAAWgB,YACzChC,KAAKyB,OAAS,IAAI5D,EAAEiC,MAAM,EAAG,IAE/BmC,YAAa,SAAUtD,GACrBqB,KAAKpC,OAAOoD,WAAWgB,YAAchC,KAAK5E,QAC1C4E,KAAK2B,MAAQ3B,KAAKhF,MAAQ,EAAIgF,KAAKsB,WACnCtB,KAAK6B,QAAS,EACd7B,KAAKW,IAAIhC,IAEXuD,YAAa,SAAUvD,GACrBqB,KAAKmC,OAAOxD,GACZqB,KAAKoC,KAAKpC,KAAKpC,OAAOoD,aAExBqB,UAAW,WACTrC,KAAK6B,QAAU7B,KAAKG,eACpBH,KAAK4B,QAAU,KACf5B,KAAKwB,oBAAsB,EAC3BxB,KAAKpC,OAAOoD,WAAWgB,YAAc,GAEvCrB,IAAK,SAAUhC,GACbqB,KAAK4B,QACD5B,KAAK4B,QAAQU,aAAatC,KAAKyB,QAC9BzB,KAAK4B,QAAU,IAAI/D,EAAEiC,MAAMnB,EAAEiB,EAAGjB,EAAEkB,GACvChC,EAAEiC,MAAM/B,UAAUuE,aAAaC,KAAKvC,KAAKyB,OAAQ9C,IAEnDwD,OAAQ,SAAUxD,GAChBqB,KAAKW,IAAIhC,GACTqB,KAAKwB,oBAAsBxB,KAAKyB,OAC7Be,SAASxC,KAAK4B,SACd3B,aAAa,CAAEL,EAAG,EAAGC,EAAG,KAE7BuC,KAAM,SAAUzD,GACd,IACIhD,EADAyE,EAAOJ,KAAKpC,OAAOyC,UAEnBxB,EAAImB,KAAKyB,OAAOe,SAASxC,KAAK4B,SAC9B9C,EAAI/C,KAAK0G,KAAKzC,KAAK2B,MAAQ,GAC3BjG,EAAIK,KAAKC,MAAM6C,EAAEoB,aAAa,CAAEL,EAAG,EAAGC,EAAG,IAAOf,GAAK,EACzDD,EAAEkB,UAAUjB,GACZ,IAAIC,EACFiB,KAAK0B,KACL7D,EAAEY,KAAKyC,MAAOlB,KAAKuB,WAAavB,KAAKwB,oBAAuB,EAAG,EAAG,IAChExC,EAAIjD,KAAK0G,KAAKzC,KAAK2B,MAAQ3B,KAAK0B,MAChCxC,EAAIc,KAAK2B,MAAQ,EAIrB,IAHAhD,EAAE+D,OACF/D,EAAEgE,UAAY3C,KAAKqB,MACnB1C,EAAEiE,YACG9D,EAAI,EAAGA,EAAIE,EAAGF,IACjB,IAAKnD,EAAI,EAAGA,EAAID,EAAGC,IAAK,CACtB,IAAI0D,EAAIW,KAAK4B,QAAQlB,IAAI7B,EAAEgE,SAASlH,IAChC2D,EAAIzB,EAAEY,KAAKwC,UAAU/B,GACrBC,EAAItB,EAAEY,KAAKwC,UAAU,EAAIlF,KAAK+G,IAC9B1D,EAAIvB,EAAEY,KAAKwC,UAAUlC,EAAGA,EAAI,GAC5BxD,EAAIsC,EAAEY,KAAKwC,UAAUlC,EAAGA,EAAI,GAC5BgE,EAAI1D,EAAEO,EAAIN,EAAIvD,KAAKiH,IAAI7D,GAAKC,EAAI,EACpCC,EAAIA,EAAEQ,EAAIP,EAAIvD,KAAKkH,IAAI9D,GAAK5D,EAAI,EAChCoD,EAAEuE,KAAKH,EAAI3C,EAAMf,EAAIe,EAAMhB,EAAG7D,GAElCoD,EAAEwE,OACFxE,EAAEyE,UACFpD,KAAK6B,QAAS,GAEhBwB,QAAS,eDrHTC,SAASC,iBAAiB,WAAW,SAACC,GACpC,GAAkB,cAAdA,EAAMC,IAAqB,CAC7B,IAAMC,EAAiB9F,EAAO+F,kBAE1BD,IAAmBA,EAAeE,WACpCC,EAAqBjG,EAAQ8F,SAO1BG,EAAuB,SAClCjG,EACA8F,GAEIA,GAA0C,oBAAxBA,EAAeI,KAClCJ,EAAuBK,eAAc,SAACC,GACrCpG,EAAOqG,OAAOD,MAGhBpG,EAAOqG,OAAOP,GAGhB9F,EAAOsG,sBAAsBC,oBAGlBC,EAA0B,SACrCxG,EACAyD,GAEA,IAAMgD,EAAezG,EAAO+F,kBAExBU,IAEsB,oBAAtBA,EAAaP,MACS,UAAtBO,EAAaP,KAEZO,EAAqBN,eAAc,SAACC,GACnCM,EAAkBN,EAAS3C,MAG7BiD,EAAkBD,EAAchD,GAGlCzD,EAAOU,cAILgG,EAAoB,SAACC,EAAalD,GAEnB,SAAhBkD,EAAOT,MAAmC,SAAhBS,EAAOT,MACjCS,EAAOC,QACa,WAArBD,EAAO5H,WAEP4H,EAAO5D,IAAI,CAAE8D,OAAQpD,IAGH,SAAhBkD,EAAOT,MAAwC,WAArBS,EAAO5H,WACnC4H,EAAO5D,IAAI,CAAE8D,OAAQvJ,EAAWmG,EAAO,OAIvB,SAAhBkD,EAAOT,MACS,WAAhBS,EAAOT,MACS,SAAhBS,EAAOT,MACS,WAAhBS,EAAOT,MACPS,EAAOG,UAEPH,EAAO5D,IAAI,CAAEwC,KAAM9B,IAGD,SAAhBkD,EAAOT,MAAmBS,EAAOC,QACnCD,EAAO5D,IAAI,CAAE6D,OAAO,2BAAMD,EAAOC,QAAd,IAAsBnD,YAGvB,UAAhBkD,EAAOT,OACTS,EAAOI,QAAQ,GAAK,IAAIlH,EAAOgD,MAAMkE,QAAQC,WAAW,CACtDvD,QACA3E,KAAM,SAGR6H,EAAOM,iB,QE1GI,MAA0B,kC,wBCoC1BC,EAvBoB,SAAC,GAM7B,IALLC,EAKI,EALJA,OACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,MACAC,EAEI,EAFJA,SACAC,EACI,EADJA,gBAEA,OACE,sBACEA,gBAAiBA,EACjBC,UAAWC,IAAWC,IAAOC,QAAR,eAAoBD,IAAOP,OAASA,IAF3D,UAIE,sBAAKK,UAAWE,IAAOE,OAAvB,UACE,qBAAKJ,UAAWE,IAAOL,MAAvB,SAA+BA,IAC/B,cAAC,EAAD,CAAQQ,QAAST,EAASI,UAAWE,IAAOI,MAA5C,SACE,qBAAKC,IAAKC,EAAWC,IAAI,UAG5BX,M,iBCEQY,EArBsB,SAAC,GAAD,MACnCZ,EADmC,EACnCA,SACAO,EAFmC,EAEnCA,QACAL,EAHmC,EAGnCA,UACAW,EAJmC,EAInCA,MAJmC,IAKnCC,cALmC,aAMnCC,gBANmC,gBAQnC,wBACEA,SAAUA,EACVR,QAASA,EACTL,UAAWC,IAAWC,IAAOC,QAASH,GAAjB,mBAClBE,IAAOU,OAASA,GADE,cAElBV,IAAOW,SAAWA,GAFA,IAIrBF,MAAOA,EAPT,SASGb,K,iBCCUgB,EAnBsB,SAAC,GAM/B,IALLhB,EAKI,EALJA,SACAiB,EAII,EAJJA,SACAC,EAGI,EAHJA,MACAhB,EAEI,EAFJA,UACAW,EACI,EADJA,MAEA,OACE,wBACEK,MAAOA,EACPD,SAAUA,EACVf,UAAWC,IAAWC,IAAOC,QAASH,GACtCW,MAAOA,EAJT,SAMGb,KCrBCzH,EAAWC,OAAXD,OAEK4I,EAAgC,SAC3CzI,EACAgC,EACAC,GAEA,IX2BuBtE,EAAWG,EAAWC,EW1BrC4D,EADE3B,EAAOgB,aACIK,aACnBlD,KAAKuK,OACF1G,EAAIhC,EAAO2I,kBAAkB,IAC5B9I,EAAO+I,iBACP5I,EAAOyC,WAEXtE,KAAKuK,OACFzG,EAAIjC,EAAO2I,kBAAkB,IAC5B9I,EAAO+I,iBACP5I,EAAOyC,WAEX,EACA,GAZMd,KAeR,OXWuBhE,EWXPgE,EAAK,GXWa7D,EWXT6D,EAAK,GXWe5D,EWXX4D,EAAK,GXWjB,aAChB,GAAK,KAAOhE,GAAK,KAAOG,GAAK,GAAKC,GAAG8K,SAAS,IAAIC,MAAM,KYvCjD,MAA0B,oC,kBC4E1BC,GAnEc,WAC3B,MAAkCpK,IAAMqK,UAAkB,GAA1D,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAwCvK,IAAMqK,SAAiB,IAA/D,mBAAOG,EAAP,KAAqBC,EAArB,KACA,EAA8CzK,IAAMqK,SAAS,CAC3DxK,IAAK,IACLC,KAAM,MAFR,mBAAO4K,EAAP,KAAwBC,EAAxB,KAIA,EAA6B3K,IAAM4K,WAAW7K,GAAtCsB,EAAR,EAAQA,OAAQwJ,EAAhB,EAAgBA,SAEVC,EAAa,SAACvI,GAClB,IAAMwI,EAAgBjB,EACpBzI,EACAkB,EAAEyI,QAAQ3H,EACVd,EAAEyI,QAAQ1H,GAEZqH,EAAmB,CAAE9K,IAAK0C,EAAEyI,QAAQ1H,EAAI,GAAIxD,KAAMyC,EAAEyI,QAAQ3H,EAAI,KAChEoH,EAAgBM,IAGZE,EAAqB,WACzBV,GAAa,GACblJ,EAAO6J,IAAI,aAAcC,GACzB9J,EAAO6J,IAAI,aAAcJ,GbkBG,SAACzJ,GAC/BA,EAAO+J,WAAY,EACnB/J,EAAOgK,aAAaC,SAAQ,SAACtD,GAC3BA,EAAO5D,IAAI,cAAc,GACzB4D,EAAOuD,YAAc,UarBrBC,CAAiBnK,IAGb8J,EAAc,SAAC5I,GACnB0I,IACA,IAAMF,EAAgBjB,EACpBzI,EACAkB,EAAEyI,QAAQ3H,EACVd,EAAEyI,QAAQ1H,GAEZuH,EAASvK,EAAgB,CAAEJ,aAAc6K,MAe3C,OACE,qCACGT,GACC,qBACEzB,UAAWE,KAAO0C,UAClBjC,MAAK,aAAI9K,gBAAiB8L,GAAiBE,KAG/C,cAAC,EAAD,CACEjB,OAAQa,EACRpB,QAtBoB,WACnBoB,EAOHW,KANAV,GAAa,GbNW,SAAClJ,GAC7BA,EAAO+J,WAAY,EACnB/J,EAAOgK,aAAaC,SAAQ,SAACtD,GAC3BA,EAAO5D,IAAI,cAAc,GACzB4D,EAAOuD,YAAc,aaGnBG,CAAerK,GACfwJ,EAASrK,EAAQ,CAAEL,KAAM,UACzBkB,EAAOsK,GAAG,aAAcR,GACxB9J,EAAOsK,GAAG,aAAcb,KAiBtBjC,UAAWE,KAAOC,QAHpB,SAKE,qBAAKI,IAAKwC,EAAMtC,IAAI,W,oBCpCbuC,GA7BgB,WAC7B,MAA8B7L,IAAMqK,SAAS,CAAC,GAAI,KAAlD,mBAAOyB,EAAP,KAAgBC,EAAhB,KACA,EAA4B/L,IAAM4K,WAAW7K,GAArCiB,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,SACP3K,EAAiBc,EAAjBd,aAERF,IAAMgM,WAAU,WACdD,GAAW,SAAC/K,GAAD,MAAW,CAACd,EAAcc,EAAM,SAC1C,CAACd,IAEJ,IAAM+L,EAAkB,SAACnH,GACvB+F,EAASvK,EAAgB,CAAEJ,aAAc4E,MAG3C,OACE,sBAAK+D,UAAWE,KAAOC,QAAvB,UACE,wBACEH,UAAWE,KAAOjE,MAClB0E,MAAO,CAAE9K,gBAAiBoN,EAAQ,IAClC5C,QAAS,kBAAM+C,EAAgBH,EAAQ,OAEzC,wBACEjD,UAAWE,KAAOjE,MAClB0E,MAAO,CAAE9K,gBAAiBoN,EAAQ,IAAM,SACxC5C,QAAS,kBAAM+C,EAAgBH,EAAQ,IAAM,gB,oBCsBtCI,GAzCoB,WACjC,MAAoClM,IAAMqK,SACxC/L,GADF,mBAAO6N,EAAP,KAAmBC,EAAnB,KAGA,EAAoCpM,IAAM4K,WAAW7K,GAA7CsB,EAAR,EAAQA,OAAQwJ,EAAhB,EAAgBA,SACR3K,EADR,EAA0Bc,MAClBd,aAERF,IAAMgM,WAAU,WACdI,EAAclM,GACd2H,EAAwBxG,EAAQnB,KAC/B,CAACA,EAAcmB,IAUlB,OACE,sBAAKwH,UAAWE,KAAOsD,cAAvB,UACE,cAAC,GAAD,IACA,cAAC,IAAD,CACExD,UAAWE,KAAOuD,OAClBxH,MAAOqH,EACPvC,SAVmB,SAAC9E,GACxBsH,EAActH,EAAMlG,MAUhB2N,iBAfgB,SAACzH,GACrB+F,EAASvK,EAAgB,CAAEJ,aAAc4E,EAAMlG,QAgB3CoM,QAAS,kBACP,qBACEnC,UAAWE,KAAOiC,QAClBxB,MAAO,CAAE9K,gBAAiByN,QAIhC,cAAC,GAAD,Q,SCvCOK,GAAQ,CACnB,CACEjF,KAAM,SACNqE,KCTW,IAA0B,oCDWvC,CACErE,KAAM,SACNqE,KEbW,IAA0B,oCFevC,CACErE,KAAM,QACNqE,KGjBW,IAA0B,oCHmBvC,CACErE,KAAM,SACNqE,KIrBW,IAA0B,oCJuBvC,CACErE,KAAM,MACNqE,KKzBW,IAA0B,qCL6B5Ba,GAAa,CACxBC,OAAQ,CACNpN,IAAK,EACLC,IAAK,IAEPoN,OAAQ,CACNrN,IAAK,GACLC,IAAK,IAEPqN,MAAO,CACLtN,IAAK,GACLC,IAAK,IAEPsN,OAAQ,CACNvN,IAAK,EACLC,IAAK,IAEPuN,IAAK,CACHxN,IAAK,EACLC,IAAK,KMhDM,OAA0B,sCCKjC2B,GAAWC,OAAXD,O,mBCyGO6L,GAlGW,WACxB,MAA4B/M,IAAMqK,UAAS,GAA3C,mBAAO7B,EAAP,KAAewE,EAAf,KACA,EAA0BhN,IAAMqK,SAAoB,IAApD,mBAAO4C,EAAP,KAAcxM,EAAd,KACA,EAAkCT,IAAMqK,SAAiB,IAAzD,mBAAO6C,EAAP,KAAkBC,EAAlB,KACA,EAAoCnN,IAAM4K,WAAW7K,GAA7CiB,EAAR,EAAQA,MAAOK,EAAf,EAAeA,OAAQwJ,EAAvB,EAAuBA,SACf3K,EAAuBc,EAAvBd,aAAcC,EAASa,EAATb,KAEtBH,IAAMgM,WAAU,WACd,IAAMoB,EAAoB,SAAC7K,GACzBA,EAAE8K,KAAKjN,UAAY6M,GAUrB,OAPA5L,EAAOsK,GAAG,eAAgByB,GAE1B/L,EAAOiM,cAAyB,YAATnN,EACV,YAATA,GACFM,EAAS,IAGJ,WACLY,EAAO6J,IAAI,eAAgBkC,MAE5B,CAACjN,EAAMkB,EAAQ4L,IAElBjN,IAAMgM,WAAU,YD7Be,SAC/B3K,EACA4L,EACAC,EACApI,GAEc,WAAVmI,GAAgC,UAAVA,GAA+B,WAAVA,IAC7C5L,EAAOmE,iBAAmB,IAAItE,GAAOqM,YAAYlM,IAGrC,WAAV4L,EACF5L,EAAOmE,iBAAmB,IAAItE,GAAOsM,YAAYnM,GAEjDA,EAAOmE,iBAAiBV,MAAQA,EAGpB,QAAVmI,IACF5L,EAAOmE,iBAAmB,IAAItE,GAAO0D,YAAYvD,IAGrC,WAAV4L,IACF5L,EAAOmE,iBAAiBV,MAAQnG,EAAWmG,EAAO,KAGtC,UAAVmI,IACF5L,EAAOmE,iBAAiBV,MAAQ,OAChCzD,EAAOmE,iBAAiByC,OAAS,IAAI/G,GAAOuM,OAAO,CACjDC,KAAM,GACNC,cAAc,EACd7I,WAIJzD,EAAOmE,iBAAiB/G,MAAQyO,ECH9BU,CAAkBvM,EAAQ4L,EAAOC,EAAWhN,GACxC+M,GAASC,EAAYT,GAAWQ,GAAO3N,KACzC6N,EAAaV,GAAWQ,GAAO3N,KAG7B2N,GAASC,EAAYT,GAAWQ,GAAO1N,KACzC4N,EAAaV,GAAWQ,GAAO1N,OAEhC,CAAC0N,EAAO5L,EAAQ6L,EAAWhN,IAW9B,OACE,qCACE,cAAC,EAAD,CAAQuJ,OAAiB,YAATtJ,EAAoB+I,QAAS,kBAAM8D,GAAU,IAA7D,SACE,qBAAK5D,IAAKyE,GAAWvE,IAAI,OAE3B,cAAC,EAAD,CAAOZ,MAAM,UAAUF,OAAQA,EAAQC,QAAS,kBAAMuE,GAAU,IAAhE,SACE,sBAAKnE,UAAWE,KAAO+E,MAAvB,UACE,sBAAKjF,UAAWE,KAAOmE,UAAvB,UACE,sBAAKrE,UAAWE,KAAOgF,eAAvB,UACa,WAAVd,GAAsB,sBAAMpE,UAAWE,KAAOiF,YAAxB,kBACvB,qBACEnF,UAAWE,KAAOkF,QAClBzE,MAAO,CACL/K,MAAOyO,EACP1O,OAAQ0O,EACRxO,gBAAiBwB,EACjBrB,QAAmB,WAAVoO,EAAqB,GAAM,QAI1C,cAACiB,GAAA,EAAD,CACErF,UAAWE,KAAOoF,OAClBC,YAAY,WACZvE,MAAOqD,EACPmB,YAAa,SAACC,EAAOtN,GAAR,OACX,+CAASsN,GAAT,IAAgBzF,UAAWE,KAAOwF,MAAlC,SACE,qBAAK1F,UAAWE,KAAOc,MAAvB,SAA+B7I,EAAMwN,eAGzCC,QAAM,EACNnP,IAAK2N,EAAQR,GAAWQ,GAAO3N,IAAM,EACrCC,IAAK0N,EAAQR,GAAWQ,GAAO1N,IAAM,GACrCqK,SApCQ,SAAC8E,GACnBvB,EAAauB,SAsCP,qBAAK7F,UAAWE,KAAO4F,QAAvB,SACGnC,GAAMoC,KAAI,SAACC,GAAD,OACT,wBACE3F,QAAS,kBA/CD9I,EA+CoByO,EAAKtH,KA9C7CsD,EAASrK,EAAQ,CAAEL,KAAM,kBACzBM,EAASL,GAFU,IAACA,GAiDRyI,UAAWC,IAAWC,KAAOkE,MAAR,eAClBlE,KAAOU,OAASwD,IAAU4B,EAAKtH,OAJpC,SAOE,qBAAK6B,IAAKyF,EAAKjD,KAAMtC,IAAI,MALpBuF,EAAKtH,oBC/FX,OAA0B,iCCoB1BuH,GAdQ,WACrB,MAA4B9O,IAAM4K,WAAW7K,GAArCiB,EAAR,EAAQA,MAAO6J,EAAf,EAAeA,SAMf,OACE,cAAC,EAAD,CAAQ3B,QALW,WACnB2B,EAASrK,EAAQ,CAAEL,KAAM,WAIMsJ,OAAuB,SAAfzI,EAAMb,KAA7C,SACE,qBAAKiJ,IAAKwC,GAAMtC,IAAI,QCfX,OAA0B,iCCA1B,OAA0B,mCCA1B,OAA0B,4CCA1B,OAA0B,sCCA1B,OAA0B,+CCA1B,OAA0B,iCCA1B,OAA0B,0CCA1B,OAA0B,qCCA1B,OAA0B,8CCA1B,OAA0B,uCCA1B,OAA0B,qCCA1B,OAA0B,uCCiB5ByF,GAAS,CACpB,CACErG,MAAO,SACPU,IAAK4F,IAEP,CACEtG,MAAO,iBACPU,IAAK6F,IAEP,CACEvG,MAAO,YACPU,IAAK8F,IAEP,CACExG,MAAO,oBACPU,IAAK+F,IAEP,CACEzG,MAAO,OACPU,IAAKgG,IAEP,CACE1G,MAAO,eACPU,IAAKiG,IAEP,CACE3G,MAAO,WACPU,IAAKkG,IAEP,CACE5G,MAAO,mBACPU,IAAKmG,IAEP,CACE7G,MAAO,YACPU,IAAKoG,IAEP,CACE9G,MAAO,aACPU,ICxDW,IAA0B,yCD0DvC,CACEV,MAAO,YACPU,IAAKqG,IAEP,CACE/G,MAAO,UACPU,IAAKsG,IAEP,CACEhH,MAAO,kBACPU,IEpEW,IAA0B,8CFsEvC,CACEV,MAAO,UACPU,IGxEW,IAA0B,qCH0EvC,CACEV,MAAO,gBACPU,II5EW,IAA0B,4CJ8EvC,CACEV,MAAO,QACPU,IKhFW,IAA0B,oCCA1B,OAA0B,kCCA1B,OAA0B,kCCA1B,OAA0B,kCCA1B,OAA0B,kCCO5BuG,GAAS,CACpB,CACEjH,MAAO,QACPU,IAAKwG,IAEP,CACElH,MAAO,QACPU,IAAKyG,IAEP,CACEnH,MAAO,QACPU,IAAK0G,IAEP,CACEpH,MAAO,aACPU,ICtBW,IAA0B,wCDwBvC,CACEV,MAAO,QACPU,IAAK2G,IAEP,CACErH,MAAO,aACPU,IE9BW,IAA0B,yCCGjClI,GAAWC,OAAXD,O,oBCOF8O,GAAe,CACnBC,OAAQlB,GACRmB,OAAQP,IA8CKQ,GA3CW,WACxB,MAA4BnQ,IAAMqK,UAAS,GAA3C,mBAAO7B,EAAP,KAAewE,EAAf,KACA,EAAsChN,IAAMqK,SAAS,UAArD,mBAAO+F,EAAP,KAAoBC,EAApB,KACA,EAA6BrQ,IAAM4K,WAAW7K,GAAtCsB,EAAR,EAAQA,OAAQwJ,EAAhB,EAAgBA,SAEVyF,EAAoB,SAAClH,GACzByB,EAASrK,EAAQ,CAAEL,KAAM,UDhBN,SACrBkB,EACA+H,EACA7B,GAEA,IAAMgJ,EAAW5Q,IACjBuB,GAAOsP,eAAepH,GAAK,SAACqH,EAASC,GACnC,IAAIC,EAAMzP,GAAOgB,KAAK0O,iBAAiBH,EAASC,GAChDC,EAAIvM,IAAJ,2BACKmM,GACU,WAAThJ,EAAoB,CAAEsJ,cAAc,GAAS,KAEnDF,EAAIG,aAAa,IACjBzP,EAAO8C,IAAIwM,GACXtP,EAAO0P,gBAAgBJ,GACvBtP,EAAOU,eCEPiP,CAAQ3P,EAAQ+H,EAAKgH,IAGvB,OACE,qCACE,cAAC,EAAD,CAAQlH,QAAS,kBAAM8D,GAAU,IAAjC,SACE,qBAAK5D,IAAK6H,GAAU3H,IAAI,OAE1B,eAAC,EAAD,CACEZ,MAAM,gBACNF,OAAQA,EACRC,QAAS,kBAAMuE,GAAU,IAH3B,UAKE,eAAC,EAAD,CACEnE,UAAWE,KAAOmI,OAClBtH,SAAU,SAACrH,GAAD,OAAY8N,EAAe9N,EAAE4O,OAAOtH,QAFhD,UAIE,wBAAQA,MAAM,SAAd,oBACA,wBAAQA,MAAM,SAAd,uBAEF,qBAAKhB,UAAWE,KAAOqI,UAAvB,SACGpB,GAAQI,GAAaxB,KAAI,SAACyC,GAAD,OACxB,wBACEnI,QAAS,kBAAMoH,EAAkBe,EAAMjI,MAEvCP,UAAWE,KAAOsI,MAHpB,SAKE,qBAAKjI,IAAKiI,EAAMjI,IAAKE,IAAI,MAHpB+H,EAAM3I,mBC9CV,OAA0B,iCCGjCxH,GAAWC,OAAXD,OCoBOoQ,GAhBQ,WACrB,MAAoCtR,IAAM4K,WAAW7K,GAA7CiB,EAAR,EAAQA,MAAOK,EAAf,EAAeA,OAAQwJ,EAAvB,EAAuBA,SACf3K,EAAiBc,EAAjBd,aAOR,OACE,cAAC,EAAD,CAAQgJ,QANU,YDNI,SAAC7H,EAA2ByD,GACpD,IAAMyL,EAAW5Q,IACX4R,EAAQ,IAAIrQ,GAAOsQ,MAAM,GAAjB,2BACTjB,GADS,IAEZkB,SAAU,GACVC,WAAY,IACZ9K,KAAM9B,EACN6M,WAAY,SACZC,YAAa,QACbC,UAAW,YAGbxQ,EAAO8C,IAAIoN,GACXlQ,EAAO0P,gBAAgBQ,GACvBA,EAAMO,eACNzQ,EAAOU,YCRLgQ,CAAW1Q,EAAQnB,GACnB2K,EAASrK,EAAQ,CAAEL,KAAM,WAIzB,SACE,qBAAKiJ,IAAKwC,GAAMtC,IAAI,QCdb0I,GAAc,CCJZ,IAA0B,gCCA1B,IAA0B,gCCA1B,IAA0B,iCHM5BC,GAAoB,CAC/B,QACA,QACA,UACA,UACA,UACA,WIZa,OAA0B,oC,oBCQjC/Q,GAAWC,OAAXD,OAgEOgR,GA9Dc,WAC3B,MAA4BlS,IAAMqK,UAAS,GAA3C,mBAAO7B,EAAP,KAAewE,EAAf,KACQ3L,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAwBR,OACE,qCACE,cAAC,EAAD,CAAQ6H,QAAS,kBAAM8D,GAAU,IAAjC,SACE,qBAAK5D,IAAK6H,GAAU3H,IAAI,OAE1B,eAAC,EAAD,CACEZ,MAAM,aACNF,OAAQA,EACRC,QAAS,kBAAMuE,GAAU,IAH3B,UAKE,qBAAKnE,UAAWE,KAAOoJ,eAAvB,SACGH,GAAYpD,KAAI,SAACwD,GAAD,OACf,wBACElJ,QAAS,kBAnCME,EAmCkBgJ,OAlC3ClR,GAAOgD,MAAMmO,QAAQjJ,GAAK,SAACkJ,GACzBjR,EAAOkR,mBAAmBD,EAAKjR,EAAOU,UAAUC,KAAKX,GAAS,CAC5DgD,OAAQ9F,EAAgBE,MAAQ6T,EAAI7T,MACpC6F,OAAQ/F,EAAgBC,OAAS8T,EAAI9T,OAErCyD,UAAU,OANU,IAACmH,GAqCfP,UAAWE,KAAOqJ,WAHpB,SAKE,qBAAKhJ,IAAKgJ,EAAY9I,IAAI,MAHrB8I,QAOX,qBAAKvJ,UAAWE,KAAOoJ,eAAvB,SACGF,GAAkBrD,KAAI,SAAC9J,GAAD,OACrB,wBACEoE,QAAS,kBAnCU,SAACpE,GAC9BzD,EAAOkR,mBACL,IAAIrR,GAAOgD,MAAM,IACjB7C,EAAOU,UAAUC,KAAKX,IAGxBA,EAAOS,mBAAmBgD,EAAOzD,EAAOU,UAAUC,KAAKX,GAAS,CAC9DY,UAAU,IA4BauQ,CAAuB1N,IAEtC+D,UAAWE,KAAOrK,gBAClB8K,MAAO,CAAE9K,gBAAiBoG,IAFrBA,eC7DJ,OAA0B,iCCA5B2N,GAAQ,CAAC,SAAK,SAAK,OAAK,OAAK,OAAK,U,oBCsChCC,GA9BgB,WAC7B,MAA4B1S,IAAMqK,UAAS,GAA3C,mBAAO7B,EAAP,KAAewE,EAAf,KACQ3L,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAMR,OACE,qCACGmH,GACC,qBAAKK,UAAWE,KAAO4J,SAAvB,SACGF,GAAM7D,KAAI,SAACgE,GAAD,OACT,cAAC,EAAD,CACE1J,QAAS,kBCnBG,SAAC7H,EAAuBuR,GAChD,IAAM9K,EAAezG,EAAO+F,kBAE5B,GACEU,GACsB,WAAtBA,EAAaP,MACbO,EAAaT,UACb,CACA,IAAMwL,EAAa/K,EAAagL,eAC1BC,EAAWjL,EAAakL,aAC9BlL,EAAamL,YAAYL,EAAM,KAAMC,EAAYE,GACjDjL,EAAagL,eAAiBD,EAAa,EAC3C/K,EAAakL,aAAeH,EAAa,EACzCxR,EAAOU,aDMkBmR,CAAW7R,EAAQuR,IAElC/J,UAAWE,KAAO6J,KAHpB,SAKGA,GAHIA,QAQb,cAAC,EAAD,CAAQnJ,OAAQjB,EAAQU,QAnBR,WAClB8D,GAAWxE,IAkBT,SACE,qBAAKY,IAAK+J,GAAU7J,IAAI,WE7BxBpI,GAAWC,OAAXD,OCHO,OAA0B,qC,oBCiF1BkS,GA1EY,WACzB,MAAgCpT,IAAMqK,SAAS,CAC7CgJ,UAAW,GACXC,YAAa,KAFf,mBAAOC,EAAP,KAAiBC,EAAjB,KAIA,EAA4BxT,IAAMqK,UAAS,GAA3C,mBAAO7B,EAAP,KAAewE,EAAf,KACA,EAA0BhN,IAAM4K,WAAW7K,GAAnCsB,EAAR,EAAQA,OAAQL,EAAhB,EAAgBA,MACVyS,EAAgBzT,IAAM0T,OAAyB,MAC7CxT,EAAiBc,EAAjBd,aA0BR,OACE,qCACE,cAAC,EAAD,UACE,qBAAKkJ,IAAKuK,GAAcrK,IAAI,GAAGJ,QAbZ,WACvB8D,GAAU,QAcR,cAAC,EAAD,CACEtE,MAAM,kBACNF,OAAQA,EACRC,QAvBc,WAClBuE,GAAU,GACVwG,EAAY,CAAEH,UAAW,GAAIC,YAAa,MAsBtC1K,gBAfuB,WACd,IAAD,EAARJ,IACF,UAAAiL,EAAcG,eAAd,SAAuBC,UASvB,SAME,sBAAKhL,UAAWE,KAAOC,QAAvB,UACE,uBACE8K,IAAKL,EACL5J,MAAO0J,EAASF,UAChB7J,MAAO,CAAE1E,MAAO5E,GAChB0J,SAAU,SAACrH,GAAD,OACRiR,EAAY,2BAAKD,GAAN,IAAgBF,UAAW9Q,EAAE4O,OAAOtH,YAGnD,qBACEhB,UAAWE,KAAOgL,UAClBvK,MAAO,CAAE9K,gBAAiBwB,KAE5B,uBACE2J,MAAO0J,EAASD,YAChB9J,MAAO,CAAE1E,MAAO5E,GAChB0J,SAAU,SAACrH,GAAD,OACRiR,EAAY,2BAAKD,GAAN,IAAgBD,YAAa/Q,EAAE4O,OAAOtH,YAGrD,cAAC,EAAD,CAAQX,QAvDM,YFZM,SAC5B7H,EACAnB,EACAmT,EACAC,GAEA,GAAID,GAAaC,EAAa,CAC5B,IAIMU,EAAwB,IAH5BX,EAAUlQ,OAASmQ,EAAYnQ,OAC3BkQ,EAAUlQ,OACVmQ,EAAYnQ,QAEZoN,EAAW5Q,IACXsU,EAAY,4BAAwBD,EAAxB,uDACiBA,EADjB,6BACkD9T,EADlD,4EAGR8T,EAAe,EAHP,2CAIyB9T,EAJzB,aAI0CmT,EAJ1C,8DAMRW,EAAe,EANP,2CAOyB9T,EAPzB,aAO0CoT,EAP1C,2BAUlBpS,GAAOgT,kBAAkBD,GAAc,SAACxD,EAASC,GAC/C,IAAIC,EAAMzP,GAAOgB,KAAK0O,iBAAiBH,EAASC,GAChDC,EAAIvM,IAAJ,eACKmM,IAELlP,EAAO8C,IAAIwM,GACXtP,EAAO0P,gBAAgBJ,GACvBtP,EAAOU,gBEjBToS,CACE9S,EACAnB,EACAqT,EAASF,UACTE,EAASD,cAkD2BzK,UAAWE,KAAOqL,aAAlD,6B,oBChDKC,GAZqB,kBAClC,sBAAKxL,UAAWE,KAAOC,QAAvB,UACE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,QCpBW,OAA0B,iCCA1B,OAA0B,iCC6C1BsL,GAtCY,WACzB,MAAoCtU,IAAMqK,UAAS,GAAnD,mBAAOkK,EAAP,KAAmBC,EAAnB,KACA,EAAoCxU,IAAMqK,UAAS,GAAnD,mBAAOoK,EAAP,KAAmBC,EAAnB,KACQrT,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAEFsT,EAAc3U,IAAM4U,aAAY,WACpCF,IAAgBrT,EAAOwT,YAAY1R,QACnCqR,IAAgBnT,EAAOyT,YAAY3R,UAClC,CAAC9B,IAEJrB,IAAMgM,WAAU,WACd3K,EAAOsK,GAAG,iBAAkBgJ,KAC3B,CAACtT,EAAQsT,IAcZ,OACE,qCACE,cAAC,EAAD,CAAQjL,UAAW+K,EAAYvL,QAdf,WAClB7H,EAAOsG,sBACPtG,EAAO0T,OACPJ,KAWE,SACE,qBAAKvL,IAAK4L,GAAU1L,IAAI,OAE1B,cAAC,EAAD,CAAQI,UAAW6K,EAAYrL,QAXf,WAClB7H,EAAOsG,sBACPtG,EAAO4T,OACPN,KAQE,SACE,qBAAKvL,IAAK8L,GAAU5L,IAAI,WCvCjB,OAA0B,uCCA1B,OAA0B,qCCqC1B6L,GA7Bc,WAC3B,MAAoCnV,IAAM4K,WAAW7K,GAA7CsB,EAAR,EAAQA,OAAQL,EAAhB,EAAgBA,MAAO6J,EAAvB,EAAuBA,SACfxK,EAAeW,EAAfX,WAoBR,OACE,cAAC,EAAD,CAAQoJ,OAAQpJ,EAAY6I,QAnBJ,WACxB7H,EAAO+T,cAAP,eACO/U,EAKD,CACE5B,MAAOF,EAAgBE,MACvBD,OAAQD,EAAgBC,QAN1B,CACEC,MAAO0C,OAAOkU,WACd7W,OAAQ2C,OAAOmU,eAQvB,IAAMzR,EAAO1C,OAAOkU,WAAa9W,EAAgBE,MACjD4C,EAAOkU,QAASlV,EAAoB,EAAPwD,GAC7BgH,EAASnK,EAAc,CAAEL,YAAaA,MAItC,SACE,qBAAK+I,IAAK/I,EAAamV,GAAeC,GAAgBnM,IAAI,Q,oBCnBjDoM,GAToB,WACjC,OACE,sBAAK7M,UAAWE,KAAOC,QAAvB,UACE,cAAC,GAAD,IACA,cAAC,GAAD,QCNO2M,GAAc,SACzBxE,EACA9P,GAEA,IAAMzB,EAASuR,EAAOyE,iBAChB/R,EAAOxC,EAAOyC,UACd+R,EAAexU,EAAOyU,YACxBjW,GAAO,GAAKD,EAAO0D,EAAK6N,EAAO3S,OAAS2S,EAAO7M,OAAU,GAAKT,EAOlE,OAJIhE,EAAM,GAAKgW,IACbhW,GAAOD,EAAO0D,EAAI,GAAM6N,EAAO3S,OAAS2S,EAAO7M,OAAU,GAAKT,GAGzD,CACLhE,MACAC,KAAMF,EAAOyD,EAAIQ,ICGNkS,GAhBgB,WAC7B,MAA0B/V,IAAM4K,WAAW7K,GAAnCsB,EAAR,EAAQA,OACAnB,EADR,EAAgBc,MACRd,aAMR,OACE,cAAC,EAAD,CACEgJ,QANoB,WACtBrB,EAAwBxG,EAAQnB,IAM9BsJ,MAAO,CAAE9K,gBAAiBwB,MChBjB,OAA0B,mCCqB1B8V,GAfgB,WAC7B,IAAQ3U,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAOR,OACE,cAAC,EAAD,CAAQ6H,QANY,WACpB,IAAMpB,EAAezG,EAAO+F,kBAC5BE,EAAqBjG,EAAQyG,IAI7B,SACE,qBAAKsB,IAAK1B,GAAQ4B,IAAI,QChBb,OAA0B,iCC4D1B2M,GAtDQ,WACrB,IAAQ5U,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OA8CR,OACE,cAAC,EAAD,CAAQ6H,QA7CU,WAClB,IAAMpB,EAAezG,EAAO+F,kBAC5BU,EAAaoO,OAAM,SAACC,GAClB9U,EAAOsG,sBACPwO,EAAO/R,IAAP,qCACEvE,IAAKsW,EAAOtW,IAAM,EAClBC,KAAMqW,EAAOrW,KAAO,GAChBgI,EAAaK,QAAU,CAAEA,SAAS,GAAS,IAC3CL,EAAa+I,aAAe,CAAEA,cAAc,GAAS,IACrD/I,EAAa1H,UACb,CAAEA,UAAW0H,EAAa1H,WAC1B,KAGc,oBAAhB+V,EAAO5O,MACT4O,EAAO9U,OAASA,EAChB8U,EAAO3O,eAAc,SAACmJ,EAAUyF,GAC9B,IAAMC,EAAevO,EAAauD,aAAa+K,GAE3CC,EAAalO,SACfwI,EAAIvM,IAAI,CACN+D,SAAS,IAGTkO,EAAajW,WACfuQ,EAAIvM,IAAI,CACNhE,UAAWiW,EAAajW,YAGxBiW,EAAaxF,cACfF,EAAIvM,IAAI,CACNyM,cAAc,IAGlBxP,EAAO8C,IAAIwM,OAGbtP,EAAO8C,IAAIgS,GAEb9U,EAAO0P,gBAAgBoF,GACvB9U,EAAOuG,uBAKT,SACE,qBAAKwB,IAAKkN,GAAMhN,IAAI,QCvDX,OAA0B,iCCsC1BiN,GAjCY,WACzB,MAAkCvW,IAAMqK,UAAS,GAAjD,mBAAOC,EAAP,KAAkBC,EAAlB,KACQlJ,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAERrB,IAAMgM,WAAU,WAE8B,SAAxC3K,EAAO+F,kBAAkBoP,YAC3BjM,GAAa,KAEd,CAAClJ,IAiBJ,OACE,cAAC,EAAD,CAAQoI,OAAQa,EAAWpB,QAhBN,WACrB,IAAMpB,EAAezG,EAAO+F,kBAExBkD,GAEFxC,EAAa1D,IAAI,CAAEoS,WAAY,WAC/BjM,GAAa,KAGbzC,EAAa1D,IAAI,CAAEoS,WAAY,SAC/BjM,GAAa,IAEflJ,EAAOU,aAIP,SACE,qBAAKqH,IAAKqN,GAAUnN,IAAI,QCjCf,OAA0B,mCCsC1BoN,GAjCc,WAC3B,MAAkC1W,IAAMqK,UAAS,GAAjD,mBAAOC,EAAP,KAAkBC,EAAlB,KACQlJ,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAERrB,IAAMgM,WAAU,WAE6B,WAAvC3K,EAAO+F,kBAAkBuP,WAC3BpM,GAAa,KAEd,CAAClJ,IAiBJ,OACE,cAAC,EAAD,CAAQoI,OAAQa,EAAWpB,QAhBJ,WACvB,IAAMpB,EAAezG,EAAO+F,kBAExBkD,GAEFxC,EAAa1D,IAAI,CAAEuS,UAAW,WAC9BpM,GAAa,KAGbzC,EAAa1D,IAAI,CAAEuS,UAAW,WAC9BpM,GAAa,IAEflJ,EAAOU,aAIP,SACE,qBAAKqH,IAAKwN,GAAYtN,IAAI,QCjCjB,OAA0B,sCCsC1BuN,GAjCiB,WAC9B,MAAkC7W,IAAMqK,UAAS,GAAjD,mBAAOC,EAAP,KAAkBC,EAAlB,KACQlJ,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAERrB,IAAMgM,WAAU,WAEV3K,EAAO+F,kBAAkB0P,WAC3BvM,GAAa,KAEd,CAAClJ,IAiBJ,OACE,cAAC,EAAD,CAAQoI,OAAQa,EAAWpB,QAhBD,WAC1B,IAAMpB,EAAezG,EAAO+F,kBAExBkD,GAEFxC,EAAa1D,IAAI,CAAE0S,WAAW,IAC9BvM,GAAa,KAGbzC,EAAa1D,IAAI,CAAE0S,WAAW,IAC9BvM,GAAa,IAEflJ,EAAOU,aAIP,SACE,qBAAKqH,IAAK2N,GAAezN,IAAI,QCjCpB,OAA0B,uCCA1B,OAA0B,yCCA1B,OAA0B,wCCyC1B0N,GAlCa,WAC1B,MAA0BhX,IAAMqK,SAAS,UAAzC,mBAAO4M,EAAP,KAAcC,EAAd,KACQ7V,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAERrB,IAAMgM,WAAU,WAEdkL,EAAS7V,EAAO+F,kBAAkByK,aACjC,CAACxQ,IAEJ,IAAM8V,EAAe,SAACC,GACpBF,EAASE,GAET/V,EAAO+F,kBAAkBhD,IAAI,CAAEyN,UAAWuF,IAC1C/V,EAAOU,aAGT,OACE,qCACE,cAAC,EAAD,CAAQ0H,OAAkB,SAAVwN,EAAkB/N,QAAS,kBAAMiO,EAAa,SAA9D,SACE,qBAAK/N,IAAKiO,GAAe/N,IAAI,OAE/B,cAAC,EAAD,CACEG,OAAkB,WAAVwN,EACR/N,QAAS,kBAAMiO,EAAa,WAF9B,SAIE,qBAAK/N,IAAKkO,GAAiBhO,IAAI,OAEjC,cAAC,EAAD,CAAQG,OAAkB,UAAVwN,EAAmB/N,QAAS,kBAAMiO,EAAa,UAA/D,SACE,qBAAK/N,IAAKmO,GAAgBjO,IAAI,WCnCzBkO,GAAQ,CACnB,QACA,gBACA,cACA,UACA,SACA,kBACA,W,oBCiCaC,GAhC0B,WACvC,MAAsCzX,IAAMqK,SAAS,IAArD,mBAAOqN,EAAP,KAAoBC,EAApB,KACQtW,EAAWrB,IAAM4K,WAAW7K,GAA5BsB,OAERrB,IAAMgM,WAAU,WAEd2L,EAAetW,EAAO+F,kBAAkBuK,cACvC,CAACtQ,IAUJ,OACE,cAAC,EAAD,CACEuI,SAVsB,SAACrH,GACzBoV,EAAepV,EAAE4O,OAAOtH,OACHxI,EAAO+F,kBAEfhD,IAAI,CAAEuN,WAAYpP,EAAE4O,OAAOtH,QACxCxI,EAAOU,aAML8H,MAAO6N,EACP7O,UAAWE,KAAOC,QAHpB,SAKGwO,GAAM5I,KAAI,SAACgJ,GAAD,OACT,wBAAQ/N,MAAO+N,EAAf,SACGA,GADuBA,S,oBCwEnBC,GAvFc,WAC3B,MAAgC7X,IAAMqK,UAAS,GAA/C,mBAAOyN,EAAP,KAAiBC,EAAjB,KACA,EAAwC/X,IAAMqK,UAAS,GAAvD,mBAAOwG,EAAP,KAAqBmH,EAArB,KACA,EAAwBhY,IAAMqK,SAAS,IAAvC,mBAAO9C,EAAP,KAAa0Q,EAAb,KACA,EAAgCjY,IAAMqK,SAAS,CAAExK,IAAK,EAAGC,KAAM,IAA/D,mBAAOyQ,EAAP,KAAiB2H,EAAjB,KACA,EAA0BlY,IAAM4K,WAAW7K,GAAnCsB,EAAR,EAAQA,OACAhB,EADR,EAAgBW,MACRX,WAwDR,OAtDAL,IAAMgM,WAAU,WACO3K,EAAO+F,mBAG1B8Q,EAAYvC,GAAYtU,EAAO+F,kBAAmB/F,MAEnD,CAAChB,EAAYgB,IAEhBrB,IAAMgM,WAAU,WACd,IAAMmM,EAAgB,SAAC5V,GACrB2V,EAAYvC,GAAYpT,EAAE6V,UAAUjH,OAAQ9P,KAGxCgX,EAAgB,SAAC9V,GACrB,IAAM+V,EAAe/V,EAAE4O,OAEnBmH,IACFL,EAAQK,EAAa/Q,MACrBwQ,GAAY,GACZG,EAAYvC,GAAY2C,EAAcjX,IACtCiX,EAAa3M,GAAG,SAAUwM,GAC1BG,EAAa3M,GAAG,UAAWwM,GAEvBG,EAAazH,cACfmH,GAAgB,GAIQ,WAAtBM,EAAa/Q,MACf+Q,EAAa3M,GAAG,WAAW,WACzBuM,EAAYvC,GAAY2C,EAAcjX,SAM9CA,EAAOsK,GAAG,oBAAqB0M,GAC/BhX,EAAOsK,GAAG,oBAAqB0M,GAC/BhX,EAAOsK,GAAG,qBAAqB,SAACpJ,GAC9BwV,GAAY,GACZC,GAAgB,GACZzV,EAAEgW,aACJhW,EAAEgW,WAAW,GAAGrN,IAAI,SAAUiN,GAC9B5V,EAAEgW,WAAW,GAAGrN,IAAI,UAAWiN,GAEF,WAAzB5V,EAAEgW,WAAW,GAAGhR,OAClBlG,EAAOmX,cAAgB,UACvBjW,EAAEgW,WAAW,GAAGrN,IAAI,WCtEI,SAChC7J,EACAoX,GAEqB,KAAjBA,EAAQC,OACVrX,EAAOqG,OAAO+Q,GACdpX,EAAOU,aDiED4W,CAAmBtX,EAAQkB,EAAEgW,WAAW,WAI7C,CAAClX,IAGF,mCACGyW,GACC,sBACEtO,MAAK,eAAO+G,GACZ1H,UAAWC,IAAWC,KAAOC,QAAR,eAAoBD,KAAOuJ,IAAMzB,IAFxD,WAIIA,GAAgB,cAAC,GAAD,IAClB,cAAC,GAAD,IACA,cAAC,GAAD,IACU,WAATtJ,GACC,qCACE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,a,oBE9ENrG,GAAWC,OAAXD,OAyCO0X,GAvCU,WACvB,MAA0B5Y,IAAM6Y,WAAWlY,EAAYV,GAAvD,mBAAOe,EAAP,KAAc6J,EAAd,KACMiO,EAAc9Y,IAAM0T,OlGlBP,WAInB,IAJ6C,IAAzBvQ,EAAwB,uDAAf,GACzB4V,EAAS,GACPC,EACJ,iEACOC,EAAI,EAAGA,EAAI9V,EAAQ8V,IAC1BF,GAAUC,EAAWE,OAAO1Z,KAAKC,MAAMD,KAAKE,SAAWsZ,EAAW7V,SAEpE,OAAO4V,EkGWkCI,IACnCC,EAAYpZ,IAAM0T,OAAY,MACpC,EAAwB1T,IAAMqK,UAAS,GAAvC,mBAAOgP,EAAP,KAAaC,EAAb,KACQjZ,EAAeW,EAAfX,WAaR,OAXAL,IAAMgM,WAAU,WACV8M,EAAYlF,UACdwF,EAAUxF,QAAU,IAAI1S,GAAOqY,OAC7BT,EAAYlF,QACZrV,GAEF6C,EAAkBgY,EAAUxF,SAC5B0F,GAAQ,MAET,IAGD,sBACEzQ,UAAWC,IAAWC,KAAOC,QAAR,eAClBD,KAAO1I,WAAaA,IAFzB,UAKE,wBAAQmZ,GAAIV,EAAYlF,UACvByF,GACC,eAACtZ,EAAW0Z,SAAZ,CACE5P,MAAO,CAAExI,OAAQ+X,EAAUxF,QAAS/I,WAAU7J,SADhD,UAGE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,WC/CV0Y,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF7S,SAAS8S,eAAe,U,mBCP1Bzb,EAAOC,QAAU,CAAC,eAAiB,mCAAmC,WAAa,+BAA+B,gBAAkB,sC,mBCApID,EAAOC,QAAU,CAAC,QAAU,wBAAwB,OAAS,uBAAuB,SAAW,2B,mBCA/FD,EAAOC,QAAU,CAAC,QAAU,8BAA8B,MAAQ,8B,mBCAlED,EAAOC,QAAU,CAAC,cAAgB,mCAAmC,OAAS,4BAA4B,QAAU,+B,mBCApHD,EAAOC,QAAU,CAAC,OAAS,wBAAwB,UAAY,2BAA2B,MAAQ,yB,mBCAlGD,EAAOC,QAAU,CAAC,QAAU,0BAA0B,UAAY,4BAA4B,aAAe,iC,mBCA7GD,EAAOC,QAAU,CAAC,QAAU,4BAA4B,UAAY,gC,mBCApED,EAAOC,QAAU,CAAC,SAAW,+BAA+B,KAAO,6B,mBCAnED,EAAOC,QAAU,CAAC,QAAU,4BAA4B,IAAM,0B,mBCA9DD,EAAOC,QAAU,CAAC,QAAU,wBAAwB,WAAa,6B,kBCAjED,EAAOC,QAAU,CAAC,MAAQ,uBAAuB,UAAY,2BAA2B,eAAiB,gCAAgC,QAAU,yBAAyB,YAAc,6BAA6B,QAAU,yBAAyB,MAAQ,uBAAuB,OAAS,wBAAwB,OAAS,wBAAwB,OAAS,wBAAwB,MAAQ,uBAAuB,MAAQ,yB,mBCAnaD,EAAOC,QAAU,CAAC,QAAU,0B,mBCA5BD,EAAOC,QAAU,CAAC,QAAU,qC,mBCA5BD,EAAOC,QAAU,CAAC,QAAU,oC,mBCA5BD,EAAOC,QAAU,CAAC,QAAU,6B","file":"static/js/main.fa699357.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Panel_wrapper__o97Tj\",\"header\":\"Panel_header__1ho3T\",\"title\":\"Panel_title__gMfhr\",\"close\":\"Panel_close__3SCzl\",\"opened\":\"Panel_opened__1xDq5\"};","export const FABRIC_SETTINGS = {\n  CANVAS_HEIGHT: 518,\n  CANVAS_WIDTH: 970,\n  CANVAS_BACKGROUND: \"#fff\",\n  CORNER_SIZE: 8,\n  CORNER_STYLE: \"circle\",\n  SELECTION_COLOR: \"rgba(232, 248, 255, 0.1)\",\n  SELECTION_BORDER_COLOR: \"#cef0fe\",\n  SELECTION_LINE_WIDTH: 1,\n  START_COLOR: \"#ff0000\",\n};\n\nexport const CANVAS_SETTINGS = {\n  height: FABRIC_SETTINGS.CANVAS_HEIGHT,\n  width: FABRIC_SETTINGS.CANVAS_WIDTH,\n  backgroundColor: FABRIC_SETTINGS.CANVAS_BACKGROUND,\n};\n","import { fabric as FabricType } from \"fabric\";\nimport { FABRIC_SETTINGS } from \"./constants\";\n\nexport const getId = (length = 10): string => {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * characters.length));\n  }\n  return result;\n};\n\nexport const addOpacity = (hex: string, opacity: number) => {\n  const tempHex = hex.replace(\"#\", \"\");\n  const r = parseInt(tempHex.substring(0, 2), 16);\n  const g = parseInt(tempHex.substring(2, 4), 16);\n  const b = parseInt(tempHex.substring(4, 6), 16);\n\n  return `rgba(${r},${g},${b},${opacity / 100})`;\n};\n\nexport const randomInt = (min: number, max: number): number => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const randomPosition = () => {\n  const center = {\n    x: FABRIC_SETTINGS.CANVAS_WIDTH / 2,\n    y: FABRIC_SETTINGS.CANVAS_HEIGHT / 2,\n  };\n\n  return {\n    top: randomInt(center.y - 180, center.y + 70),\n    left: randomInt(center.x - 350, center.x + 50),\n  };\n};\n\nexport const rgbToHex = (r: number, g: number, b: number): string =>\n  `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;\n\nexport const lockAllObjects = (canvas: FabricType.Canvas): void => {\n  canvas.selection = false;\n  canvas.getObjects().forEach((object: FabricType.Object) => {\n    object.set(\"selectable\", false);\n    object.hoverCursor = \"default\";\n  });\n};\n\nexport const unLockAllObjects = (canvas: FabricType.Canvas): void => {\n  canvas.selection = true;\n  canvas.getObjects().forEach((object: FabricType.Object) => {\n    object.set(\"selectable\", true);\n    object.hoverCursor = \"move\";\n  });\n};\n","import * as React from \"react\";\nimport { AppContext as AppContextType } from \"./types\";\n\nexport const AppContext = React.createContext<AppContextType>(null as any);\n","import { State } from \"./types\";\nimport { FABRIC_SETTINGS } from \"./constants\";\n\nconst appState: State = {\n  currentColor: FABRIC_SETTINGS.START_COLOR,\n  mode: \"hand\",\n  brushType: \"pencil\",\n  fullscreen: false,\n};\n\nexport default appState;\n","import { createAction } from \"typesafe-actions\";\nimport { Mode, BrushType } from \"./types\";\n\nexport const setCurrentColor = createAction(\"SKETCH/SET_CURRENT_COLOR\")<{\n  currentColor: string;\n}>();\n\nexport const setMode = createAction(\"SKETCH/SET_MODE\")<{\n  mode: Mode;\n}>();\n\nexport const setBrush = createAction(\"SKETCH/SET_BRUSH\")<{\n  brushType: BrushType;\n}>();\n\nexport const setFullscreen = createAction(\"SKETCH/SET_FULLSCREEN\")<{\n  fullscreen: boolean;\n}>();\n","import { createReducer, ActionType } from \"typesafe-actions\";\nimport initialState from \"./state\";\nimport * as actions from \"./actions\";\nimport * as Types from \"./types\";\n\ntype Action = ActionType<typeof actions>;\n\nconst appReducer = createReducer<Types.State, Action>(initialState)\n  .handleAction(\n    actions.setCurrentColor,\n    (state, { payload: { currentColor } }) => ({\n      ...state,\n      currentColor,\n    })\n  )\n  .handleAction(actions.setBrush, (state, { payload: { brushType } }) => ({\n    ...state,\n    brushType,\n  }))\n  .handleAction(actions.setMode, (state, { payload: { mode } }) => ({\n    ...state,\n    mode,\n  }))\n  .handleAction(\n    actions.setFullscreen,\n    (state, { payload: { fullscreen } }) => ({\n      ...state,\n      fullscreen,\n    })\n  );\n\nexport default appReducer;\n","import { fabric as FabricType } from \"fabric\";\nimport { FABRIC_SETTINGS } from \"./constants\";\nimport { addPencilBrush } from \"./customBrushes\";\nimport { addOpacity } from \"./utils\";\n\nconst { fabric } = window;\n\nexport const setSketchSettings = (\n  canvas: FabricType.Canvas | undefined\n): void => {\n  if (canvas) {\n    // Initial canvas setup\n    // @ts-ignore\n    fabric.Object.prototype.cornerStyle = FABRIC_SETTINGS.CORNER_STYLE;\n    fabric.Object.prototype.cornerSize = FABRIC_SETTINGS.CORNER_SIZE;\n    canvas.selectionColor = FABRIC_SETTINGS.SELECTION_COLOR;\n    canvas.selectionBorderColor = FABRIC_SETTINGS.SELECTION_BORDER_COLOR;\n    canvas.selectionLineWidth = FABRIC_SETTINGS.SELECTION_LINE_WIDTH;\n    // @ts-ignore\n    canvas.setBackgroundColor(\"white\", canvas.renderAll.bind(canvas), {\n      erasable: false,\n    });\n    addPencilBrush(fabric);\n\n    document.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Backspace\") {\n        const selectedObject = canvas.getActiveObject();\n        // @ts-ignore\n        if (selectedObject && !selectedObject.isEditing) {\n          removeSelectedObject(canvas, selectedObject);\n        }\n      }\n    });\n  }\n};\n\nexport const removeSelectedObject = (\n  canvas: FabricType.Canvas,\n  selectedObject: any\n) => {\n  if (selectedObject && selectedObject.type === \"activeSelection\") {\n    (selectedObject as any).forEachObject((element: any) => {\n      canvas.remove(element);\n    });\n  } else {\n    canvas.remove(selectedObject);\n  }\n\n  canvas.discardActiveObject().requestRenderAll();\n};\n\nexport const changeActiveObjectColor = (\n  canvas: FabricType.Canvas,\n  color: string\n) => {\n  const activeObject = canvas.getActiveObject();\n\n  if (activeObject) {\n    if (\n      activeObject.type === \"activeSelection\" ||\n      activeObject.type === \"group\"\n    ) {\n      (activeObject as any).forEachObject((element: any) => {\n        changeObjectColor(element, color);\n      });\n    } else {\n      changeObjectColor(activeObject, color);\n    }\n\n    canvas.renderAll();\n  }\n};\n\nconst changeObjectColor = (object: any, color: string) => {\n  if (\n    (object.type === \"path\" || object.type === \"line\") &&\n    !object.shadow &&\n    object.brushType !== \"marker\"\n  ) {\n    object.set({ stroke: color });\n  }\n\n  if (object.type === \"path\" && object.brushType === \"marker\") {\n    object.set({ stroke: addOpacity(color, 20) });\n  }\n\n  if (\n    object.type === \"rect\" ||\n    object.type === \"circle\" ||\n    object.type === \"text\" ||\n    object.type === \"i-text\" ||\n    object.fromSVG\n  ) {\n    object.set({ fill: color });\n  }\n\n  if (object.type === \"path\" && object.shadow) {\n    object.set({ shadow: { ...object.shadow, color } });\n  }\n\n  if (object.type === \"image\") {\n    object.filters[0] = new fabric.Image.filters.BlendColor({\n      color,\n      mode: \"tint\",\n    });\n\n    object.applyFilters();\n  }\n};\n","// @ts-nocheck\n/* eslint-disable */\n\n// https://github.com/av01d/fabric-brushes/blob/main/dist/fabric.brushes.min.js\n\nexport const addPencilBrush = (f: any) => {\n  f.util.trimCanvas = function (a) {\n    for (\n      var b = a.getContext(\"2d\"),\n        c = a.width,\n        e = a.height,\n        g = [],\n        h = [],\n        l = b.getImageData(0, 0, c, e),\n        m = function (p, q) {\n          return p - q;\n        },\n        k = 0;\n      k < e;\n      k++\n    )\n      for (var n = 0; n < c; n++)\n        0 < l.data[4 * (k * c + n) + 3] && (g.push(n), h.push(k));\n    g.sort(m);\n    h.sort(m);\n    e = g.length - 1;\n    c = g[e] - g[0];\n    e = h[e] - h[0];\n    l = b.getImageData(g[0], h[0], c, e);\n    a.width = c;\n    a.height = e;\n    b.putImageData(l, 0, 0);\n    return { x: g[0], y: h[0] };\n  };\n  f.Point.prototype.normalize = function (a) {\n    if (null === a || void 0 === a) a = 1;\n    var b = this.distanceFrom({ x: 0, y: 0 });\n    0 < b && ((this.x = (this.x / b) * a), (this.y = (this.y / b) * a));\n    return this;\n  };\n  f.BaseBrush.prototype.convertToImg = function () {\n    var zoom = this.canvas.getZoom();\n    var a = this.canvas.getRetinaScaling(),\n      b = f.util.copyCanvasElement(this.canvas.upperCanvasEl),\n      c = f.util.trimCanvas(b);\n    b = new f.Image(b);\n    this.canvas.add(b);\n    b.set({\n      left: c.x / a / zoom,\n      top: c.y / a / zoom,\n      scaleX: 1 / a / zoom,\n      scaleY: 1 / a / zoom,\n    }).setCoords();\n    this.canvas.clearContext(this.canvas.contextTop);\n  };\n  f.util.getRandom = function (a, b) {\n    b = b ? b : 0;\n    return Math.random() * ((a ? a : 1) - b) + b;\n  };\n  f.util.clamp = function (a, b, c) {\n    \"number\" !== typeof c && (c = 0);\n    return a > b ? b : a < c ? c : a;\n  };\n  f.CrayonBrush = f.util.createClass(f.BaseBrush, {\n    color: \"#000\",\n    opacity: 0.6,\n    width: 1,\n    _baseWidth: 1,\n    _inkAmount: 10,\n    _latestStrokeLength: 0,\n    _point: null,\n    _sep: 5,\n    _size: 0,\n    _latest: null,\n    _drawn: !1,\n    initialize: function (a, b) {\n      b = b || {};\n      this.canvas = a;\n      this.width = b.width || a.freeDrawingBrush.width;\n      this.color = b.color || a.freeDrawingBrush.color;\n      this.opacity = b.opacity || a.contextTop.globalAlpha;\n      this._point = new f.Point(0, 0);\n    },\n    onMouseDown: function (a) {\n      this.canvas.contextTop.globalAlpha = this.opacity;\n      this._size = this.width / 2 + this._baseWidth;\n      this._drawn = !1;\n      this.set(a);\n    },\n    onMouseMove: function (a) {\n      this.update(a);\n      this.draw(this.canvas.contextTop);\n    },\n    onMouseUp: function () {\n      this._drawn && this.convertToImg();\n      this._latest = null;\n      this._latestStrokeLength = 0;\n      this.canvas.contextTop.globalAlpha = 1;\n    },\n    set: function (a) {\n      this._latest\n        ? this._latest.setFromPoint(this._point)\n        : (this._latest = new f.Point(a.x, a.y));\n      f.Point.prototype.setFromPoint.call(this._point, a);\n    },\n    update: function (a) {\n      this.set(a);\n      this._latestStrokeLength = this._point\n        .subtract(this._latest)\n        .distanceFrom({ x: 0, y: 0 });\n    },\n    draw: function (a) {\n      var zoom = this.canvas.getZoom();\n      var b;\n      var c = this._point.subtract(this._latest);\n      var e = Math.ceil(this._size / 2);\n      var g = Math.floor(c.distanceFrom({ x: 0, y: 0 }) / e) + 1;\n      c.normalize(e);\n      var h =\n        this._sep *\n        f.util.clamp((this._inkAmount / this._latestStrokeLength) * 3, 1, 0.5);\n      var l = Math.ceil(this._size * this._sep);\n      var m = this._size / 2;\n      a.save();\n      a.fillStyle = this.color;\n      a.beginPath();\n      for (e = 0; e < l; e++)\n        for (b = 0; b < g; b++) {\n          var k = this._latest.add(c.multiply(b));\n          var n = f.util.getRandom(m);\n          var p = f.util.getRandom(2 * Math.PI);\n          var q = f.util.getRandom(h, h / 2);\n          var r = f.util.getRandom(h, h / 2);\n          var t = k.x + n * Math.sin(p) - q / 2;\n          k = k.y + n * Math.cos(p) - r / 2;\n          a.rect(t * zoom, k * zoom, q, r);\n        }\n      a.fill();\n      a.restore();\n      this._drawn = !0;\n    },\n    _render: function () {},\n  });\n};\n","export default __webpack_public_path__ + \"static/media/close.ae19aa75.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport classNames from \"classnames\";\nimport closeIcon from \"./assets/close.svg\";\nimport styles from \"./Panel.module.css\";\n\ninterface PanelType {\n  opened: boolean;\n  title?: string;\n  onClose: () => any;\n  onTransitionEnd?: () => any;\n}\n\nconst Panel: React.FC<PanelType> = ({\n  opened,\n  onClose,\n  title,\n  children,\n  onTransitionEnd,\n}) => {\n  return (\n    <div\n      onTransitionEnd={onTransitionEnd}\n      className={classNames(styles.wrapper, { [styles.opened]: opened })}\n    >\n      <div className={styles.header}>\n        <div className={styles.title}>{title}</div>\n        <Button onClick={onClose} className={styles.close}>\n          <img src={closeIcon} alt=\"\" />\n        </Button>\n      </div>\n      {children}\n    </div>\n  );\n};\n\nexport default Panel;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./Button.module.css\";\n\ninterface ButtonType {\n  onClick?: () => any;\n  className?: string;\n  active?: boolean;\n  style?: any;\n  disabled?: boolean;\n}\n\nconst Button: React.FC<ButtonType> = ({\n  children,\n  onClick,\n  className,\n  style,\n  active = false,\n  disabled = false,\n}) => (\n  <button\n    disabled={disabled}\n    onClick={onClick}\n    className={classNames(styles.wrapper, className, {\n      [styles.active]: active,\n      [styles.disabled]: disabled,\n    })}\n    style={style}\n  >\n    {children}\n  </button>\n);\n\nexport default Button;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./Select.module.css\";\n\ninterface SelectType {\n  onChange?: (e: any) => any;\n  className?: string;\n  style?: any;\n  value?: any;\n}\n\nconst Select: React.FC<SelectType> = ({\n  children,\n  onChange,\n  value,\n  className,\n  style,\n}) => {\n  return (\n    <select\n      value={value}\n      onChange={onChange}\n      className={classNames(styles.wrapper, className)}\n      style={style}\n    >\n      {children}\n    </select>\n  );\n};\n\nexport default Select;\n","// @ts-nocheck\nimport { rgbToHex } from \"duck/utils\";\nimport { fabric as FabricType } from \"fabric\";\n\nconst { fabric } = window;\n\nexport const getColorOfThePointOnTheCanvas = (\n  canvas: FabricType.Canvas,\n  x: number,\n  y: number\n) => {\n  let ctx = canvas.getContext();\n  const { data } = ctx.getImageData(\n    Math.round(\n      (x + canvas.viewportTransform[4]) *\n        fabric.devicePixelRatio *\n        canvas.getZoom()\n    ),\n    Math.round(\n      (y + canvas.viewportTransform[5]) *\n        fabric.devicePixelRatio *\n        canvas.getZoom()\n    ),\n    1,\n    1\n  );\n\n  return rgbToHex(data[0], data[1], data[2]);\n};\n","export default __webpack_public_path__ + \"static/media/dropper.69cb0ffd.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor, setMode } from \"duck/actions\";\nimport { lockAllObjects, unLockAllObjects } from \"duck/utils\";\nimport { getColorOfThePointOnTheCanvas } from \"./duck/utils\";\nimport icon from \"./assets/dropper.svg\";\nimport styles from \"./Eyedropper.module.css\";\n\nconst Eyedropper: React.FC = () => {\n  const [activated, setActivated] = React.useState<boolean>(false);\n  const [previewColor, setPreviewColor] = React.useState<string>(\"\");\n  const [previewPosition, setPreviewPosition] = React.useState({\n    top: 460,\n    left: 260,\n  });\n  const { canvas, dispatch } = React.useContext(AppContext);\n\n  const canvasMove = (e: any): void => {\n    const selectedColor = getColorOfThePointOnTheCanvas(\n      canvas,\n      e.pointer.x,\n      e.pointer.y\n    );\n    setPreviewPosition({ top: e.pointer.y - 10, left: e.pointer.x + 20 });\n    setPreviewColor(selectedColor);\n  };\n\n  const defaultCanvasState = (): void => {\n    setActivated(false);\n    canvas.off(\"mouse:down\", canvasClick);\n    canvas.off(\"mouse:move\", canvasMove);\n    unLockAllObjects(canvas);\n  };\n\n  const canvasClick = (e: any) => {\n    defaultCanvasState();\n    const selectedColor = getColorOfThePointOnTheCanvas(\n      canvas,\n      e.pointer.x,\n      e.pointer.y\n    );\n    dispatch(setCurrentColor({ currentColor: selectedColor }));\n  };\n\n  const eyeDropperHandler = () => {\n    if (!activated) {\n      setActivated(true);\n      lockAllObjects(canvas);\n      dispatch(setMode({ mode: \"hand\" }));\n      canvas.on(\"mouse:down\", canvasClick);\n      canvas.on(\"mouse:move\", canvasMove);\n    } else {\n      defaultCanvasState();\n    }\n  };\n\n  return (\n    <>\n      {activated && (\n        <div\n          className={styles.colorView}\n          style={{ backgroundColor: previewColor, ...previewPosition }}\n        />\n      )}\n      <Button\n        active={activated}\n        onClick={eyeDropperHandler}\n        className={styles.wrapper}\n      >\n        <img src={icon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default Eyedropper;\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor } from \"duck/actions\";\nimport styles from \"./ColorHistory.module.css\";\n\nconst ColorHistory: React.FC = () => {\n  const [history, setHistory] = React.useState([\"\", \"\"]);\n  const { state, dispatch } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  React.useEffect(() => {\n    setHistory((state) => [currentColor, state[0]]);\n  }, [currentColor]);\n\n  const setColorHandler = (color: string) => {\n    dispatch(setCurrentColor({ currentColor: color }));\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <button\n        className={styles.color}\n        style={{ backgroundColor: history[0] }}\n        onClick={() => setColorHandler(history[0])}\n      />\n      <button\n        className={styles.color}\n        style={{ backgroundColor: history[1] || \"white\" }}\n        onClick={() => setColorHandler(history[1] || \"white\")}\n      />\n    </div>\n  );\n};\n\nexport default ColorHistory;\n","import React from \"react\";\nimport { ColorResult, HuePicker } from \"react-color\";\nimport { FABRIC_SETTINGS } from \"duck/constants\";\nimport { AppContext } from \"duck/context\";\nimport { setCurrentColor } from \"duck/actions\";\nimport { changeActiveObjectColor } from \"duck/operations\";\nimport { Eyedropper, ColorHistory } from \"./components\";\nimport styles from \"./ColorPicker.module.css\";\n\nconst ColorPickerPanel: React.FC = () => {\n  const [localColor, setLocalColor] = React.useState<string>(\n    FABRIC_SETTINGS.START_COLOR\n  );\n  const { canvas, dispatch, state } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  React.useEffect(() => {\n    setLocalColor(currentColor);\n    changeActiveObjectColor(canvas, currentColor);\n  }, [currentColor, canvas]);\n\n  const changeHandler = (color: ColorResult): void => {\n    dispatch(setCurrentColor({ currentColor: color.hex }));\n  };\n\n  const changeLocalColor = (color: ColorResult): void => {\n    setLocalColor(color.hex);\n  };\n\n  return (\n    <div className={styles.pickerWrapper}>\n      <Eyedropper />\n      <HuePicker\n        className={styles.picker}\n        color={localColor}\n        onChange={changeLocalColor}\n        onChangeComplete={changeHandler}\n        // @ts-ignore\n        pointer={() => (\n          <div\n            className={styles.pointer}\n            style={{ backgroundColor: localColor }}\n          />\n        )}\n      />\n      <ColorHistory />\n    </div>\n  );\n};\n\nexport default ColorPickerPanel;\n","import eraser from \"../assets/brush1.svg\";\nimport marker from \"../assets/brush2.svg\";\nimport magic from \"../assets/brush3.svg\";\nimport pencil from \"../assets/brush4.svg\";\nimport pen from \"../assets/brush5.svg\";\n\nexport const TOOLS = [\n  {\n    type: \"eraser\",\n    icon: eraser,\n  },\n  {\n    type: \"marker\",\n    icon: marker,\n  },\n  {\n    type: \"magic\",\n    icon: magic,\n  },\n  {\n    type: \"pencil\",\n    icon: pencil,\n  },\n  {\n    type: \"pen\",\n    icon: pen,\n  },\n];\n\nexport const BRUSH_SIZE = {\n  eraser: {\n    min: 1,\n    max: 90\n  },\n  marker: {\n    min: 20,\n    max: 90\n  },\n  magic: {\n    min: 10,\n    max: 60\n  },\n  pencil: {\n    min: 1,\n    max: 60\n  },\n  pen: {\n    min: 5,\n    max: 20\n  },\n}","export default __webpack_public_path__ + \"static/media/brush1.4bb3634c.svg\";","export default __webpack_public_path__ + \"static/media/brush2.bd74d5cf.svg\";","export default __webpack_public_path__ + \"static/media/brush3.38a28f48.svg\";","export default __webpack_public_path__ + \"static/media/brush4.4c238ed7.svg\";","export default __webpack_public_path__ + \"static/media/brush5.b0040eae.svg\";","export default __webpack_public_path__ + \"static/media/highlight.a5e0d7ce.svg\";","// @ts-nocheck\nimport { fabric as FabricType } from \"fabric\";\nimport { BrushType } from \"duck/types\";\nimport { addOpacity } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const changeCanvasBrush = (\n  canvas: FabricType.Canvas,\n  brush: BrushType,\n  brushSize: number,\n  color: string\n) => {\n  if (brush === \"marker\" || brush === \"magic\" || brush === \"pencil\") {\n    canvas.freeDrawingBrush = new fabric.PencilBrush(canvas);\n  }\n\n  if (brush === \"eraser\") {\n    canvas.freeDrawingBrush = new fabric.EraserBrush(canvas);\n  } else {\n    canvas.freeDrawingBrush.color = color;\n  }\n\n  if (brush === \"pen\") {\n    canvas.freeDrawingBrush = new fabric.CrayonBrush(canvas);\n  }\n\n  if (brush === \"marker\") {\n    canvas.freeDrawingBrush.color = addOpacity(color, 20);\n  }\n\n  if (brush === \"magic\") {\n    canvas.freeDrawingBrush.color = \"#fff\";\n    canvas.freeDrawingBrush.shadow = new fabric.Shadow({\n      blur: 30,\n      affectStroke: true,\n      color,\n    });\n  }\n\n  canvas.freeDrawingBrush.width = brushSize;\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport ReactSlider from \"react-slider\";\nimport { Panel, Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport { BrushType } from \"duck/types\";\nimport { TOOLS, BRUSH_SIZE } from \"./duck/constants\";\nimport highlight from \"./assets/highlight.svg\";\nimport { changeCanvasBrush } from \"./duck/operations\";\nimport styles from \"./Drawing.module.css\";\n\nconst Drawing: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const [brush, setBrush] = React.useState<BrushType>(\"\");\n  const [brushSize, setBrushSize] = React.useState<number>(10);\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { currentColor, mode } = state;\n\n  React.useEffect(() => {\n    const pathCreateHandler = (e: any) => {\n      e.path.brushType = brush;\n    };\n\n    canvas.on(\"path:created\", pathCreateHandler);\n\n    canvas.isDrawingMode = mode === \"drawing\";\n    if (mode !== \"drawing\") {\n      setBrush(\"\");\n    }\n\n    return () => {\n      canvas.off(\"path:created\", pathCreateHandler);\n    };\n  }, [mode, canvas, brush]);\n\n  React.useEffect(() => {\n    changeCanvasBrush(canvas, brush, brushSize, currentColor);\n    if (brush && brushSize < BRUSH_SIZE[brush].min) {\n      setBrushSize(BRUSH_SIZE[brush].min);\n    }\n\n    if (brush && brushSize > BRUSH_SIZE[brush].max) {\n      setBrushSize(BRUSH_SIZE[brush].max);\n    }\n  }, [brush, canvas, brushSize, currentColor]);\n\n  const brushHandler = (brushType: BrushType): void => {\n    dispatch(setMode({ mode: \"drawing\" }));\n    setBrush(brushType);\n  };\n\n  const sizeHandler = (size: number): void => {\n    setBrushSize(size);\n  };\n\n  return (\n    <>\n      <Button active={mode === \"drawing\"} onClick={() => setOpened(true)}>\n        <img src={highlight} alt=\"\" />\n      </Button>\n      <Panel title=\"Brushes\" opened={opened} onClose={() => setOpened(false)}>\n        <div className={styles.panel}>\n          <div className={styles.brushSize}>\n            <div className={styles.exampleWrapper}>\n              {brush === \"marker\" && <span className={styles.exampleText}>text</span>}\n              <div\n                className={styles.example}\n                style={{\n                  width: brushSize,\n                  height: brushSize,\n                  backgroundColor: currentColor,\n                  opacity: brush === \"marker\" ? 0.2 : 1,\n                }}\n              />\n            </div>\n            <ReactSlider\n              className={styles.slider}\n              orientation=\"vertical\"\n              value={brushSize}\n              renderThumb={(props, state) => (\n                <div {...props} className={styles.thumb}>\n                  <div className={styles.value}>{state.valueNow}</div>\n                </div>\n              )}\n              invert\n              min={brush ? BRUSH_SIZE[brush].min : 1}\n              max={brush ? BRUSH_SIZE[brush].max : 60}\n              onChange={sizeHandler}\n            />\n          </div>\n          <div className={styles.brushes}>\n            {TOOLS.map((tool: any) => (\n              <button\n                onClick={() => brushHandler(tool.type)}\n                key={tool.type}\n                className={classNames(styles.brush, {\n                  [styles.active]: brush === tool.type,\n                })}\n              >\n                <img src={tool.icon} alt=\"\" />\n              </button>\n            ))}\n          </div>\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Drawing;\n","export default __webpack_public_path__ + \"static/media/hand.cf210679.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport icon from \"./assets/hand.svg\";\n\nconst Hand: React.FC = () => {\n  const { state, dispatch } = React.useContext(AppContext);\n\n  const clickHandler = () => {\n    dispatch(setMode({ mode: \"hand\" }));\n  };\n\n  return (\n    <Button onClick={clickHandler} active={state.mode === \"hand\"}>\n      <img src={icon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Hand;\n","export default __webpack_public_path__ + \"static/media/star.10d3d0dd.svg\";","export default __webpack_public_path__ + \"static/media/circle.1be35666.svg\";","export default __webpack_public_path__ + \"static/media/circle-outlined.55858944.svg\";","export default __webpack_public_path__ + \"static/media/rectangle.06a5077b.svg\";","export default __webpack_public_path__ + \"static/media/rectangle-outlined.f492c7dd.svg\";","export default __webpack_public_path__ + \"static/media/star.9acb5ada.svg\";","export default __webpack_public_path__ + \"static/media/star-outlined.0daaff4a.svg\";","export default __webpack_public_path__ + \"static/media/triangle.fbe306e2.svg\";","export default __webpack_public_path__ + \"static/media/triangle-outlined.a25dd2aa.svg\";","export default __webpack_public_path__ + \"static/media/arrow-down.66902268.svg\";","export default __webpack_public_path__ + \"static/media/arrow-up.c13fee86.svg\";","export default __webpack_public_path__ + \"static/media/arrow-left.6c52d128.svg\";","import circle from \"./circle.svg\";\nimport circleOutlined from \"./circle-outlined.svg\";\nimport rectangle from \"./rectangle.svg\";\nimport rectangleOutlined from \"./rectangle-outlined.svg\";\nimport star from \"./star.svg\";\nimport starOutlined from \"./star-outlined.svg\";\nimport triangle from \"./triangle.svg\";\nimport triangleOutlined from \"./triangle-outlined.svg\";\nimport arrowDown from \"./arrow-down.svg\";\nimport arrowUp from \"./arrow-up.svg\";\nimport arrowLeft from \"./arrow-left.svg\";\nimport arrowRight from \"./arrow-right.svg\";\nimport thunderOutlined from \"./thunder-outlined.svg\";\nimport thunder from \"./thunder.svg\";\nimport cloudOutlined from \"./cloud-outlined.svg\";\nimport cloud from \"./cloud.svg\";\n\nexport const SHAPES = [\n  {\n    title: \"circle\",\n    src: circle,\n  },\n  {\n    title: \"circleOutlined\",\n    src: circleOutlined,\n  },\n  {\n    title: \"rectangle\",\n    src: rectangle,\n  },\n  {\n    title: \"rectangleOutlined\",\n    src: rectangleOutlined,\n  },\n  {\n    title: \"star\",\n    src: star,\n  },\n  {\n    title: \"starOutlined\",\n    src: starOutlined,\n  },\n  {\n    title: \"triangle\",\n    src: triangle,\n  },\n  {\n    title: \"triangleOutlined\",\n    src: triangleOutlined,\n  },\n  {\n    title: \"arrowDown\",\n    src: arrowDown,\n  },\n  {\n    title: \"arrowRight\",\n    src: arrowRight,\n  },\n  {\n    title: \"arrowLeft\",\n    src: arrowLeft,\n  },\n  {\n    title: \"arrowUp\",\n    src: arrowUp,\n  },\n  {\n    title: \"thunderOutlined\",\n    src: thunderOutlined,\n  },\n  {\n    title: \"thunder\",\n    src: thunder,\n  },\n  {\n    title: \"cloudOutlined\",\n    src: cloudOutlined,\n  },\n  {\n    title: \"cloud\",\n    src: cloud,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/arrow-right.545fd979.svg\";","export default __webpack_public_path__ + \"static/media/thunder-outlined.96c0359a.svg\";","export default __webpack_public_path__ + \"static/media/thunder.ddcd8d6d.svg\";","export default __webpack_public_path__ + \"static/media/cloud-outlined.c144d388.svg\";","export default __webpack_public_path__ + \"static/media/cloud.eda4a7bc.svg\";","export default __webpack_public_path__ + \"static/media/apple.e096d285.svg\";","export default __webpack_public_path__ + \"static/media/grape.603d86e2.svg\";","export default __webpack_public_path__ + \"static/media/lemon.e505d6e4.svg\";","export default __webpack_public_path__ + \"static/media/peach.5acec3d9.svg\";","import apple from \"./apple.svg\";\nimport grape from \"./grape.svg\";\nimport lemon from \"./lemon.svg\";\nimport peach from \"./peach.svg\";\nimport strawberry from \"./strawberry.svg\";\nimport watermelon from \"./watermelon.svg\";\n\nexport const FRUITS = [\n  {\n    title: \"lemon\",\n    src: lemon,\n  },\n  {\n    title: \"apple\",\n    src: apple,\n  },\n  {\n    title: \"grape\",\n    src: grape,\n  },\n  {\n    title: \"strawberry\",\n    src: strawberry,\n  },\n  {\n    title: \"peach\",\n    src: peach,\n  },\n  {\n    title: \"watermelon\",\n    src: watermelon,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/strawberry.8825d787.svg\";","export default __webpack_public_path__ + \"static/media/watermelon.339708ac.svg\";","import { fabric as FabricType } from \"fabric\";\nimport { randomPosition } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const drawImg = (\n  canvas: FabricType.Canvas,\n  src: string,\n  type: string\n) => {\n  const position = randomPosition();\n  fabric.loadSVGFromURL(src, (objects, options) => {\n    let obj = fabric.util.groupSVGElements(objects, options);\n    obj.set({\n      ...position,\n      ...(type !== \"shapes\" ? { fromImgShape: true } : {}),\n    });\n    obj.scaleToWidth(90);\n    canvas.add(obj);\n    canvas.setActiveObject(obj);\n    canvas.renderAll();\n  });\n};\n","import React from \"react\";\nimport { Button, Panel, Select } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport starIcon from \"./assets/star.svg\";\nimport { SHAPES } from \"./shapes\";\nimport { FRUITS } from \"./fruits\";\nimport { drawImg } from \"./duck/operations\";\nimport styles from \"./Figures.module.css\";\n\nconst figures: any = {\n  shapes: SHAPES,\n  fruits: FRUITS,\n};\n\nconst Figures: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const [figuresType, setFiguresType] = React.useState(\"shapes\");\n  const { canvas, dispatch } = React.useContext(AppContext);\n\n  const shapeClickHandler = (src: string) => {\n    dispatch(setMode({ mode: \"hand\" }));\n    drawImg(canvas, src, figuresType);\n  };\n\n  return (\n    <>\n      <Button onClick={() => setOpened(true)}>\n        <img src={starIcon} alt=\"\" />\n      </Button>\n      <Panel\n        title=\"Image Library\"\n        opened={opened}\n        onClose={() => setOpened(false)}\n      >\n        <Select\n          className={styles.select}\n          onChange={(e: any) => setFiguresType(e.target.value)}\n        >\n          <option value=\"shapes\">Shapes</option>\n          <option value=\"fruits\">Fruits</option>\n        </Select>\n        <div className={styles.shapeList}>\n          {figures[figuresType].map((shape: any) => (\n            <button\n              onClick={() => shapeClickHandler(shape.src)}\n              key={shape.title}\n              className={styles.shape}\n            >\n              <img src={shape.src} alt=\"\" />\n            </button>\n          ))}\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Figures;\n","export default __webpack_public_path__ + \"static/media/text.fc450231.svg\";","import { fabric as FabricType } from \"fabric\";\nimport { randomPosition } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const appendText = (canvas: FabricType.Canvas, color: string): void => {\n  const position = randomPosition();\n  const itext = new fabric.IText(\"\", {\n    ...position,\n    fontSize: 28,\n    lineHeight: 0.95,\n    fill: color,\n    fontFamily: \"Tahoma\",\n    cursorColor: \"black\",\n    textAlign: \"center\",\n  });\n\n  canvas.add(itext);\n  canvas.setActiveObject(itext);\n  itext.enterEditing();\n  canvas.renderAll();\n};\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport { Button } from \"components\";\nimport icon from \"./assets/text.svg\";\nimport { appendText } from \"./duck/operations\";\n\nconst Text: React.FC = () => {\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  const textHandler = () => {\n    appendText(canvas, currentColor);\n    dispatch(setMode({ mode: \"hand\" }));\n  };\n\n  return (\n    <Button onClick={textHandler}>\n      <img src={icon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Text;\n","import bg1 from \"./bg1.svg\";\nimport bg2 from \"./bg2.svg\";\nimport bg3 from \"./bg3.svg\";\n\nexport const BACKGROUNDS = [bg1, bg2, bg3];\n\nexport const BACKGROUND_COLORS = [\n  \"white\",\n  \"black\",\n  \"#3cb5ff\",\n  \"#bce8f1\",\n  \"#f4e796\",\n  \"#c1beec\",\n];\n","export default __webpack_public_path__ + \"static/media/bg1.981d1d53.svg\";","export default __webpack_public_path__ + \"static/media/bg2.402b432f.svg\";","export default __webpack_public_path__ + \"static/media/bg3.782e88f7.svg\";","export default __webpack_public_path__ + \"static/media/picture.b59a650c.svg\";","import React from \"react\";\nimport { Button, Panel } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { CANVAS_SETTINGS } from \"duck/constants\";\nimport { BACKGROUNDS, BACKGROUND_COLORS } from \"./assets\";\nimport starIcon from \"./assets/picture.svg\";\nimport styles from \"./Background.module.css\";\n\nconst { fabric } = window;\n\nconst Background: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  const backgroundHandler = (src: string): void => {\n    fabric.Image.fromURL(src, (img: any) => {\n      canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\n        scaleX: CANVAS_SETTINGS.width / img.width,\n        scaleY: CANVAS_SETTINGS.height / img.height,\n        // @ts-ignore\n        erasable: false,\n      });\n    });\n  };\n\n  const backgroundColorHandler = (color: string): void => {\n    canvas.setBackgroundImage(\n      new fabric.Image(\"\"),\n      canvas.renderAll.bind(canvas)\n    );\n    // @ts-ignore\n    canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas), {\n      erasable: false,\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={() => setOpened(true)}>\n        <img src={starIcon} alt=\"\" />\n      </Button>\n      <Panel\n        title=\"Background\"\n        opened={opened}\n        onClose={() => setOpened(false)}\n      >\n        <div className={styles.backgroundList}>\n          {BACKGROUNDS.map((background: string) => (\n            <button\n              onClick={() => backgroundHandler(background)}\n              key={background}\n              className={styles.background}\n            >\n              <img src={background} alt=\"\" />\n            </button>\n          ))}\n        </div>\n        <div className={styles.backgroundList}>\n          {BACKGROUND_COLORS.map((color: string) => (\n            <button\n              onClick={() => backgroundColorHandler(color)}\n              key={color}\n              className={styles.backgroundColor}\n              style={{ backgroundColor: color }}\n            />\n          ))}\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Background;\n","export default __webpack_public_path__ + \"static/media/char.7bb36b6f.svg\";","export const CHARS = [\"≤\", \"≥\", \"×\", \"÷\", \"°\", \"→\"];","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport charIcon from \"./assets/char.svg\";\nimport { CHARS } from \"./duck/constants\";\nimport { insertChar } from \"./duck/operations\";\nimport styles from \"./SpecialChars.module.css\";\n\nconst SpecialChars: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  const openHandler = () => {\n    setOpened(!opened);\n  };\n\n  return (\n    <>\n      {opened && (\n        <div className={styles.charList}>\n          {CHARS.map((char: string) => (\n            <Button\n              onClick={() => insertChar(canvas, char)}\n              key={char}\n              className={styles.char}\n            >\n              {char}\n            </Button>\n          ))}\n        </div>\n      )}\n      <Button active={opened} onClick={openHandler}>\n        <img src={charIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default SpecialChars;\n","// @ts-nocheck\nimport { fabric } from \"fabric\";\n\nexport const insertChar = (canvas: fabric.Canvas, char: string): void => {\n  const activeObject = canvas.getActiveObject();\n\n  if (\n    activeObject &&\n    activeObject.type === \"i-text\" &&\n    activeObject.isEditing\n  ) {\n    const caretStart = activeObject.selectionStart;\n    const caretEnd = activeObject.selectionEnd;\n    activeObject.insertChars(char, null, caretStart, caretEnd);\n    activeObject.selectionStart = caretStart + 1;\n    activeObject.selectionEnd = caretStart + 1;\n    canvas.renderAll();\n  }\n};\n","import { randomPosition } from \"duck/utils\";\nimport { fabric as FabricType } from \"fabric\";\n\nconst { fabric } = window;\n\nexport const insertFraction = (\n  canvas: FabricType.Canvas,\n  currentColor: string,\n  numerator: string,\n  denominator: string\n): void => {\n  if (numerator && denominator) {\n    const length =\n      numerator.length > denominator.length\n        ? numerator.length\n        : denominator.length;\n    const viewBoxWidth = length * 12;\n    const position = randomPosition();\n    const svgContainer = `<svg viewBox=\"0 0 ${viewBoxWidth} 85\">\n            <line x1=\"0\" y1=\"45\" x2=\"${viewBoxWidth}\" y2=\"45\" stroke=\"${currentColor}\" stroke-width=\"2\" />\n            <text text-anchor=\"middle\" x=\"${\n              viewBoxWidth / 2\n            }\" y=\"38\" font-size=\"24px\" fill=\"${currentColor}\">${numerator}</text>\n            <text text-anchor=\"middle\" x=\"${\n              viewBoxWidth / 2\n            }\" y=\"70\" font-size=\"24px\" fill=\"${currentColor}\">${denominator}</text>\n        </svg>`;\n\n    fabric.loadSVGFromString(svgContainer, (objects, options) => {\n      let obj = fabric.util.groupSVGElements(objects, options);\n      obj.set({\n        ...position,\n      });\n      canvas.add(obj);\n      canvas.setActiveObject(obj);\n      canvas.renderAll();\n    });\n  }\n};\n","export default __webpack_public_path__ + \"static/media/fraction.f6677d83.svg\";","import React from \"react\";\nimport { Button, Panel } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { insertFraction } from \"./duck/operations\";\nimport fractionIcon from \"./assets/fraction.svg\";\nimport styles from \"./Fraction.module.css\";\n\nconst Fraction: React.FC = () => {\n  const [fraction, setFraction] = React.useState({\n    numerator: \"\",\n    denominator: \"\",\n  });\n  const [opened, setOpened] = React.useState(false);\n  const { canvas, state } = React.useContext(AppContext);\n  const focusInputRef = React.useRef<HTMLInputElement>(null);\n  const { currentColor } = state;\n\n  const handlerInsert = (): void => {\n    insertFraction(\n      canvas,\n      currentColor,\n      fraction.numerator,\n      fraction.denominator\n    );\n  };\n\n  const handleClose = (): void => {\n    setOpened(false);\n    setFraction({ numerator: \"\", denominator: \"\" });\n  };\n\n  const openPanelHandler = (): void => {\n    setOpened(true);\n  };\n\n  const transitionEndHandler = (): void => {\n    if (opened) {\n      focusInputRef.current?.focus();\n    }\n  };\n\n  return (\n    <>\n      <Button>\n        <img src={fractionIcon} alt=\"\" onClick={openPanelHandler} />\n      </Button>\n      <Panel\n        title=\"Insert Fraction\"\n        opened={opened}\n        onClose={handleClose}\n        onTransitionEnd={transitionEndHandler}\n      >\n        <div className={styles.wrapper}>\n          <input\n            ref={focusInputRef}\n            value={fraction.numerator}\n            style={{ color: currentColor }}\n            onChange={(e) =>\n              setFraction({ ...fraction, numerator: e.target.value })\n            }\n          />\n          <div\n            className={styles.separator}\n            style={{ backgroundColor: currentColor }}\n          />\n          <input\n            value={fraction.denominator}\n            style={{ color: currentColor }}\n            onChange={(e) =>\n              setFraction({ ...fraction, denominator: e.target.value })\n            }\n          />\n          <Button onClick={handlerInsert} className={styles.insertButton}>\n            Insert\n          </Button>\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Fraction;\n","import React from \"react\";\nimport {\n  Drawing,\n  Hand,\n  Figures,\n  Text,\n  Background,\n  SpecialChars,\n  Fraction\n} from \"./components\";\nimport styles from \"./RightControlPanel.module.css\";\n\nconst RightControlPanel: React.FC = () => (\n  <div className={styles.wrapper}>\n    <Hand />\n    <Drawing />\n    <Text />\n    <SpecialChars />\n    <Fraction />\n    <Background />\n    <Figures />\n  </div>\n);\n\nexport default RightControlPanel;\n","export default __webpack_public_path__ + \"static/media/undo.c0720610.svg\";","export default __webpack_public_path__ + \"static/media/redo.cfafd4e4.svg\";","// @ts-nocheck\nimport React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport undoIcon from \"./assets/undo.svg\";\nimport redoIcon from \"./assets/redo.svg\";\n\nconst UndoRedo: React.FC = () => {\n  const [redoActive, setRedoActive] = React.useState(false);\n  const [undoActive, setUndoActive] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  const activeCheck = React.useCallback(() => {\n    setUndoActive(!!canvas.historyUndo.length);\n    setRedoActive(!!canvas.historyRedo.length);\n  }, [canvas]);\n\n  React.useEffect(() => {\n    canvas.on(\"history:append\", activeCheck);\n  }, [canvas, activeCheck]);\n\n  const undoHandler = (): void => {\n    canvas.discardActiveObject();\n    canvas.undo();\n    activeCheck();\n  };\n\n  const redoHandler = (): void => {\n    canvas.discardActiveObject();\n    canvas.redo();\n    activeCheck();\n  };\n\n  return (\n    <>\n      <Button disabled={!undoActive} onClick={undoHandler}>\n        <img src={undoIcon} alt=\"\" />\n      </Button>\n      <Button disabled={!redoActive} onClick={redoHandler}>\n        <img src={redoIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default UndoRedo;\n","export default __webpack_public_path__ + \"static/media/fullscreen.24771eb9.svg\";","export default __webpack_public_path__ + \"static/media/minimize.43572175.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { setFullscreen } from \"duck/actions\";\nimport { CANVAS_SETTINGS } from \"duck/constants\";\nimport { AppContext } from \"duck/context\";\nimport fullscreenIcon from \"./assets/fullscreen.svg\";\nimport minimizeIcon from \"./assets/minimize.svg\";\n\nconst Fullscreen: React.FC = () => {\n  const { canvas, state, dispatch } = React.useContext(AppContext);\n  const { fullscreen } = state;\n\n  const fullscreenHandler = () => {\n    canvas.setDimensions({\n      ...(!fullscreen\n        ? {\n            width: window.innerWidth,\n            height: window.innerHeight,\n          }\n        : {\n            width: CANVAS_SETTINGS.width,\n            height: CANVAS_SETTINGS.height,\n          }),\n    });\n\n    const zoom = window.innerWidth / CANVAS_SETTINGS.width;\n    canvas.setZoom(!fullscreen ? zoom : 1);\n    dispatch(setFullscreen({ fullscreen: !fullscreen }));\n  };\n\n  return (\n    <Button active={fullscreen} onClick={fullscreenHandler}>\n      <img src={fullscreen ? minimizeIcon : fullscreenIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Fullscreen;\n","import React from \"react\";\nimport { Fullscreen, UndoRedo } from \"./components\";\nimport styles from \"./LeftControlPanel.module.css\";\n\nconst LeftControlPanel: React.FC = () => {\n  return (\n    <div className={styles.wrapper}>\n      <Fullscreen />\n      <UndoRedo />\n    </div>\n  );\n};\n\nexport default LeftControlPanel;\n","import { fabric as FabricType } from \"fabric\";\n\nexport const getPosition = (\n  target: any,\n  canvas: FabricType.Canvas\n): { top: number; left: number } => {\n  const center = target.getCenterPoint();\n  const zoom = canvas.getZoom();\n  const canvasHeight = canvas.getHeight();\n  let top = (15 + center.y + (target.height * target.scaleY) / 2) * zoom;\n\n  // change menu position from bottom to top\n  if (top + 30 > canvasHeight) {\n    top = (center.y - 95 - (target.height * target.scaleY) / 2) * zoom;\n  }\n\n  return {\n    top,\n    left: center.x * zoom,\n  };\n};\n","import React from \"react\";\nimport { AppContext } from \"duck/context\";\nimport { changeActiveObjectColor } from \"duck/operations\";\nimport { Button } from \"components\";\n\nconst CurrentColor: React.FC = () => {\n  const { canvas, state } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  const setColorHandler = () => {\n    changeActiveObjectColor(canvas, currentColor);\n  };\n\n  return (\n    <Button\n      onClick={setColorHandler}\n      style={{ backgroundColor: currentColor }}\n    />\n  );\n};\n\nexport default CurrentColor;\n","export default __webpack_public_path__ + \"static/media/delete.c022e131.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { removeSelectedObject } from \"duck/operations\";\nimport remove from \"./assets/delete.svg\";\nimport { AppContext } from \"duck/context\";\n\nconst RemoveObject: React.FC = () => {\n  const { canvas } = React.useContext(AppContext);\n\n  const removeHandler = () => {\n    const activeObject = canvas.getActiveObject();\n    removeSelectedObject(canvas, activeObject);\n  };\n\n  return (\n    <Button onClick={removeHandler}>\n      <img src={remove} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default RemoveObject;\n","export default __webpack_public_path__ + \"static/media/copy.15beb7fb.svg\";","// @ts-nocheck\nimport React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport copy from \"./assets/copy.svg\";\n\nconst Copy: React.FC = () => {\n  const { canvas } = React.useContext(AppContext);\n\n  const copyHandler = () => {\n    const activeObject = canvas.getActiveObject();\n    activeObject.clone((cloned: any) => {\n      canvas.discardActiveObject();\n      cloned.set({\n        top: cloned.top + 8,\n        left: cloned.left + 8,\n        ...(activeObject.fromSVG ? { fromSVG: true } : {}),\n        ...(activeObject.fromImgShape ? { fromImgShape: true } : {}),\n        ...(activeObject.brushType\n          ? { brushType: activeObject.brushType }\n          : {}),\n      });\n\n      if (cloned.type === \"activeSelection\") {\n        cloned.canvas = canvas;\n        cloned.forEachObject((obj: any, index: number) => {\n          const clonedObject = activeObject.getObjects()[index];\n\n          if (clonedObject.fromSVG) {\n            obj.set({\n              fromSVG: true,\n            });\n          }\n          if (clonedObject.brushType) {\n            obj.set({\n              brushType: clonedObject.brushType,\n            });\n          }\n          if (clonedObject.fromImgShape) {\n            obj.set({\n              fromImgShape: true,\n            });\n          }\n          canvas.add(obj);\n        });\n      } else {\n        canvas.add(cloned);\n      }\n      canvas.setActiveObject(cloned);\n      canvas.requestRenderAll();\n    });\n  };\n\n  return (\n    <Button onClick={copyHandler}>\n      <img src={copy} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Copy;\n","export default __webpack_public_path__ + \"static/media/bold.a0908168.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport boldIcon from \"./assets/bold.svg\";\n\nconst BoldText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().fontWeight === \"bold\") {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setBoldHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ fontWeight: \"normal\" });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ fontWeight: \"bold\" });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setBoldHandler}>\n      <img src={boldIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default BoldText;\n","export default __webpack_public_path__ + \"static/media/italic.cf5cd34d.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport italicIcon from \"./assets/italic.svg\";\n\nconst ItalicText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().fontStyle === \"italic\") {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setItalicHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ fontStyle: \"normal\" });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ fontStyle: \"italic\" });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setItalicHandler}>\n      <img src={italicIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default ItalicText;\n","export default __webpack_public_path__ + \"static/media/underline.c56bb0d2.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport underlineIcon from \"./assets/underline.svg\";\n\nconst UnderlineText: React.FC = () => {\n  const [activated, setActivated] = React.useState(false);\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    if (canvas.getActiveObject().underline) {\n      setActivated(true);\n    }\n  }, [canvas]);\n\n  const setUnderlineHandler = () => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activated) {\n      // @ts-ignore\n      activeObject.set({ underline: false });\n      setActivated(false);\n    } else {\n      // @ts-ignore\n      activeObject.set({ underline: true });\n      setActivated(true);\n    }\n    canvas.renderAll();\n  };\n\n  return (\n    <Button active={activated} onClick={setUnderlineHandler}>\n      <img src={underlineIcon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default UnderlineText;\n","export default __webpack_public_path__ + \"static/media/align-left.277ba860.svg\";","export default __webpack_public_path__ + \"static/media/align-center.32449acd.svg\";","export default __webpack_public_path__ + \"static/media/align-right.f9735e6a.svg\";","import React from \"react\";\nimport { Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport alignLeftIcon from \"./assets/align-left.svg\";\nimport alignCenterIcon from \"./assets/align-center.svg\";\nimport alignRightIcon from \"./assets/align-right.svg\";\n\nconst AlignText: React.FC = () => {\n  const [align, setAlign] = React.useState(\"center\");\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    setAlign(canvas.getActiveObject().textAlign);\n  }, [canvas]);\n\n  const alignHandler = (newAlign: string) => {\n    setAlign(newAlign);\n    // @ts-ignore\n    canvas.getActiveObject().set({ textAlign: newAlign });\n    canvas.renderAll();\n  };\n\n  return (\n    <>\n      <Button active={align === \"left\"} onClick={() => alignHandler(\"left\")}>\n        <img src={alignLeftIcon} alt=\"\" />\n      </Button>\n      <Button\n        active={align === \"center\"}\n        onClick={() => alignHandler(\"center\")}\n      >\n        <img src={alignCenterIcon} alt=\"\" />\n      </Button>\n      <Button active={align === \"right\"} onClick={() => alignHandler(\"right\")}>\n        <img src={alignRightIcon} alt=\"\" />\n      </Button>\n    </>\n  );\n};\n\nexport default AlignText;\n","export const FONTS = [\n  \"Arial\",\n  \"Comic Sans MS\",\n  \"Courier New\",\n  \"Georgia\",\n  \"Tahoma\",\n  \"Times New Roman\",\n  \"Verdana\",\n];\n","import React from \"react\";\nimport { Select } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { FONTS } from \"./duck/constants\";\nimport styles from \"./FontText.module.css\";\n\ninterface FontTextType {}\n\nconst FontText: React.FC<FontTextType> = () => {\n  const [currentFont, setCurrentFont] = React.useState(\"\");\n  const { canvas } = React.useContext(AppContext);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    setCurrentFont(canvas.getActiveObject().fontFamily);\n  }, [canvas]);\n\n  const changeFontHandler = (e: any): void => {\n    setCurrentFont(e.target.value);\n    const activeObject = canvas.getActiveObject();\n    // @ts-ignore\n    activeObject.set({ fontFamily: e.target.value });\n    canvas.renderAll();\n  };\n\n  return (\n    <Select\n      onChange={changeFontHandler}\n      value={currentFont}\n      className={styles.wrapper}\n    >\n      {FONTS.map((font: string) => (\n        <option value={font} key={font}>\n          {font}\n        </option>\n      ))}\n    </Select>\n  );\n};\n\nexport default FontText;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { AppContext } from \"duck/context\";\nimport { getPosition } from \"./duck/utils\";\nimport { removeEmptyTextbox } from \"./duck/operations\";\nimport {\n  CurrentColor,\n  RemoveObject,\n  Copy,\n  BoldText,\n  ItalicText,\n  UnderlineText,\n  AlignText,\n  FontText,\n} from \"./components\";\nimport styles from \"./ObjectMenu.module.css\";\n\nconst ObjectMenu: React.FC = () => {\n  const [selected, setSelected] = React.useState(false);\n  const [fromImgShape, setFromImgShape] = React.useState(false);\n  const [type, setType] = React.useState(\"\");\n  const [position, setPosition] = React.useState({ top: 0, left: 0 });\n  const { canvas, state } = React.useContext(AppContext);\n  const { fullscreen } = state;\n\n  React.useEffect(() => {\n    const activeObject = canvas.getActiveObject();\n\n    if (activeObject) {\n      setPosition(getPosition(canvas.getActiveObject(), canvas));\n    }\n  }, [fullscreen, canvas]);\n\n  React.useEffect(() => {\n    const movingHandler = (e: any) => {\n      setPosition(getPosition(e.transform.target, canvas));\n    };\n\n    const selectHandler = (e: any) => {\n      const targetObject = e.target;\n\n      if (targetObject) {\n        setType(targetObject.type);\n        setSelected(true);\n        setPosition(getPosition(targetObject, canvas));\n        targetObject.on(\"moving\", movingHandler);\n        targetObject.on(\"scaling\", movingHandler);\n\n        if (targetObject.fromImgShape) {\n          setFromImgShape(true);\n        }\n\n        // resize fix for i-text\n        if (targetObject.type === \"i-text\") {\n          targetObject.on(\"changed\", () => {\n            setPosition(getPosition(targetObject, canvas));\n          });\n        }\n      }\n    };\n\n    canvas.on(\"selection:created\", selectHandler);\n    canvas.on(\"selection:updated\", selectHandler);\n    canvas.on(\"selection:cleared\", (e: any) => {\n      setSelected(false);\n      setFromImgShape(false);\n      if (e.deselected) {\n        e.deselected[0].off(\"moving\", movingHandler);\n        e.deselected[0].off(\"scaling\", movingHandler);\n\n        if (e.deselected[0].type === \"i-text\") {\n          canvas.defaultCursor = \"default\";\n          e.deselected[0].off(\"changed\");\n          removeEmptyTextbox(canvas, e.deselected[0]);\n        }\n      }\n    });\n  }, [canvas]);\n\n  return (\n    <>\n      {selected && (\n        <div\n          style={{ ...position }}\n          className={classNames(styles.wrapper, { [styles.img]: fromImgShape })}\n        >\n          {!fromImgShape && <CurrentColor />}\n          <RemoveObject />\n          <Copy />\n          {type === \"i-text\" && (\n            <>\n              <BoldText />\n              <ItalicText />\n              <UnderlineText />\n              <AlignText />\n              <FontText />\n            </>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ObjectMenu;\n","import { fabric as FabricType } from \"fabric\";\n\nexport const removeEmptyTextbox = (\n  canvas: FabricType.Canvas,\n  textbox: any\n): any => {\n  if (textbox.text === \"\") {\n    canvas.remove(textbox);\n    canvas.renderAll();\n  }\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport \"fabric-history\";\nimport { getId } from \"duck/utils\";\nimport { AppContext } from \"duck/context\";\nimport appReducer from \"duck/reducer\";\nimport appState from \"duck/state\";\nimport { CANVAS_SETTINGS } from \"duck/constants\";\nimport { setSketchSettings } from \"duck/operations\";\nimport {\n  ColorPickerPanel,\n  ObjectMenu,\n  RightControlPanel,\n  LeftControlPanel,\n} from \"./components\";\nimport styles from \"./Sketch.module.css\";\n\nconst { fabric } = window;\n\nconst Sketch: React.FC = () => {\n  const [state, dispatch] = React.useReducer(appReducer, appState);\n  const canvasIdRef = React.useRef<string>(getId());\n  const sketchRef = React.useRef<any>(null);\n  const [init, setInit] = React.useState(false);\n  const { fullscreen } = state;\n\n  React.useEffect(() => {\n    if (canvasIdRef.current) {\n      sketchRef.current = new fabric.Canvas(\n        canvasIdRef.current,\n        CANVAS_SETTINGS\n      );\n      setSketchSettings(sketchRef.current);\n      setInit(true);\n    }\n  }, []);\n\n  return (\n    <div\n      className={classNames(styles.wrapper, {\n        [styles.fullscreen]: fullscreen,\n      })}\n    >\n      <canvas id={canvasIdRef.current} />\n      {init && (\n        <AppContext.Provider\n          value={{ canvas: sketchRef.current, dispatch, state }}\n        >\n          <LeftControlPanel />\n          <ColorPickerPanel />\n          <RightControlPanel />\n          <ObjectMenu />\n        </AppContext.Provider>\n      )}\n    </div>\n  );\n};\n\nexport default Sketch;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Sketch from \"./sketch\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Sketch />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backgroundList\":\"Background_backgroundList__3Q63z\",\"background\":\"Background_background__2waWn\",\"backgroundColor\":\"Background_backgroundColor__11qqf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__1oiSI\",\"active\":\"Button_active__1Qvou\",\"disabled\":\"Button_disabled__nbT6h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ColorHistory_wrapper__2Ecmf\",\"color\":\"ColorHistory_color__mlCe6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pickerWrapper\":\"ColorPicker_pickerWrapper__1gQeM\",\"picker\":\"ColorPicker_picker__NHuPG\",\"pointer\":\"ColorPicker_pointer__2vrFs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"Figures_select__1KLhn\",\"shapeList\":\"Figures_shapeList__x2KT2\",\"shape\":\"Figures_shape__ub_sG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Fraction_wrapper__drGCQ\",\"separator\":\"Fraction_separator__1j604\",\"insertButton\":\"Fraction_insertButton__pLNCq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Eyedropper_wrapper__3_CV9\",\"colorView\":\"Eyedropper_colorView__2Ppen\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charList\":\"SpecialChars_charList__jsD3R\",\"char\":\"SpecialChars_char__3qn65\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ObjectMenu_wrapper__pEbwy\",\"img\":\"ObjectMenu_img__dPHYV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Sketch_wrapper__2RmtI\",\"fullscreen\":\"Sketch_fullscreen__3tgqX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"Drawing_panel__2o_TQ\",\"brushSize\":\"Drawing_brushSize__aLRaj\",\"exampleWrapper\":\"Drawing_exampleWrapper__3TzB5\",\"example\":\"Drawing_example__2VsWC\",\"exampleText\":\"Drawing_exampleText__ETlUH\",\"brushes\":\"Drawing_brushes__2BT4B\",\"brush\":\"Drawing_brush__2P9t4\",\"active\":\"Drawing_active__2g9G-\",\"leaves\":\"Drawing_leaves__hypIS\",\"slider\":\"Drawing_slider__pHZbj\",\"thumb\":\"Drawing_thumb__2xpH_\",\"value\":\"Drawing_value__3uPDE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Select_wrapper__1Vf5h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"RightControlPanel_wrapper__3PtuO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LeftControlPanel_wrapper__2Xh4t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FontText_wrapper__1LKYP\"};"],"sourceRoot":""}