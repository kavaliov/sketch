{"version":3,"sources":["components/panel/Panel.module.css","components/panel/assets/close.svg","components/panel/Panel.tsx","components/button/Button.tsx","duck/context.ts","duck/actions.ts","duck/constants.ts","duck/addCustomBrushes.ts","duck/operations.ts","components/color-picker-panel/ColorPickerPanel.tsx","components/right-control-panel/components/drawing/duck/constants.ts","components/right-control-panel/components/drawing/assets/brush1.svg","components/right-control-panel/components/drawing/assets/brush2.svg","components/right-control-panel/components/drawing/assets/brush3.svg","components/right-control-panel/components/drawing/assets/brush4.svg","components/right-control-panel/components/drawing/assets/brush5.svg","components/right-control-panel/components/drawing/assets/highlight.svg","components/right-control-panel/components/drawing/duck/operations.ts","duck/utils.ts","components/right-control-panel/components/drawing/Drawing.tsx","components/right-control-panel/components/hand/assets/hand.svg","components/right-control-panel/components/hand/Hand.tsx","components/right-control-panel/RightControlPanel.tsx","duck/state.ts","duck/reducer.ts","Sketch.tsx","index.tsx","components/button/Button.module.css","components/color-picker-panel/ColorPicker.module.css","components/right-control-panel/components/drawing/Drawing.module.css","components/right-control-panel/RightControlPanel.module.css","Sketch.module.css"],"names":["module","exports","Panel","opened","onClose","title","children","className","classNames","styles","wrapper","header","onClick","close","src","closeIcon","alt","Button","active","AppContext","React","setCurrentColor","createAction","setMode","setBrush","FABRIC_SETTINGS","CANVAS_SETTINGS","height","width","backgroundColor","addCustomBrushes","f","util","trimCanvas","a","b","getContext","c","e","g","h","l","getImageData","m","p","q","k","n","data","push","sort","length","putImageData","x","y","Point","prototype","normalize","this","distanceFrom","BaseBrush","convertToImg","canvas","getRetinaScaling","copyCanvasElement","upperCanvasEl","Image","add","set","left","top","scaleX","scaleY","setCoords","clearContext","contextTop","getRandom","Math","random","clamp","CrayonBrush","createClass","color","opacity","_baseWidth","_inkAmount","_latestStrokeLength","_point","_sep","_size","_latest","_drawn","initialize","freeDrawingBrush","globalAlpha","onMouseDown","onMouseMove","update","draw","onMouseUp","setFromPoint","call","subtract","ceil","floor","save","fillStyle","beginPath","multiply","PI","r","t","sin","cos","rect","fill","restore","_render","fabric","window","removeSelectedObject","selectedObject","getActiveObject","type","forEachObject","element","remove","discardActiveObject","requestRenderAll","changeObjectColor","object","stroke","hex","ColorPickerPanel","useContext","dispatch","currentColor","state","pickerWrapper","picker","onChange","activeObject","renderAll","changeActiveObjectColor","TOOLS","icon","changeCanvasBrush","brush","brushSize","PencilBrush","EraserBrush","tempHex","replace","parseInt","substring","addOpacity","shadow","Shadow","blur","affectStroke","Drawing","useState","setOpened","setBrushSize","mode","useEffect","isDrawingMode","highlight","panel","exampleWrapper","example","style","ReactSlider","slider","orientation","defaultValue","renderThumb","props","thumb","value","valueNow","invert","min","max","size","brushes","map","tool","brushType","Hand","RightControlPanel","appState","appReducer","createReducer","initialState","handleAction","actions","payload","Sketch","useReducer","canvasIdRef","useRef","result","characters","i","charAt","getId","sketchRef","init","setInit","current","Canvas","Object","cornerStyle","cornerSize","selectionColor","selectionBorderColor","selectionLineWidth","selection","document","addEventListener","event","key","id","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.24ceb49d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Panel_wrapper__o97Tj\",\"header\":\"Panel_header__1ho3T\",\"close\":\"Panel_close__3SCzl\",\"opened\":\"Panel_opened__1xDq5\"};","export default __webpack_public_path__ + \"static/media/close.ae19aa75.svg\";","import React from \"react\";\nimport { Button } from \"../index\";\nimport classNames from \"classnames\";\nimport closeIcon from \"./assets/close.svg\";\nimport styles from \"./Panel.module.css\";\n\ninterface PanelType {\n  opened: boolean;\n  title?: string;\n  onClose: () => any;\n}\n\nconst Panel: React.FC<PanelType> = ({ opened, onClose, title, children }) => {\n  return (\n    <div className={classNames(styles.wrapper, { [styles.opened]: opened })}>\n      <div className={styles.header}>\n        {title}\n        <Button onClick={onClose} className={styles.close}>\n          <img src={closeIcon} alt=\"\" />\n        </Button>\n      </div>\n      {children}\n    </div>\n  );\n};\n\nexport default Panel;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./Button.module.css\";\n\ninterface ButtonType {\n  onClick?: () => any;\n  className?: string;\n  active?: boolean;\n}\n\nconst Button: React.FC<ButtonType> = ({\n  children,\n  onClick,\n  className,\n  active = false,\n}) => (\n  <button\n    onClick={onClick}\n    className={classNames(styles.wrapper, className, {\n      [styles.active]: active,\n    })}\n  >\n    {children}\n  </button>\n);\n\nexport default Button;\n","import * as React from \"react\";\nimport { AppContext as AppContextType } from \"./types\";\n\nexport const AppContext = React.createContext<AppContextType>(null as any);","import { createAction } from \"typesafe-actions\";\nimport { Mode, BrushType } from \"./types\";\n\nexport const setCurrentColor = createAction(\"SKETCH/SET_CURRENT_COLOR\")<{\n  currentColor: string;\n}>();\n\nexport const setMode = createAction(\"SKETCH/SET_MODE\")<{\n  mode: Mode;\n}>();\n\nexport const setBrush = createAction(\"SKETCH/SET_BRUSH\")<{\n  brushType: BrushType;\n}>();\n","export const FABRIC_SETTINGS = {\n  CANVAS_HEIGHT: 518,\n  CANVAS_WIDTH: 970,\n  CANVAS_BACKGROUND: \"#fff\",\n  CORNER_SIZE: 6,\n  CORNER_STYLE: \"circle\",\n  SELECTION_COLOR: \"rgba(232, 248, 255, 0.1)\",\n  SELECTION_BORDER_COLOR: \"#cef0fe\",\n  SELECTION_LINE_WIDTH: 1,\n};\n\nexport const CANVAS_SETTINGS = {\n  height: FABRIC_SETTINGS.CANVAS_HEIGHT,\n  width: FABRIC_SETTINGS.CANVAS_WIDTH,\n  backgroundColor: FABRIC_SETTINGS.CANVAS_BACKGROUND,\n};\n","// @ts-nocheck\n/* eslint-disable */\n\n// https://github.com/av01d/fabric-brushes/blob/main/dist/fabric.brushes.min.js\n\nconst addCustomBrushes = (f: any) => {\n  f.util.trimCanvas = function (a) {\n    for (\n      var b = a.getContext(\"2d\"),\n        c = a.width,\n        e = a.height,\n        g = [],\n        h = [],\n        l = b.getImageData(0, 0, c, e),\n        m = function (p, q) {\n          return p - q;\n        },\n        k = 0;\n      k < e;\n      k++\n    )\n      for (var n = 0; n < c; n++)\n        0 < l.data[4 * (k * c + n) + 3] && (g.push(n), h.push(k));\n    g.sort(m);\n    h.sort(m);\n    e = g.length - 1;\n    c = g[e] - g[0];\n    e = h[e] - h[0];\n    l = b.getImageData(g[0], h[0], c, e);\n    a.width = c;\n    a.height = e;\n    b.putImageData(l, 0, 0);\n    return { x: g[0], y: h[0] };\n  };\n  f.Point.prototype.normalize = function (a) {\n    if (null === a || void 0 === a) a = 1;\n    var b = this.distanceFrom({ x: 0, y: 0 });\n    0 < b && ((this.x = (this.x / b) * a), (this.y = (this.y / b) * a));\n    return this;\n  };\n  f.BaseBrush.prototype.convertToImg = function () {\n    var a = this.canvas.getRetinaScaling(),\n      b = f.util.copyCanvasElement(this.canvas.upperCanvasEl),\n      c = f.util.trimCanvas(b);\n    b = new f.Image(b);\n    this.canvas.add(b);\n    b.set({\n      left: c.x / a,\n      top: c.y / a,\n      scaleX: 1 / a,\n      scaleY: 1 / a,\n    }).setCoords();\n    this.canvas.clearContext(this.canvas.contextTop);\n  };\n  f.util.getRandom = function (a, b) {\n    b = b ? b : 0;\n    return Math.random() * ((a ? a : 1) - b) + b;\n  };\n  f.util.clamp = function (a, b, c) {\n    \"number\" !== typeof c && (c = 0);\n    return a > b ? b : a < c ? c : a;\n  };\n  f.CrayonBrush = f.util.createClass(f.BaseBrush, {\n    color: \"#000\",\n    opacity: 0.6,\n    width: 1,\n    _baseWidth: 1,\n    _inkAmount: 10,\n    _latestStrokeLength: 0,\n    _point: null,\n    _sep: 5,\n    _size: 0,\n    _latest: null,\n    _drawn: !1,\n    initialize: function (a, b) {\n      b = b || {};\n      this.canvas = a;\n      this.width = b.width || a.freeDrawingBrush.width;\n      this.color = b.color || a.freeDrawingBrush.color;\n      this.opacity = b.opacity || a.contextTop.globalAlpha;\n      this._point = new f.Point(0, 0);\n    },\n    onMouseDown: function (a) {\n      this.canvas.contextTop.globalAlpha = this.opacity;\n      this._size = this.width / 2 + this._baseWidth;\n      this._drawn = !1;\n      this.set(a);\n    },\n    onMouseMove: function (a) {\n      this.update(a);\n      this.draw(this.canvas.contextTop);\n    },\n    onMouseUp: function () {\n      this._drawn && this.convertToImg();\n      this._latest = null;\n      this._latestStrokeLength = 0;\n      this.canvas.contextTop.globalAlpha = 1;\n    },\n    set: function (a) {\n      this._latest\n        ? this._latest.setFromPoint(this._point)\n        : (this._latest = new f.Point(a.x, a.y));\n      f.Point.prototype.setFromPoint.call(this._point, a);\n    },\n    update: function (a) {\n      this.set(a);\n      this._latestStrokeLength = this._point\n        .subtract(this._latest)\n        .distanceFrom({ x: 0, y: 0 });\n    },\n    draw: function (a) {\n      var b;\n      var c = this._point.subtract(this._latest);\n      var e = Math.ceil(this._size / 2);\n      var g = Math.floor(c.distanceFrom({ x: 0, y: 0 }) / e) + 1;\n      c.normalize(e);\n      var h =\n        this._sep *\n        f.util.clamp((this._inkAmount / this._latestStrokeLength) * 3, 1, 0.5);\n      var l = Math.ceil(this._size * this._sep);\n      var m = this._size / 2;\n      a.save();\n      a.fillStyle = this.color;\n      a.beginPath();\n      for (e = 0; e < l; e++)\n        for (b = 0; b < g; b++) {\n          var k = this._latest.add(c.multiply(b));\n          var n = f.util.getRandom(m);\n          var p = f.util.getRandom(2 * Math.PI);\n          var q = f.util.getRandom(h, h / 2);\n          var r = f.util.getRandom(h, h / 2);\n          var t = k.x + n * Math.sin(p) - q / 2;\n          k = k.y + n * Math.cos(p) - r / 2;\n          a.rect(t, k, q, r);\n        }\n      a.fill();\n      a.restore();\n      this._drawn = !0;\n    },\n    _render: function () {},\n  });\n};\n\nexport default addCustomBrushes;\n","import { fabric as FabricType } from \"fabric\";\nimport { FABRIC_SETTINGS } from \"./constants\";\nimport { ColorResult } from \"react-color\";\nimport addCustomBrushes from \"./addCustomBrushes\";\n\nconst { fabric } = window;\n\nexport const setSketchSettings = (\n  canvas: FabricType.Canvas | undefined\n): void => {\n  if (canvas) {\n    // Initial canvas setup\n    // @ts-ignore\n    fabric.Object.prototype.cornerStyle = FABRIC_SETTINGS.CORNER_STYLE;\n    fabric.Object.prototype.cornerSize = FABRIC_SETTINGS.CORNER_SIZE;\n    canvas.selectionColor = FABRIC_SETTINGS.SELECTION_COLOR;\n    canvas.selectionBorderColor = FABRIC_SETTINGS.SELECTION_BORDER_COLOR;\n    canvas.selectionLineWidth = FABRIC_SETTINGS.SELECTION_LINE_WIDTH;\n    canvas.selection = false;\n    addCustomBrushes(fabric);\n\n    document.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Backspace\") {\n        removeSelectedObject(canvas);\n      }\n    });\n  }\n};\n\nconst removeSelectedObject = (canvas: FabricType.Canvas) => {\n  const selectedObject = canvas.getActiveObject();\n\n  if (selectedObject && selectedObject.type === \"activeSelection\") {\n    (selectedObject as any).forEachObject((element: any) => {\n      canvas.remove(element);\n    });\n  } else {\n    canvas.remove(selectedObject);\n  }\n\n  canvas.discardActiveObject().requestRenderAll();\n};\n\nexport const changeActiveObjectColor = (\n  canvas: FabricType.Canvas,\n  color: ColorResult\n) => {\n  const activeObject = canvas.getActiveObject();\n\n  if (activeObject) {\n    if (activeObject.type === \"activeSelection\") {\n      (activeObject as any).forEachObject((element: any) => {\n        changeObjectColor(element, color);\n      });\n    } else {\n      changeObjectColor(activeObject, color);\n    }\n\n    canvas.renderAll();\n  }\n};\n\nconst changeObjectColor = (object: any, color: ColorResult) => {\n  if (object.type === \"path\") {\n    object.set({ stroke: color.hex });\n  }\n\n  if (object.type === \"rect\" || object.type === \"circle\") {\n    object.set({ fill: color.hex });\n  }\n};\n","import React from \"react\";\nimport { ColorResult, HuePicker } from \"react-color\";\nimport { AppContext } from \"../../duck/context\";\nimport { setCurrentColor } from \"../../duck/actions\";\nimport { changeActiveObjectColor } from \"duck/operations\";\nimport styles from \"./ColorPicker.module.css\";\n\nconst ColorPickerPanel: React.FC = () => {\n  const { canvas, dispatch, state } = React.useContext(AppContext);\n  const { currentColor } = state;\n\n  const changeHandler = (color: ColorResult) => {\n    dispatch(setCurrentColor({ currentColor: color.hex }));\n    changeActiveObjectColor(canvas, color);\n  };\n\n  return (\n    <div className={styles.pickerWrapper}>\n      <HuePicker\n        className={styles.picker}\n        color={currentColor}\n        onChange={changeHandler}\n      />\n    </div>\n  );\n};\n\nexport default ColorPickerPanel;\n","import eraser from \"../assets/brush1.svg\";\nimport marker from \"../assets/brush2.svg\";\nimport magic from \"../assets/brush3.svg\";\nimport pencil from \"../assets/brush4.svg\";\nimport pen from \"../assets/brush5.svg\";\n\nexport const TOOLS = [\n  {\n    type: \"eraser\",\n    icon: eraser,\n  },\n  {\n    type: \"marker\",\n    icon: marker,\n  },\n  {\n    type: \"magic\",\n    icon: magic,\n  },\n  {\n    type: \"pencil\",\n    icon: pencil,\n  },\n  {\n    type: \"pen\",\n    icon: pen,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/brush1.4bb3634c.svg\";","export default __webpack_public_path__ + \"static/media/brush2.bd74d5cf.svg\";","export default __webpack_public_path__ + \"static/media/brush3.38a28f48.svg\";","export default __webpack_public_path__ + \"static/media/brush4.4c238ed7.svg\";","export default __webpack_public_path__ + \"static/media/brush5.b0040eae.svg\";","export default __webpack_public_path__ + \"static/media/highlight.a5e0d7ce.svg\";","import { fabric as FabricType } from \"fabric\";\nimport { BrushType } from \"duck/types\";\nimport { addOpacity } from \"duck/utils\";\n\nconst { fabric } = window;\n\nexport const changeCanvasBrush = (\n  canvas: FabricType.Canvas,\n  brush: BrushType,\n  brushSize: number,\n  color: string\n) => {\n  if (brush === \"marker\" || brush === \"magic\" || brush === \"pencil\") {\n    // @ts-ignore\n    canvas.freeDrawingBrush = new fabric.PencilBrush(canvas);\n  }\n\n  if (brush === \"eraser\") {\n    // @ts-ignore\n    canvas.freeDrawingBrush = new fabric.EraserBrush(canvas);\n  } else {\n    canvas.freeDrawingBrush.color = color;\n  }\n\n  if (brush === \"pen\") {\n    // @ts-ignore\n    canvas.freeDrawingBrush = new fabric.CrayonBrush(canvas);\n  }\n\n  if (brush === \"marker\") {\n    canvas.freeDrawingBrush.color = addOpacity(color, 20);\n  }\n\n  if (brush === \"magic\") {\n    canvas.freeDrawingBrush.color = \"#fff\";\n    // @ts-ignore\n    canvas.freeDrawingBrush.shadow = new fabric.Shadow({\n      blur: 30,\n      affectStroke: true,\n      color,\n    });\n  }\n\n  canvas.freeDrawingBrush.width = brushSize;\n};\n","export const getId = (length = 10): string => {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * characters.length));\n  }\n  return result;\n};\n\nexport const addOpacity = (hex: string, opacity: number) => {\n  const tempHex = hex.replace(\"#\", \"\");\n  const r = parseInt(tempHex.substring(0, 2), 16);\n  const g = parseInt(tempHex.substring(2, 4), 16);\n  const b = parseInt(tempHex.substring(4, 6), 16);\n\n  return `rgba(${r},${g},${b},${opacity / 100})`;\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport ReactSlider from \"react-slider\";\nimport \"react-slider\";\nimport { Panel, Button } from \"components\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport { BrushType } from \"duck/types\";\nimport { TOOLS } from \"./duck/constants\";\nimport highlight from \"./assets/highlight.svg\";\nimport { changeCanvasBrush } from \"./duck/operations\";\nimport styles from \"./Drawing.module.css\";\n\nconst Drawing: React.FC = () => {\n  const [opened, setOpened] = React.useState(false);\n  const [brush, setBrush] = React.useState<BrushType>(\"\");\n  const [brushSize, setBrushSize] = React.useState<number>(10);\n  const { state, canvas, dispatch } = React.useContext(AppContext);\n  const { currentColor, mode } = state;\n\n  React.useEffect(() => {\n    canvas.isDrawingMode = mode === \"drawing\";\n  }, [mode, canvas]);\n\n  React.useEffect(() => {\n    changeCanvasBrush(canvas, brush, brushSize, currentColor);\n  }, [brush, canvas, brushSize, currentColor]);\n\n  const brushHandler = (brushType: BrushType): void => {\n    dispatch(setMode({ mode: \"drawing\" }));\n    setBrush(brushType);\n    setOpened(false);\n  };\n\n  const sizeHandler = (size: number): void => {\n    setBrushSize(size);\n  };\n\n  return (\n    <>\n      <Button active={mode === \"drawing\"} onClick={() => setOpened(true)}>\n        <img src={highlight} alt=\"\" />\n      </Button>\n      <Panel opened={opened} onClose={() => setOpened(false)}>\n        <div className={styles.panel}>\n          <div className={styles.brushSize}>\n            <div className={styles.exampleWrapper}>\n              <div\n                className={styles.example}\n                style={{\n                  width: brushSize,\n                  height: brushSize,\n                  backgroundColor: currentColor,\n                }}\n              />\n            </div>\n            <ReactSlider\n              className={styles.slider}\n              orientation=\"vertical\"\n              defaultValue={brushSize}\n              renderThumb={(props, state) => (\n                <div {...props} className={styles.thumb}>\n                  <div className={styles.value}>{state.valueNow}</div>\n                </div>\n              )}\n              invert\n              min={1}\n              max={60}\n              onChange={sizeHandler}\n            />\n          </div>\n          <div className={styles.brushes}>\n            {TOOLS.map((tool: any) => (\n              <button\n                onClick={() => brushHandler(tool.type)}\n                key={tool.type}\n                className={classNames(styles.brush, {\n                  [styles.active]: brush === tool.type,\n                })}\n              >\n                <img src={tool.icon} alt=\"\" />\n              </button>\n            ))}\n          </div>\n        </div>\n      </Panel>\n    </>\n  );\n};\n\nexport default Drawing;\n","export default __webpack_public_path__ + \"static/media/hand.cf210679.svg\";","import React from \"react\";\nimport { Button } from \"../../../index\";\nimport { AppContext } from \"duck/context\";\nimport { setMode } from \"duck/actions\";\nimport icon from \"./assets/hand.svg\";\n\nconst Hand: React.FC = () => {\n  const { state, dispatch } = React.useContext(AppContext);\n\n  const clickHandler = () => {\n    dispatch(setMode({ mode: \"hand\" }));\n  };\n\n  return (\n    <Button onClick={clickHandler} active={state.mode === \"hand\"}>\n      <img src={icon} alt=\"\" />\n    </Button>\n  );\n};\n\nexport default Hand;\n","import React from \"react\";\nimport { Drawing, Hand } from \"./components\";\nimport styles from \"./RightControlPanel.module.css\";\n\nconst RightControlPanel: React.FC = () => {\n  return (\n    <div className={styles.wrapper}>\n      <Hand />\n      <Drawing />\n    </div>\n  );\n};\n\nexport default RightControlPanel;\n","import { State } from \"./types\";\n\nconst appState: State = {\n  currentColor: \"#ff0000\",\n  mode: \"hand\",\n  brushType: \"pencil\",\n};\n\nexport default appState;\n","import { createReducer, ActionType } from \"typesafe-actions\";\nimport initialState from \"./state\";\nimport * as actions from \"./actions\";\nimport * as Types from \"./types\";\n\ntype Action = ActionType<typeof actions>;\n\nconst appReducer = createReducer<Types.State, Action>(initialState)\n  .handleAction(\n    actions.setCurrentColor,\n    (state, { payload: { currentColor } }) => ({\n      ...state,\n      currentColor,\n    })\n  )\n  .handleAction(actions.setBrush, (state, { payload: { brushType } }) => ({\n    ...state,\n    brushType,\n  }))\n  .handleAction(actions.setMode, (state, { payload: { mode } }) => ({\n    ...state,\n    mode,\n  }));\n\nexport default appReducer;\n","import React from \"react\";\nimport { ColorPickerPanel, RightControlPanel } from \"./components\";\nimport { getId } from \"duck/utils\";\nimport { AppContext } from \"duck/context\";\nimport appReducer from \"duck/reducer\";\nimport appState from \"duck/state\";\nimport { CANVAS_SETTINGS } from \"./duck/constants\";\nimport { setSketchSettings } from \"./duck/operations\";\nimport styles from \"./Sketch.module.css\";\n\nconst { fabric } = window;\n\nconst Sketch: React.FC = () => {\n  const [state, dispatch] = React.useReducer(appReducer, appState);\n  const canvasIdRef = React.useRef<string>(getId());\n  const sketchRef = React.useRef<any>(null);\n  const [init, setInit] = React.useState(false);\n\n  React.useEffect(() => {\n    if (canvasIdRef.current) {\n      sketchRef.current = new fabric.Canvas(\n        canvasIdRef.current,\n        CANVAS_SETTINGS\n      );\n      setSketchSettings(sketchRef.current);\n      setInit(true);\n    }\n  }, []);\n\n  return (\n    <div className={styles.wrapper}>\n      <canvas id={canvasIdRef.current} />\n      {init && (\n        <AppContext.Provider\n          value={{ canvas: sketchRef.current, dispatch, state }}\n        >\n          <ColorPickerPanel />\n          <RightControlPanel />\n        </AppContext.Provider>\n      )}\n    </div>\n  );\n};\n\nexport default Sketch;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Sketch from './Sketch';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Sketch />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__1oiSI\",\"active\":\"Button_active__1Qvou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pickerWrapper\":\"ColorPicker_pickerWrapper__FIb-p\",\"picker\":\"ColorPicker_picker__-UzkV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"Drawing_panel__2YMND\",\"brushSize\":\"Drawing_brushSize__KfiI2\",\"exampleWrapper\":\"Drawing_exampleWrapper__3Utvu\",\"example\":\"Drawing_example__2HB4X\",\"brushes\":\"Drawing_brushes__3-VLc\",\"brush\":\"Drawing_brush__3ydnR\",\"active\":\"Drawing_active__2CsHw\",\"leaves\":\"Drawing_leaves__2eNQa\",\"slider\":\"Drawing_slider__3Ygcy\",\"thumb\":\"Drawing_thumb__1NL88\",\"value\":\"Drawing_value__11aHN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"RightControlPanel_wrapper__3bH1D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Sketch_wrapper__2qscz\"};"],"sourceRoot":""}